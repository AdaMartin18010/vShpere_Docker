# 自动化工具使用指南 - 2025

## 问题解决方案

### 问题描述

以前可以通过主题修改自动生成和修改目录，现在需要手工一行行修改，耗费大量精力。

### 解决方案

我们创建了一套完整的自动化工具系统，彻底解决目录手工修改问题。

## 快速开始

### 方法一：一键更新所有目录（推荐）

```bash
# 使用uv（推荐）
uv run python tools/simple_toc_updater.py .

# 或使用系统Python
python tools/simple_toc_updater.py .
```

### 方法二：使用批处理脚本

```bash
# Windows
tools\run_automation.bat simple

# Linux/Mac
./tools/run_automation.sh simple
```

### 方法三：使用综合自动化系统

```bash
# 交互模式
uv run python tools/comprehensive_automation.py

# 快速更新模式
uv run python tools/comprehensive_automation.py --mode quick

# 完整自动化模式
uv run python tools/comprehensive_automation.py --mode full
```

## 工具功能

### 1. 目录自动生成

- ✅ 自动提取所有标题
- ✅ 智能生成目录结构
- ✅ 自动更新现有目录
- ✅ 批量处理所有文档

### 2. 文档质量检查

- ✅ 检查文档结构
- ✅ 验证代码块格式
- ✅ 检查必需章节
- ✅ 生成质量报告

### 3. 格式自动修复

- ✅ 修复标题格式
- ✅ 修复列表格式
- ✅ 修复代码块格式
- ✅ 统一文档风格

### 4. 批量处理

- ✅ 批量更新目录
- ✅ 批量验证质量
- ✅ 批量修复格式
- ✅ 生成处理报告

## 使用场景

### 场景1：日常维护

```bash
# 快速更新所有文档目录
uv run python tools/simple_toc_updater.py .
```

### 场景2：质量检查

```bash
# 验证所有文档质量
uv run python tools/document_automation.py --validate

# 生成质量报告
uv run python tools/document_automation.py --report
```

### 场景3：格式修复

```bash
# 修复指定文档格式
uv run python tools/document_automation.py --fix "文档.md"

# 创建新文档模板
uv run python tools/document_automation.py --template "新文档.md" "文档标题"
```

### 场景4：完整自动化

```bash
# 运行完整自动化流程
uv run python tools/comprehensive_automation.py --mode full
```

## 配置说明

### 配置文件位置

`tools/doc_config.yaml`

### 主要配置项

- `required_sections`: 必需章节列表
- `min_sections`: 最小章节数量
- `min_code_examples`: 最小代码示例数量
- `require_toc`: 是否要求目录
- `require_abstract`: 是否要求摘要

## 故障排除

### 常见问题

#### 1. Python未找到

**解决方案**: 使用uv运行

```bash
uv run python tools/simple_toc_updater.py .
```

#### 2. 文件编码问题

**解决方案**: 确保文件使用UTF-8编码

#### 3. 权限问题

**解决方案**: 检查文件写入权限

### 调试模式

```bash
# 查看详细输出
uv run python tools/simple_toc_updater.py . 2>&1 | tee debug.log
```

## 最佳实践

### 1. 定期维护

- 每周运行一次快速更新
- 每月运行一次完整检查
- 新文档创建后立即更新目录

### 2. 版本控制

- 使用Git管理文档版本
- 重要修改前创建备份
- 记录重要变更

### 3. 团队协作

- 统一使用自动化工具
- 制定文档标准
- 定期培训团队成员

## 工具对比

| 工具 | 功能 | 依赖 | 推荐场景 |
|------|------|------|----------|
| simple_toc_updater.py | 目录更新 | 无 | 日常使用 |
| document_automation.py | 质量检查 | 可选 | 质量保证 |
| comprehensive_automation.py | 综合管理 | 可选 | 完整流程 |
| run_automation.bat/sh | 批处理 | 无 | 快速执行 |

## 更新日志

### v1.0 (2025-01)

- ✅ 创建基础目录更新工具
- ✅ 实现批量处理功能
- ✅ 添加质量检查功能
- ✅ 创建综合自动化系统
- ✅ 支持uv集成

## 总结

通过这套自动化工具，您可以：

1. **彻底解决目录手工修改问题** - 一键更新所有文档目录
2. **提高文档维护效率** - 自动化处理，节省时间
3. **保证文档质量和一致性** - 自动检查和修复格式问题
4. **减少人工错误** - 自动化处理，避免遗漏
5. **支持批量处理** - 一次处理所有文档

现在您只需要运行一个命令，就能自动更新所有文档的目录，无需再手工一行行修改！

---

**工具版本**: v1.0  
**更新日期**: 2025年1月  
**支持系统**: Windows, Linux, macOS  
**Python版本**: 3.6+  
**UV版本**: 0.8+
