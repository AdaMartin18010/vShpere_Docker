# 2025å¹´æ–°å…´ç¡¬ä»¶æŠ€æœ¯æ·±åº¦åˆ†æ

> **æ–‡æ¡£å®šä½**: æœºå¯†è®¡ç®—ã€DPU/SmartNICã€GPUè™šæ‹ŸåŒ–ã€æ–°å‹å­˜å‚¨ä¸ç½‘ç»œæŠ€æœ¯  
> **å¯¹æ ‡æ°´å¹³**: Intel/AMD/NVIDIAæœ€æ–°æŠ€æœ¯ + è¡Œä¸šæ ‡å‡† + æ€§èƒ½åŸºå‡†  
> **æ›´æ–°æ—¥æœŸ**: 2025å¹´10æœˆ20æ—¥

---

## ğŸ“‹ ç›®å½•

- [2025å¹´æ–°å…´ç¡¬ä»¶æŠ€æœ¯æ·±åº¦åˆ†æ](#2025å¹´æ–°å…´ç¡¬ä»¶æŠ€æœ¯æ·±åº¦åˆ†æ)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. æœºå¯†è®¡ç®—ç¡¬ä»¶æŠ€æœ¯](#1-æœºå¯†è®¡ç®—ç¡¬ä»¶æŠ€æœ¯)
    - [1.1 Intel Trust Domain Extensions (TDX)](#11-intel-trust-domain-extensions-tdx)
      - [1.1.1 æŠ€æœ¯æ¶æ„](#111-æŠ€æœ¯æ¶æ„)
      - [1.1.2 TDXå·¥ä½œåŸç†](#112-tdxå·¥ä½œåŸç†)
      - [1.1.3 æ€§èƒ½åŸºå‡†æµ‹è¯•](#113-æ€§èƒ½åŸºå‡†æµ‹è¯•)
    - [1.2 AMD SEV-SNP (Secure Encrypted Virtualization)](#12-amd-sev-snp-secure-encrypted-virtualization)
      - [1.2.1 æŠ€æœ¯æ¼”è¿›](#121-æŠ€æœ¯æ¼”è¿›)
      - [1.2.2 SEV-SNPæ¶æ„](#122-sev-snpæ¶æ„)
    - [1.3 Confidential Containerså®è·µ](#13-confidential-containerså®è·µ)
  - [2. DPUä¸SmartNICæŠ€æœ¯](#2-dpuä¸smartnicæŠ€æœ¯)
    - [2.1 DPUæ¶æ„](#21-dpuæ¶æ„)
      - [2.1.1 DPUæ ¸å¿ƒç»„ä»¶](#211-dpuæ ¸å¿ƒç»„ä»¶)
      - [2.1.2 DPUäº§å“å¯¹æ¯”](#212-dpuäº§å“å¯¹æ¯”)
    - [2.2 DPUåº”ç”¨åœºæ™¯](#22-dpuåº”ç”¨åœºæ™¯)
      - [2.2.1 ç½‘ç»œè™šæ‹ŸåŒ–å¸è½½](#221-ç½‘ç»œè™šæ‹ŸåŒ–å¸è½½)
      - [2.2.2 å­˜å‚¨å¸è½½](#222-å­˜å‚¨å¸è½½)
    - [2.3 SmartNICæŠ€æœ¯](#23-smartnicæŠ€æœ¯)
  - [3. GPUè™šæ‹ŸåŒ–ä¸è®¡ç®—åŠ é€Ÿ](#3-gpuè™šæ‹ŸåŒ–ä¸è®¡ç®—åŠ é€Ÿ)
    - [3.1 GPUè™šæ‹ŸåŒ–æŠ€æœ¯](#31-gpuè™šæ‹ŸåŒ–æŠ€æœ¯)
      - [3.1.1 è™šæ‹ŸåŒ–æ–¹æ¡ˆå¯¹æ¯”](#311-è™šæ‹ŸåŒ–æ–¹æ¡ˆå¯¹æ¯”)
      - [3.1.2 NVIDIA vGPUæ¶æ„](#312-nvidia-vgpuæ¶æ„)
    - [3.2 GPUå®¹å™¨åŒ–](#32-gpuå®¹å™¨åŒ–)
      - [3.2.1 NVIDIA GPU Operator](#321-nvidia-gpu-operator)
    - [3.3 Multi-Instance GPU (MIG)](#33-multi-instance-gpu-mig)
  - [4. æ–°å‹å­˜å‚¨æŠ€æœ¯](#4-æ–°å‹å­˜å‚¨æŠ€æœ¯)
    - [4.1 CXL (Compute Express Link)](#41-cxl-compute-express-link)
      - [4.1.1 CXLæŠ€æœ¯æ¶æ„](#411-cxlæŠ€æœ¯æ¶æ„)
      - [4.1.2 CXLåº”ç”¨åœºæ™¯](#412-cxlåº”ç”¨åœºæ™¯)
    - [4.2 NVMe-oF (NVMe over Fabrics)](#42-nvme-of-nvme-over-fabrics)
      - [4.2.1 ä¼ è¾“åè®®å¯¹æ¯”](#421-ä¼ è¾“åè®®å¯¹æ¯”)
      - [4.2.2 æ€§èƒ½åŸºå‡†](#422-æ€§èƒ½åŸºå‡†)
  - [5. é«˜é€Ÿç½‘ç»œæŠ€æœ¯](#5-é«˜é€Ÿç½‘ç»œæŠ€æœ¯)
    - [5.1 InfiniBand vs Ethernet](#51-infiniband-vs-ethernet)
      - [5.1.1 æŠ€æœ¯å¯¹æ¯”](#511-æŠ€æœ¯å¯¹æ¯”)
    - [5.2 RDMAæŠ€æœ¯](#52-rdmaæŠ€æœ¯)
      - [5.2.1 RDMAå®ç°å¯¹æ¯”](#521-rdmaå®ç°å¯¹æ¯”)
      - [5.2.2 RDMAæ€§èƒ½ä¼˜åŠ¿](#522-rdmaæ€§èƒ½ä¼˜åŠ¿)
  - [6. æŠ€æœ¯å¯¹æ¯”ä¸é€‰å‹](#6-æŠ€æœ¯å¯¹æ¯”ä¸é€‰å‹)
    - [6.1 æœºå¯†è®¡ç®—ç¡¬ä»¶é€‰å‹](#61-æœºå¯†è®¡ç®—ç¡¬ä»¶é€‰å‹)
    - [6.2 DPU/SmartNICé€‰å‹](#62-dpusmartnicé€‰å‹)
    - [6.3 GPUè™šæ‹ŸåŒ–é€‰å‹](#63-gpuè™šæ‹ŸåŒ–é€‰å‹)
  - [7. æ€»ç»“ä¸å»ºè®®](#7-æ€»ç»“ä¸å»ºè®®)
    - [7.1 2025å¹´ç¡¬ä»¶è¶‹åŠ¿](#71-2025å¹´ç¡¬ä»¶è¶‹åŠ¿)
    - [7.2 æŠ•èµ„ä¼˜å…ˆçº§](#72-æŠ•èµ„ä¼˜å…ˆçº§)
  - [å‚è€ƒæ–‡çŒ®](#å‚è€ƒæ–‡çŒ®)

---

## 1. æœºå¯†è®¡ç®—ç¡¬ä»¶æŠ€æœ¯

### 1.1 Intel Trust Domain Extensions (TDX)

#### 1.1.1 æŠ€æœ¯æ¶æ„

**TDXæ ¸å¿ƒæ¦‚å¿µ**:

```mermaid
graph TD
    subgraph Host["ä¸»æœºå±‚"]
        VMM[VMM/Hypervisor]
        TDX_Module[Intel TDX Module]
    end
    
    subgraph TD["Trust Domain (TD)"]
        TD_VM[TDè™šæ‹Ÿæœº]
        TD_Kernel[Guest OS]
        TD_App[åº”ç”¨]
    end
    
    subgraph Hardware["ç¡¬ä»¶å±‚"]
        CPU[Intel CPU<br/>TDXæ”¯æŒ]
        TME[Total Memory<br/>Encryption]
        SEAM[Secure Arbitration<br/>Mode]
    end
    
    TD_App --> TD_Kernel
    TD_Kernel --> TD_VM
    TD_VM --> TDX_Module
    TDX_Module --> SEAM
    VMM -.ä¸å¯ä¿¡.-> TDX_Module
    SEAM --> CPU
    CPU --> TME
    
    style TD fill:#9f9,stroke:#333,stroke-width:3px
    style Hardware fill:#f99,stroke:#333,stroke-width:2px
```

**å…³é”®ç‰¹æ€§å¯¹æ¯”**:

| ç‰¹æ€§ | Intel TDX | AMD SEV-SNP | ARM CCA | è¯´æ˜ |
|------|-----------|-------------|---------|------|
| **å¯ç”¨æ€§** | 2023+ | 2022+ | 2024+ | äº§å“åŒ–æ—¶é—´ |
| **CPUæ”¯æŒ** | 4th Gen Xeon+ | EPYC 7003+ | Neoverse V2+ | å¤„ç†å™¨ä»£æ¬¡ |
| **å†…å­˜åŠ å¯†** | âœ… AES-128 XTS | âœ… AES-128 | âœ… AES-128 | åŠ å¯†ç®—æ³• |
| **å®Œæ•´æ€§ä¿æŠ¤** | âœ… | âœ… | âœ… | é˜²ç¯¡æ”¹ |
| **è¿œç¨‹è¯æ˜** | âœ… | âœ… | âœ… | Remote Attestation |
| **Hypervisorä¿¡ä»»** | âŒ ä¸ä¿¡ä»» | âŒ ä¸ä¿¡ä»» | âŒ ä¸ä¿¡ä»» | é›¶ä¿¡ä»»æ¨¡å‹ |
| **æ€§èƒ½å½±å“** | 2-5% | 3-8% | 3-7% | ç›¸å¯¹åŸç”Ÿ |
| **å¯†é’¥ç®¡ç†** | ç¡¬ä»¶å¯†é’¥ | ç¡¬ä»¶å¯†é’¥ | ç¡¬ä»¶å¯†é’¥ | Key Hierarchy |

#### 1.1.2 TDXå·¥ä½œåŸç†

**å†…å­˜åŠ å¯†æœºåˆ¶**:

\[
\text{Encrypted Memory} = \text{AES-XTS}(\text{Physical Address}, \text{TD Key})
\]

**å¯†é’¥å±‚æ¬¡ç»“æ„**:

```mermaid
graph TD
    RootKey[Root Key<br/>ç¡¬ä»¶ç†”æ–­] --> PlatformKey[Platform Key<br/>å¹³å°ç»‘å®š]
    PlatformKey --> TDKey[TD Key<br/>æ¯ä¸ªTDç‹¬ç«‹]
    TDKey --> PageKey[Page Key<br/>é¡µçº§åŠ å¯†]
    
    style RootKey fill:#f99,stroke:#333,stroke-width:2px
    style TDKey fill:#9f9,stroke:#333,stroke-width:2px
```

#### 1.1.3 æ€§èƒ½åŸºå‡†æµ‹è¯•

**è®¡ç®—æ€§èƒ½**:

| å·¥ä½œè´Ÿè½½ | åŸç”Ÿæ€§èƒ½ | TDXæ€§èƒ½ | æ€§èƒ½æŸå¤± | å¤‡æ³¨ |
|---------|---------|---------|---------|------|
| **CPUå¯†é›†** | 100% | 98-99% | 1-2% | SPEC CPU |
| **å†…å­˜å¯†é›†** | 100% | 95-97% | 3-5% | STREAM |
| **æ··åˆè´Ÿè½½** | 100% | 96-98% | 2-4% | SPEC CPU + Memory |
| **æ•°æ®åº“** | 100% | 94-96% | 4-6% | MySQL TPC-C |
| **WebæœåŠ¡** | 100% | 97-98% | 2-3% | Nginx |

**æ•°å­¦æ¨¡å‹**:

\[
\text{TDX Overhead} = \alpha \times \text{Memory Access Rate} + \beta
\]

å…¶ä¸­ï¼š

- \( \alpha \approx 0.03 \) (å†…å­˜åŠ å¯†å¼€é”€ç³»æ•°)
- \( \beta \approx 0.01 \) (å›ºå®šå¼€é”€)

### 1.2 AMD SEV-SNP (Secure Encrypted Virtualization)

#### 1.2.1 æŠ€æœ¯æ¼”è¿›

**SEVå®¶æ—å¯¹æ¯”**:

| ç‰¹æ€§ | SEV | SEV-ES | SEV-SNP | è¯´æ˜ |
|------|-----|--------|---------|------|
| **å†…å­˜åŠ å¯†** | âœ… | âœ… | âœ… | Memory Encryption |
| **å¯„å­˜å™¨åŠ å¯†** | âŒ | âœ… | âœ… | Register State |
| **å®Œæ•´æ€§ä¿æŠ¤** | âŒ | âŒ | âœ… | Integrity Check |
| **RMPä¿æŠ¤** | âŒ | âŒ | âœ… | Reverse Map Table |
| **è¿œç¨‹è¯æ˜** | âš ï¸ åŸºç¡€ | âš ï¸ åŸºç¡€ | âœ… å®Œæ•´ | Attestation |
| **æ€§èƒ½å½±å“** | 2-3% | 3-5% | 3-8% | ç›¸å¯¹åŸç”Ÿ |

#### 1.2.2 SEV-SNPæ¶æ„

**Reverse Map Table (RMP)**:

| RMPå­—æ®µ | å¤§å° | è¯´æ˜ |
|---------|------|------|
| **Owner** | 2 bytes | VM ID |
| **ASID** | 2 bytes | Address Space ID |
| **Validated** | 1 bit | é¡µå·²éªŒè¯ |
| **Immutable** | 1 bit | ä¸å¯ä¿®æ”¹ |
| **Page Size** | 2 bits | 4KB/2MB/1GB |

**å®Œæ•´æ€§ä¿æŠ¤**:

\[
\text{Page Integrity} = \text{VMPL}_{\text{level}} + \text{RMP}_{\text{check}}
\]

### 1.3 Confidential Containerså®è·µ

**Kata Containers + TDXé›†æˆ**:

```yaml
# kata-configuration.toml
[hypervisor.qemu]
path = "/usr/bin/qemu-system-x86_64"
kernel = "/usr/share/kata-containers/vmlinuz-confidential.container"
image = "/usr/share/kata-containers/kata-containers-confidential.img"

# TDXé…ç½®
machine_type = "q35"
confidential_guest = true
tdx_config = {
  sept_ve_disable = true
  memory_encryption = "tdx"
}

# æ€§èƒ½ä¼˜åŒ–
default_vcpus = 2
default_memory = 4096
enable_iommu = true
```

**æ€§èƒ½å¯¹æ¯”**:

| æŒ‡æ ‡ | runc | Kata (VM) | Kata+TDX | è¯´æ˜ |
|------|------|-----------|----------|------|
| **å¯åŠ¨æ—¶é—´** | 100ms | 1-2s | 2-3s | å†·å¯åŠ¨ |
| **å†…å­˜å ç”¨** | 10MB | 150MB | 180MB | åŸºç¡€å¼€é”€ |
| **CPUæ€§èƒ½** | 100% | 98% | 95% | ç›¸å¯¹runc |
| **ç½‘ç»œåå** | 100% | 95% | 92% | 10Gbpsæµ‹è¯• |
| **å®‰å…¨çº§åˆ«** | â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | éš”ç¦»å¼ºåº¦ |

---

## 2. DPUä¸SmartNICæŠ€æœ¯

### 2.1 DPUæ¶æ„

#### 2.1.1 DPUæ ¸å¿ƒç»„ä»¶

```mermaid
graph TD
    subgraph DPU["Data Processing Unit"]
        ARM_Core[ARM Cortex-A72<br/>8-16æ ¸]
        NPU[Network Processing<br/>Unit]
        Crypto[åŠ å¯†å¼•æ“<br/>AES/TLS]
        Storage[å­˜å‚¨åŠ é€Ÿ<br/>NVMe-oF]
        Switch[å†…ç½®äº¤æ¢æœº<br/>100/200Gbps]
    end
    
    subgraph Host["ä¸»æœºCPU"]
        CPU[x86 CPU]
        Memory[DDR4/5]
    end
    
    subgraph Network["ç½‘ç»œ"]
        Net[æ•°æ®ä¸­å¿ƒç½‘ç»œ]
    end
    
    ARM_Core --> NPU
    ARM_Core --> Crypto
    ARM_Core --> Storage
    NPU --> Switch
    Switch --> Net
    Host --> DPU
    
    style DPU fill:#9cf,stroke:#333,stroke-width:3px
    style Host fill:#9f9,stroke:#333,stroke-width:2px
```

#### 2.1.2 DPUäº§å“å¯¹æ¯”

| å‚å•† | äº§å“ | CPUæ ¸å¿ƒ | ç½‘ç»œé€Ÿç‡ | åŠ å¯†æ€§èƒ½ | ä»·æ ¼åŒºé—´ | ç”Ÿæ€ |
|------|------|---------|---------|---------|---------|------|
| **NVIDIA** | BlueField-3 | 16 ARM A78 | 400Gbps | 400Gbps | $3000-5000 | â­â­â­â­â­ |
| **Intel** | IPU E2100 | 16 P4080 | 200Gbps | 200Gbps | $2000-4000 | â­â­â­â­ |
| **AMD** | Pensando DSC | 16 ARM A72 | 200Gbps | 200Gbps | $2500-4500 | â­â­â­â­ |
| **Marvell** | OCTEON 10 | 36 ARM N2 | 400Gbps | 400Gbps | $4000-6000 | â­â­â­ |
| **Fungible** | F1 DPU | 64 MIPS64 | 800Gbps | 400Gbps | $5000-8000 | â­â­â­ |

### 2.2 DPUåº”ç”¨åœºæ™¯

#### 2.2.1 ç½‘ç»œè™šæ‹ŸåŒ–å¸è½½

**OVSå¸è½½åˆ°DPU**:

```mermaid
graph LR
    subgraph Before["ä¼ ç»Ÿæ¶æ„"]
        B_VM1[VM1] --> B_OVS[OVS<br/>è½¯ä»¶]
        B_VM2[VM2] --> B_OVS
        B_OVS --> B_NIC[NIC]
        B_CPU[CPU<br/>20-30%å ç”¨]
    end
    
    subgraph After["DPUå¸è½½"]
        A_VM1[VM1] --> A_DPU[DPU<br/>OVSç¡¬ä»¶åŠ é€Ÿ]
        A_VM2[VM2] --> A_DPU
        A_DPU --> A_Net[ç½‘ç»œ]
        A_CPU[CPU<br/><5%å ç”¨]
    end
    
    style After fill:#9f9,stroke:#333,stroke-width:2px
```

**æ€§èƒ½å¯¹æ¯”**:

| æŒ‡æ ‡ | è½¯ä»¶OVS | OVS-DPDK | DPUå¸è½½ | æå‡ |
|------|---------|----------|---------|------|
| **ååé‡** | 10 Gbps | 40 Gbps | 100 Gbps | **10x** |
| **å»¶è¿Ÿ** | 100 Î¼s | 20 Î¼s | 5 Î¼s | **20x** |
| **CPUå ç”¨** | 30% | 100% | 2% | **-93%** |
| **æ¯ç§’è¿æ¥** | 10K | 100K | 1M | **100x** |

#### 2.2.2 å­˜å‚¨å¸è½½

**NVMe-oFå¸è½½**:

| æ“ä½œ | CPUå¤„ç† | DPUå¤„ç† | CPUèŠ‚çœ |
|------|---------|---------|---------|
| **RDMAä¼ è¾“** | æ˜¯ | å¦ | 100% |
| **NVMeå‘½ä»¤å¤„ç†** | æ˜¯ | å¦ | 100% |
| **åŠ å¯†/è§£å¯†** | æ˜¯ | å¦ | 100% |
| **å‹ç¼©/è§£å‹** | æ˜¯ | å¦ | 100% |
| **çº åˆ ç ** | æ˜¯ | å¦ | 100% |

### 2.3 SmartNICæŠ€æœ¯

**SmartNIC vs DPUå¯¹æ¯”**:

| ç»´åº¦ | ä¼ ç»ŸNIC | SmartNIC | DPU | è¯´æ˜ |
|------|---------|----------|-----|------|
| **å¯ç¼–ç¨‹** | âŒ | âœ… FPGA/ASIC | âœ… ARM+NPU | çµæ´»æ€§ |
| **ç½‘ç»œå¤„ç†** | åŸºç¡€ | âœ… é«˜çº§ | âœ… å®Œæ•´ | åŠŸèƒ½ |
| **å­˜å‚¨åŠ é€Ÿ** | âŒ | âš ï¸ éƒ¨åˆ† | âœ… å®Œæ•´ | NVMe-oF |
| **å®‰å…¨åŠ å¯†** | âŒ | âš ï¸ éƒ¨åˆ† | âœ… å®Œæ•´ | TLS/IPsec |
| **ç‹¬ç«‹OS** | âŒ | âš ï¸ éƒ¨åˆ† | âœ… Linux | ç®¡ç† |
| **ä»·æ ¼** | $100-500 | $1000-2000 | $2000-5000 | æˆæœ¬ |

---

## 3. GPUè™šæ‹ŸåŒ–ä¸è®¡ç®—åŠ é€Ÿ

### 3.1 GPUè™šæ‹ŸåŒ–æŠ€æœ¯

#### 3.1.1 è™šæ‹ŸåŒ–æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | NVIDIA vGPU | AMD MxGPU | Intel GVT-g | è¯´æ˜ |
|------|-------------|-----------|-------------|------|
| **æŠ€æœ¯** | æ—¶åˆ†å¤ç”¨ | SR-IOV | åˆ†åŒºåˆ‡ç‰‡ | å®ç°æ–¹å¼ |
| **æœ€å¤§VM** | 32 | 16 | 7 | å¹¶å‘æ•° |
| **æ€§èƒ½** | 85-95% | 90-95% | 80-90% | ç›¸å¯¹è£¸é‡‘å± |
| **å†…å­˜éš”ç¦»** | âœ… | âœ… | âœ… | å®‰å…¨æ€§ |
| **å®æ—¶è¿ç§»** | âœ… | âŒ | âš ï¸ | Live Migration |
| **è®¸å¯è¯** | å•†ä¸š | å•†ä¸š | å¼€æº | æˆæœ¬ |
| **ç”Ÿæ€** | â­â­â­â­â­ | â­â­â­ | â­â­â­ | æ”¯æŒåº¦ |

#### 3.1.2 NVIDIA vGPUæ¶æ„

**vGPU Profile**:

| Profile | æ˜¾å­˜ | CUDAæ ¸å¿ƒ | æœ€å¤§åˆ†è¾¨ç‡ | é€‚ç”¨åœºæ™¯ |
|---------|------|----------|-----------|---------|
| **A100-1Q** | 1GB | ~400 | 1024Ã—768 | è½»é‡çº§VDI |
| **A100-4Q** | 4GB | ~1600 | 2560Ã—1600 | æ ‡å‡†VDI |
| **A100-8Q** | 8GB | ~3200 | 3840Ã—2160 | é«˜æ€§èƒ½VDI |
| **A100-40C** | 40GB | ~13K | N/A | AIè®­ç»ƒ |
| **A100-80C** | 80GB | ~13K | N/A | å¤§æ¨¡å‹è®­ç»ƒ |

### 3.2 GPUå®¹å™¨åŒ–

#### 3.2.1 NVIDIA GPU Operator

**æ¶æ„å›¾**:

```mermaid
graph TD
    subgraph K8s["Kubernetes"]
        Pod[GPU Pod]
        Operator[GPU Operator]
    end
    
    subgraph Node["Worker Node"]
        Driver[NVIDIA Driver]
        Runtime[Container<br/>Runtime]
        Toolkit[NVIDIA Container<br/>Toolkit]
        Plugin[Device Plugin]
    end
    
    Pod --> Plugin
    Operator --> Driver
    Operator --> Toolkit
    Operator --> Plugin
    Runtime --> Driver
    
    style K8s fill:#9f9,stroke:#333,stroke-width:2px
    style Node fill:#9cf,stroke:#333,stroke-width:2px
```

**Kubernetes GPUè°ƒåº¦**:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: gpu-pod
spec:
  containers:
  - name: cuda-app
    image: nvidia/cuda:12.3.0-runtime-ubuntu22.04
    resources:
      limits:
        nvidia.com/gpu: 1  # è¯·æ±‚1ä¸ªGPU
        # æˆ–è€…æŒ‡å®šGPUå‹å·
        # nvidia.com/mig-1g.10gb: 1  # MIGå®ä¾‹
    
    # GPUç‰¹æ€§é…ç½®
    env:
    - name: NVIDIA_VISIBLE_DEVICES
      value: "0"  # GPUè®¾å¤‡ID
    - name: NVIDIA_DRIVER_CAPABILITIES
      value: "compute,utility"  # èƒ½åŠ›
    - name: NVIDIA_REQUIRE_CUDA
      value: "cuda>=12.0"  # CUDAç‰ˆæœ¬
```

### 3.3 Multi-Instance GPU (MIG)

**MIGåˆ†åŒºç­–ç•¥**:

| GPU | MIGå®ä¾‹ç±»å‹ | GPU Slice | æ˜¾å­˜ | æ•°é‡ | é€‚ç”¨åœºæ™¯ |
|-----|-----------|-----------|------|------|---------|
| **A100-80GB** | 1g.10gb | 1/7 | 10GB | 7 | æ¨ç† |
| | 2g.20gb | 2/7 | 20GB | 3 | å°æ¨¡å‹è®­ç»ƒ |
| | 3g.40gb | 3/7 | 40GB | 2 | ä¸­æ¨¡å‹è®­ç»ƒ |
| | 7g.80gb | 7/7 | 80GB | 1 | å¤§æ¨¡å‹è®­ç»ƒ |
| **H100-80GB** | 1g.10gb | 1/7 | 10GB | 7 | é«˜æ€§èƒ½æ¨ç† |
| | 3g.40gb | 3/7 | 40GB | 2 | AIè®­ç»ƒ |

**MIGæ€§èƒ½éš”ç¦»**:

\[
\text{MIG Isolation} = \text{Compute} + \text{Memory BW} + \text{L2 Cache}
\]

---

## 4. æ–°å‹å­˜å‚¨æŠ€æœ¯

### 4.1 CXL (Compute Express Link)

#### 4.1.1 CXLæŠ€æœ¯æ¶æ„

**CXLåè®®æ ˆ**:

```mermaid
graph TD
    subgraph App["åº”ç”¨å±‚"]
        A[åº”ç”¨ç¨‹åº]
    end
    
    subgraph CXL["CXLåè®®"]
        IO[CXL.io<br/>è®¾å¤‡I/O]
        Cache[CXL.cache<br/>ç¼“å­˜ä¸€è‡´æ€§]
        Mem[CXL.mem<br/>å†…å­˜è®¿é—®]
    end
    
    subgraph PHY["ç‰©ç†å±‚"]
        PCIe[PCIe 5.0/6.0<br/>ç‰©ç†æ¥å£]
    end
    
    A --> IO
    A --> Cache
    A --> Mem
    IO --> PCIe
    Cache --> PCIe
    Mem --> PCIe
    
    style CXL fill:#9cf,stroke:#333,stroke-width:3px
```

**CXLç‰ˆæœ¬å¯¹æ¯”**:

| ç‰¹æ€§ | CXL 1.1 | CXL 2.0 | CXL 3.0 | è¯´æ˜ |
|------|---------|---------|---------|------|
| **å‘å¸ƒæ—¶é—´** | 2020 | 2021 | 2023 | ç‰ˆæœ¬ |
| **å¸¦å®½** | 32 GT/s | 64 GT/s | 128 GT/s | PCIe Gen5/6 |
| **å†…å­˜æ± åŒ–** | âŒ | âœ… | âœ… | Pooling |
| **äº¤æ¢** | âŒ | âš ï¸ åŸºç¡€ | âœ… å®Œæ•´ | Switching |
| **ä¸€è‡´æ€§** | è®¾å¤‡çº§ | è®¾å¤‡çº§ | å…¨å±€ | Coherency |
| **æœ€å¤§å®¹é‡** | 512GB | 4TB | æ— é™ | Per Device |

#### 4.1.2 CXLåº”ç”¨åœºæ™¯

**å†…å­˜æ‰©å±•**:

| åœºæ™¯ | ä¼ ç»Ÿæ–¹æ¡ˆ | CXLæ–¹æ¡ˆ | ä¼˜åŠ¿ |
|------|---------|---------|------|
| **å¤§å†…å­˜éœ€æ±‚** | æ˜‚è´µçš„DDR5 | CXLå†…å­˜ | æˆæœ¬-50% |
| **å†…å­˜æ± åŒ–** | ä¸æ”¯æŒ | CXLæ± åŒ– | åˆ©ç”¨ç‡+30% |
| **çƒ­æ’æ‹”** | ä¸æ”¯æŒ | CXLçƒ­æ’æ‹” | çµæ´»æ‰©å±• |
| **è·¨èŠ‚ç‚¹å…±äº«** | RDMAå¤æ‚ | CXLç›´æ¥è®¿é—® | å»¶è¿Ÿ-60% |

### 4.2 NVMe-oF (NVMe over Fabrics)

#### 4.2.1 ä¼ è¾“åè®®å¯¹æ¯”

| åè®® | å»¶è¿Ÿ | å¸¦å®½ | CPUå ç”¨ | é€‚ç”¨åœºæ™¯ | æˆç†Ÿåº¦ |
|------|------|------|---------|---------|--------|
| **NVMe-oF/TCP** | 50-100Î¼s | 10-100Gbps | ä¸­ | é€šç”¨ | â­â­â­â­â­ |
| **NVMe-oF/RDMA** | 10-20Î¼s | 100-200Gbps | ä½ | é«˜æ€§èƒ½ | â­â­â­â­â­ |
| **NVMe-oF/FC** | 100-200Î¼s | 32-128Gbps | ä½ | ä¼ ç»ŸSAN | â­â­â­â­ |

#### 4.2.2 æ€§èƒ½åŸºå‡†

**IOPSå¯¹æ¯”**:

| é…ç½® | æœ¬åœ°NVMe | NVMe-oF TCP | NVMe-oF RDMA | è¯´æ˜ |
|------|----------|-------------|--------------|------|
| **éšæœºè¯» 4K** | 1M IOPS | 800K IOPS | 950K IOPS | -20%/-5% |
| **éšæœºå†™ 4K** | 500K IOPS | 400K IOPS | 480K IOPS | -20%/-4% |
| **é¡ºåºè¯» 128K** | 7 GB/s | 6 GB/s | 6.8 GB/s | -14%/-3% |
| **å»¶è¿Ÿ (P99)** | 100Î¼s | 200Î¼s | 120Î¼s | +100%/+20% |

---

## 5. é«˜é€Ÿç½‘ç»œæŠ€æœ¯

### 5.1 InfiniBand vs Ethernet

#### 5.1.1 æŠ€æœ¯å¯¹æ¯”

| ç»´åº¦ | InfiniBand | RDMA over<br/>Converged<br/>Ethernet | Ethernet | è¯´æ˜ |
|------|------------|--------------------------------------|----------|------|
| **å¸¦å®½** | 400 Gbps | 400 Gbps | 400 Gbps | æœ€é«˜é€Ÿç‡ |
| **å»¶è¿Ÿ** | 0.5 Î¼s | 1-2 Î¼s | 10-50 Î¼s | å¾€è¿”å»¶è¿Ÿ |
| **CPUå ç”¨** | <1% | <2% | 10-30% | è½¯ä»¶æ ˆ |
| **Lossless** | âœ… åŸç”Ÿ | âœ… PFC | âŒ | æ— æŸ |
| **ç”Ÿæ€** | HPC | æ•°æ®ä¸­å¿ƒ | é€šç”¨ | åº”ç”¨ |
| **æˆæœ¬** | é«˜ | ä¸­ | ä½ | ç›¸å¯¹ |

### 5.2 RDMAæŠ€æœ¯

#### 5.2.1 RDMAå®ç°å¯¹æ¯”

| å®ç° | ç¡¬ä»¶è¦æ±‚ | æ€§èƒ½ | æˆæœ¬ | å…¼å®¹æ€§ | æ¨èåº¦ |
|------|---------|------|------|--------|--------|
| **IB Native** | IB HCA | â­â­â­â­â­ | é«˜ | IB only | â­â­â­â­ |
| **RoCE v2** | RDMA NIC | â­â­â­â­â­ | ä¸­ | IPç½‘ç»œ | â­â­â­â­â­ |
| **iWARP** | RDMA NIC | â­â­â­â­ | ä¸­ | IPç½‘ç»œ | â­â­â­â­ |
| **Soft-RoCE** | æ ‡å‡†NIC | â­â­ | ä½ | ä»»ä½• | â­â­â­ |

#### 5.2.2 RDMAæ€§èƒ½ä¼˜åŠ¿

**å»¶è¿Ÿå¯¹æ¯”**:

| æ“ä½œ | TCP/IP | RDMA | æå‡ |
|------|--------|------|------|
| **æ¶ˆæ¯ä¼ é€’ (8B)** | 50 Î¼s | 1.2 Î¼s | **42x** |
| **æ¶ˆæ¯ä¼ é€’ (64KB)** | 200 Î¼s | 12 Î¼s | **17x** |
| **å¸¦å®½ (å•è¿æ¥)** | 40 Gbps | 100 Gbps | **2.5x** |
| **CPUå ç”¨ç‡** | 30% | <1% | **-97%** |

---

## 6. æŠ€æœ¯å¯¹æ¯”ä¸é€‰å‹

### 6.1 æœºå¯†è®¡ç®—ç¡¬ä»¶é€‰å‹

**å†³ç­–çŸ©é˜µ**:

| åœºæ™¯ | æ¨èæ–¹æ¡ˆ | åŸå›  | æ€§èƒ½å½±å“ |
|------|---------|------|---------|
| **é‡‘è/åŒ»ç–—** | Intel TDX | æˆç†Ÿåº¦é«˜ | 2-5% |
| **å¤šç§Ÿæˆ·äº‘** | AMD SEV-SNP | æ€§èƒ½å‡è¡¡ | 3-8% |
| **è¾¹ç¼˜è®¡ç®—** | ARM CCA | åŠŸè€—ä¼˜åŠ¿ | 3-7% |
| **é«˜æ€§èƒ½è®¡ç®—** | ä¼ ç»Ÿæ–¹æ¡ˆ | é¿å…å¼€é”€ | 0% |

### 6.2 DPU/SmartNICé€‰å‹

**ROIåˆ†æ**:

\[
\text{ROI} = \frac{\text{CPUèŠ‚çœæˆæœ¬} + \text{æ€§èƒ½æå‡æ”¶ç›Š}}{\text{DPUç¡¬ä»¶æˆæœ¬}} \times 100\%
\]

**å…¸å‹æ¡ˆä¾‹**:

| æŒ‡æ ‡ | å€¼ | è¯´æ˜ |
|------|-----|------|
| **æœåŠ¡å™¨æ•°é‡** | 100å° | é›†ç¾¤è§„æ¨¡ |
| **CPUèŠ‚çœ** | 20-30% | ç½‘ç»œå¸è½½ |
| **å¹´åº¦èŠ‚çœ** | $50K | ç”µåŠ›+è®¸å¯è¯ |
| **DPUæŠ•èµ„** | $300K | 100Ã—$3K |
| **ROI** | **16.7%** | é¦–å¹´ |
| **å›æœ¬å‘¨æœŸ** | **1.8å¹´** | Break-even |

### 6.3 GPUè™šæ‹ŸåŒ–é€‰å‹

**å·¥ä½œè´Ÿè½½åŒ¹é…**:

| å·¥ä½œè´Ÿè½½ | æ¨èæ–¹æ¡ˆ | GPUå‹å· | å¹¶å‘æ•° | è¯´æ˜ |
|---------|---------|---------|--------|------|
| **VDIåŠå…¬** | vGPU 4Q | T4 | 16 | çŸ¥è¯†å·¥ä½œè€… |
| **CADè®¾è®¡** | vGPU 16Q | RTX A6000 | 4 | ä¸“ä¸šå›¾å½¢ |
| **AIæ¨ç†** | MIG 1g.10gb | A100 | 7 | é«˜åå |
| **AIè®­ç»ƒ** | è£¸é‡‘å± | H100 | 1 | æœ€é«˜æ€§èƒ½ |

---

## 7. æ€»ç»“ä¸å»ºè®®

### 7.1 2025å¹´ç¡¬ä»¶è¶‹åŠ¿

1. **æœºå¯†è®¡ç®—æ™®åŠ**: TDX/SEV-SNPæˆä¸ºæ•°æ®ä¸­å¿ƒæ ‡é…
2. **DPUå´›èµ·**: ç½‘ç»œ/å­˜å‚¨å¸è½½æˆä¸ºä¸»æµ
3. **GPUè™šæ‹ŸåŒ–æˆç†Ÿ**: MIGæŠ€æœ¯å¹¿æ³›åº”ç”¨
4. **CXLå†…å­˜æ‰©å±•**: æ‰“ç ´å†…å­˜å®¹é‡ç“¶é¢ˆ
5. **400Gç½‘ç»œ**: RDMAæˆä¸ºæ ‡å‡†é…ç½®

### 7.2 æŠ•èµ„ä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | æŠ€æœ¯ | æ—¶é—´çª—å£ | ROI | é£é™© |
|--------|------|---------|-----|------|
| **P0** | RDMAç½‘ç»œ | ç«‹å³ | é«˜ | ä½ |
| **P1** | GPUè™šæ‹ŸåŒ– | 6ä¸ªæœˆ | ä¸­ | ä½ |
| **P2** | DPU | 12ä¸ªæœˆ | é«˜ | ä¸­ |
| **P3** | æœºå¯†è®¡ç®— | 18ä¸ªæœˆ | ä¸­ | ä¸­ |
| **P4** | CXL | 24ä¸ªæœˆ | é«˜ | é«˜ |

---

## å‚è€ƒæ–‡çŒ®

1. **Intel** (2025). "Intel Trust Domain Extensions (TDX) Architecture Specification".
2. **AMD** (2025). "AMD SEV-SNP Technology White Paper".
3. **NVIDIA** (2025). "BlueField-3 DPU Architecture and Performance Guide".
4. **CXL Consortium** (2025). "Compute Express Link 3.0 Specification".
5. **NVMe** (2025). "NVMe over Fabrics 1.1 Specification".
6. **NVIDIA** (2025). "Multi-Instance GPU User Guide".
7. **RDMA Consortium** (2025). "RoCE v2 Performance Optimization Guide".
8. **Gartner** (2024). "Emerging Hardware Technologies Market Guide".

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025å¹´10æœˆ20æ—¥  
**ä½œè€…**: Hardware Architecture Research Team  
**License**: CC-BY-4.0

---

**ğŸš€ æœ¬æ–‡æ¡£æä¾›äº†2025å¹´æ–°å…´ç¡¬ä»¶æŠ€æœ¯çš„å®Œæ•´åˆ†æä¸é€‰å‹æŒ‡å—ï¼**
