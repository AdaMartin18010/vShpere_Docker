# APIæµ‹è¯•æ–‡ä»¶å¤¹åˆ›å»ºå®ŒæˆæŠ¥å‘Š

> **æŠ¥å‘Šç±»å‹**: é¡¹ç›®è¿›å±•æŠ¥å‘Š
> **å®Œæˆæ—¥æœŸ**: 2025å¹´10æœˆ22æ—¥
> **è´Ÿè´£å›¢é˜Ÿ**: æŠ€æœ¯å›¢é˜Ÿ
> **æŠ¥å‘Šç‰ˆæœ¬**: v1.0

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

æˆåŠŸåˆ›å»ºäº†å®Œæ•´è§„èŒƒçš„APIæµ‹è¯•æ–‡ä»¶å¤¹ `tools/api_testing/`ï¼ŒåŒ…å«è™šæ‹ŸåŒ–ä¸å®¹å™¨åŒ–APIæµ‹è¯•çš„å®Œæ•´å·¥å…·é›†ï¼Œä¸ºåç»­APIæµ‹è¯•åŠŸèƒ½æ¨è¿›å¥ å®šäº†åšå®åŸºç¡€ã€‚

**æ ¸å¿ƒæˆæœ**:

- âœ… åˆ›å»ºäº†å®Œæ•´çš„ç›®å½•ç»“æ„(8ä¸ªå­ç›®å½•)
- âœ… è¿ç§»å¹¶ç»„ç»‡äº†ç°æœ‰æµ‹è¯•è„šæœ¬(2ä¸ª)
- âœ… å¼€å‘äº†å·¥å…·å‡½æ•°åº“(3ä¸ªæ¨¡å—)
- âœ… é…ç½®äº†å¤šç¯å¢ƒç®¡ç†ç³»ç»Ÿ
- âœ… ç¼–å†™äº†å®Œæ•´æ–‡æ¡£(4ä¸ª)

---

## ğŸ¯ å®Œæˆç›®æ ‡

### ä¸»è¦ç›®æ ‡

1. âœ… **åˆ›å»ºè§„èŒƒçš„APIæµ‹è¯•æ–‡ä»¶å¤¹ç»“æ„**
   - ä½ç½®: `tools/api_testing/`
   - åŒ…å«8ä¸ªåŠŸèƒ½å­ç›®å½•
   - éµå¾ªæœ€ä½³å®è·µå’Œè¡Œä¸šæ ‡å‡†

2. âœ… **è¿ç§»å¹¶ç»„ç»‡ç°æœ‰èµ„æº**
   - ç§»åŠ¨æ¢³ç†æ–‡æ¡£åˆ°ä¸“ç”¨æ–‡ä»¶å¤¹
   - é‡ç»„æµ‹è¯•è„šæœ¬åˆ°scriptsç›®å½•
   - å»ºç«‹æ¸…æ™°çš„æ–‡ä»¶å‘½åè§„èŒƒ

3. âœ… **å¼€å‘æ”¯æ’‘å·¥å…·åº“**
   - è®¤è¯å·¥å…·(auth.py)
   - æ—¥å¿—å·¥å…·(logger.py)
   - æŠ¥å‘Šç”Ÿæˆ(report.py)

4. âœ… **é…ç½®ç®¡ç†ä¸æ–‡æ¡£**
   - å¤šç¯å¢ƒé…ç½®æ–‡ä»¶
   - ä¾èµ–ç®¡ç†(requirements.txt)
   - å®Œæ•´ä½¿ç”¨æ–‡æ¡£

---

## ğŸ“ åˆ›å»ºçš„ç›®å½•ç»“æ„

```
tools/api_testing/
â”œâ”€â”€ ğŸ“„ 00_APIæµ‹è¯•å®Œæ•´æ¢³ç†æ–‡æ¡£.md      # ä¸»æ–‡æ¡£ - æŠ€æœ¯å®Œæ•´æ¢³ç†
â”œâ”€â”€ ğŸ“„ README.md                       # å·¥å…·é›†ä½¿ç”¨è¯´æ˜
â”œâ”€â”€ ğŸ“„ INDEX.md                        # ç›®å½•ç´¢å¼•å¯¼èˆª
â”œâ”€â”€ ğŸ“„ requirements.txt                # Pythonä¾èµ–æ¸…å•
â”‚
â”œâ”€â”€ ğŸ“ config/                         # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ test_environments.yaml        # å¤šç¯å¢ƒé…ç½®(4ä¸ªç¯å¢ƒ)
â”‚
â”œâ”€â”€ ğŸ“ scripts/                        # æµ‹è¯•è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ __init__.py                   # PythonåŒ…æ ‡è¯†
â”‚   â”œâ”€â”€ docker_api_test.py            # Docker APIæµ‹è¯•(479è¡Œ)
â”‚   â”œâ”€â”€ kubernetes_api_test.py        # Kubernetes APIæµ‹è¯•(528è¡Œ)
â”‚   â””â”€â”€ run_all_tests.py              # ä¸»æµ‹è¯•è¿è¡Œè„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“ utils/                          # å·¥å…·å‡½æ•°åº“
â”‚   â”œâ”€â”€ __init__.py                   # åŒ…åˆå§‹åŒ–
â”‚   â”œâ”€â”€ auth.py                       # è®¤è¯å·¥å…·(353è¡Œ)
â”‚   â”œâ”€â”€ logger.py                     # æ—¥å¿—å·¥å…·(200è¡Œ)
â”‚   â””â”€â”€ report.py                     # æŠ¥å‘Šç”Ÿæˆ(517è¡Œ)
â”‚
â”œâ”€â”€ ğŸ“ postman/                        # Postman Collections
â”‚   â””â”€â”€ README.md                     # ä½¿ç”¨è¯´æ˜
â”‚
â”œâ”€â”€ ğŸ“ openapi/                        # OpenAPIè§„èŒƒæ–‡æ¡£
â”‚   â””â”€â”€ README.md                     # ä½¿ç”¨è¯´æ˜
â”‚
â”œâ”€â”€ ğŸ“ reports/                        # æµ‹è¯•æŠ¥å‘Šè¾“å‡º
â”‚   â””â”€â”€ .gitkeep                      # ç›®å½•å ä½ç¬¦
â”‚
â””â”€â”€ ğŸ“ ci/                            # CI/CDé›†æˆé…ç½®
    â””â”€â”€ README.md                     # ä½¿ç”¨è¯´æ˜
```

**ç»Ÿè®¡æ•°æ®**:

- ç›®å½•æ€»æ•°: 8ä¸ª
- æ–‡ä»¶æ€»æ•°: 19ä¸ª
- Pythonä»£ç : 1,547è¡Œ
- Markdownæ–‡æ¡£: ~2,500è¡Œ
- YAMLé…ç½®: 308è¡Œ

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. æµ‹è¯•è„šæœ¬ (scripts/)

#### Docker APIæµ‹è¯• (docker_api_test.py)

```yaml
åŠŸèƒ½ç‰¹æ€§:
  - å®Œæ•´çš„Docker Engine APIæµ‹è¯•å¥—ä»¶
  - 14ä¸ªæµ‹è¯•ç”¨ä¾‹
  - æ”¯æŒUnix Socketå’ŒTCPè¿æ¥
  - å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†æµ‹è¯•

æµ‹è¯•è¦†ç›–:
  - å®ˆæŠ¤è¿›ç¨‹è¿é€šæ€§
  - ç‰ˆæœ¬ä¿¡æ¯è·å–
  - ç³»ç»Ÿä¿¡æ¯æŸ¥è¯¢
  - å®¹å™¨åˆ—è¡¨/è¯¦æƒ…/ç»Ÿè®¡
  - é•œåƒç®¡ç†
  - å·å’Œç½‘ç»œç®¡ç†
  - å®¹å™¨åˆ›å»º/å¯åŠ¨/åœæ­¢/åˆ é™¤

ä»£ç é‡: 479è¡Œ
çŠ¶æ€: âœ… å®Œæˆ
```

#### Kubernetes APIæµ‹è¯• (kubernetes_api_test.py)

```yaml
åŠŸèƒ½ç‰¹æ€§:
  - Kubernetes REST APIå®Œæ•´æµ‹è¯•
  - 13ä¸ªæµ‹è¯•ç”¨ä¾‹
  - æ”¯æŒå¤šç§è®¤è¯æ–¹å¼
  - èµ„æºå…¨ç”Ÿå‘½å‘¨æœŸè¦†ç›–

æµ‹è¯•è¦†ç›–:
  - APIç‰ˆæœ¬å’Œç»„æŸ¥è¯¢
  - èŠ‚ç‚¹ä¿¡æ¯è·å–
  - å‘½åç©ºé—´ç®¡ç†
  - Podè¯¦æƒ…å’ŒçŠ¶æ€
  - Deploymentç®¡ç†
  - ServiceæŸ¥è¯¢
  - ConfigMapå’ŒSecret
  - å­˜å‚¨(PV/PVC)
  - é›†ç¾¤å¥åº·æ£€æŸ¥

ä»£ç é‡: 528è¡Œ
çŠ¶æ€: âœ… å®Œæˆ
```

#### ä¸»æµ‹è¯•è¿è¡Œå™¨ (run_all_tests.py)

```yaml
åŠŸèƒ½ç‰¹æ€§:
  - ç»Ÿä¸€çš„æµ‹è¯•æ‰§è¡Œå…¥å£
  - æ”¯æŒé€‰æ‹©æ€§æµ‹è¯•è¿è¡Œ
  - å¤šæ ¼å¼æŠ¥å‘Šç”Ÿæˆ(HTML/JSON/Markdown)
  - å½©è‰²æ—¥å¿—è¾“å‡º
  - æµ‹è¯•ç»“æœæ±‡æ€»

ä½¿ç”¨ç¤ºä¾‹:
  # è¿è¡Œæ‰€æœ‰æµ‹è¯•
  python run_all_tests.py

  # è¿è¡Œç‰¹å®šæµ‹è¯•
  python run_all_tests.py --tests docker kubernetes

  # ç”Ÿæˆå¤šæ ¼å¼æŠ¥å‘Š
  python run_all_tests.py --report-format html json markdown

çŠ¶æ€: âœ… å®Œæˆ
```

### 2. å·¥å…·å‡½æ•°åº“ (utils/)

#### è®¤è¯å·¥å…· (auth.py - 353è¡Œ)

```python
æ”¯æŒçš„è®¤è¯æ–¹å¼:
  âœ… vSphereä¼šè¯è®¤è¯
  âœ… Kubernetes Tokenè·å–(kubeconfig/ServiceAccount)
  âœ… Dockerè®¤è¯é…ç½®
  âœ… etcdå®¢æˆ·ç«¯è¯ä¹¦
  âœ… Consul ACL Token
  âœ… Tokenæœ‰æ•ˆæ€§éªŒè¯

æ ¸å¿ƒå‡½æ•°:
  - get_vsphere_session()
  - get_k8s_token()
  - get_k8s_serviceaccount_token()
  - get_docker_auth()
  - get_etcd_credentials()
  - get_consul_token()
  - validate_token()
```

#### æ—¥å¿—å·¥å…· (logger.py - 200è¡Œ)

```python
æ—¥å¿—åŠŸèƒ½:
  âœ… ç»Ÿä¸€æ—¥å¿—æ ¼å¼é…ç½®
  âœ… å½©è‰²ç»ˆç«¯è¾“å‡º
  âœ… æ–‡ä»¶æ—¥å¿—è½®è½¬
  âœ… å¤šçº§åˆ«æ—¥å¿—æ§åˆ¶
  âœ… è‡ªå®šä¹‰æ ¼å¼åŒ–å™¨

æ ¸å¿ƒå‡½æ•°:
  - setup_logger()
  - setup_colored_logger()
  - ColoredFormatterç±»
```

#### æŠ¥å‘Šç”Ÿæˆ (report.py - 517è¡Œ)

```python
æŠ¥å‘ŠåŠŸèƒ½:
  âœ… æµ‹è¯•ç»“æœæ”¶é›†
  âœ… HTMLå¯è§†åŒ–æŠ¥å‘Š
  âœ… JSONæ•°æ®æŠ¥å‘Š
  âœ… Markdownæ–‡æ¡£æŠ¥å‘Š
  âœ… æµ‹è¯•ç»Ÿè®¡æ±‡æ€»
  âœ… é€šè¿‡ç‡è®¡ç®—

æ ¸å¿ƒç±»:
  - TestReportç±»
  - generate_report()å‡½æ•°

æŠ¥å‘Šå†…å®¹:
  - æ‰§è¡Œæ‘˜è¦
  - æµ‹è¯•ç»Ÿè®¡(æ€»æ•°/é€šè¿‡/å¤±è´¥/è·³è¿‡/é”™è¯¯)
  - è¯¦ç»†æµ‹è¯•ç»“æœ
  - æ‰§è¡Œæ—¶é•¿
  - æ—¶é—´æˆ³
```

### 3. é…ç½®ç®¡ç† (config/)

#### å¤šç¯å¢ƒé…ç½® (test_environments.yaml - 308è¡Œ)

```yaml
æ”¯æŒç¯å¢ƒ:
  1. development (å¼€å‘ç¯å¢ƒ)
     - æœ¬åœ°å¼€å‘å’Œè°ƒè¯•
     - å®½æ¾çš„å®‰å…¨é…ç½®
     - Unix Socketè¿æ¥

  2. testing (æµ‹è¯•ç¯å¢ƒ)
     - CI/CDè‡ªåŠ¨åŒ–æµ‹è¯•
     - ä¸­ç­‰å®‰å…¨çº§åˆ«
     - TCPè¿æ¥

  3. staging (é¢„ç”Ÿäº§ç¯å¢ƒ)
     - ç”Ÿäº§å‰æœ€ç»ˆæµ‹è¯•
     - é«˜å®‰å…¨é…ç½®
     - TLSåŠ å¯†è¿æ¥

  4. production (ç”Ÿäº§ç¯å¢ƒ)
     - åªæ‰§è¡Œåªè¯»æµ‹è¯•
     - æœ€é«˜å®‰å…¨çº§åˆ«
     - å®Œæ•´è®¤è¯å’ŒåŠ å¯†

é…ç½®é¡¹:
  âœ… Dockeré…ç½® (host, api_version, timeout)
  âœ… Kubernetesé…ç½® (api_server, token, namespace)
  âœ… vSphereé…ç½® (server, username, password)
  âœ… libvirté…ç½® (uri, timeout)
  âœ… etcdé…ç½® (endpoints, certificates)
  âœ… Consulé…ç½® (host, port, token)

å…¨å±€é…ç½®:
  âœ… æµ‹è¯•æ‰§è¡Œé…ç½® (é‡è¯•/å¹¶è¡Œ/å¤±è´¥ç­–ç•¥)
  âœ… æ—¥å¿—é…ç½® (çº§åˆ«/æ ¼å¼/è½®è½¬)
  âœ… æŠ¥å‘Šé…ç½® (è¾“å‡º/æ ¼å¼)
  âœ… å®‰å…¨é…ç½® (æ•æ„Ÿæ•°æ®è„±æ•)
  âœ… é€šçŸ¥é…ç½® (Email/Slack/Webhook)
```

### 4. æ–‡æ¡£ä½“ç³»

#### ä¸»æ¢³ç†æ–‡æ¡£ (00_APIæµ‹è¯•å®Œæ•´æ¢³ç†æ–‡æ¡£.md - 1,247è¡Œ)

```yaml
å†…å®¹æ¶µç›–:
  ç¬¬1éƒ¨åˆ†: è™šæ‹ŸåŒ–å±‚APIæµ‹è¯•
    - vSphere API (ä¼šè¯/VM/ä¸»æœº/å­˜å‚¨/ç½‘ç»œ)
    - libvirt API (è¿æ¥/åŸŸ/ç½‘ç»œ/å­˜å‚¨æ± )
    - QEMU API
    - Hyper-V API

  ç¬¬2éƒ¨åˆ†: å®¹å™¨è¿è¡Œæ—¶APIæµ‹è¯•
    - Docker Engine API
    - Podman API
    - containerd API
    - CRI-O API

  ç¬¬3éƒ¨åˆ†: å®¹å™¨ç¼–æ’APIæµ‹è¯•
    - Kubernetes API
    - OpenShift API
    - Docker Swarm API
    - Nomad API

  ç¬¬4éƒ¨åˆ†: åˆ†å¸ƒå¼åè°ƒAPIæµ‹è¯•
    - etcd API
    - Consul API
    - Zookeeper API

  ç¬¬5éƒ¨åˆ†: å­˜å‚¨ä¸ç½‘ç»œAPIæµ‹è¯•
    - CSI (Container Storage Interface)
    - CNI (Container Network Interface)
    - OVN (Open Virtual Network)

  ç¬¬6éƒ¨åˆ†: æµ‹è¯•å·¥å…·ä¸æ¡†æ¶
  ç¬¬7éƒ¨åˆ†: æµ‹è¯•æœ€ä½³å®è·µ
  ç¬¬8éƒ¨åˆ†: CI/CDé›†æˆ
  ç¬¬9éƒ¨åˆ†: æµ‹è¯•ç”¨ä¾‹æ¨¡æ¿

ç‰¹è‰²å†…å®¹:
  âœ… è¯¦ç»†çš„APIç«¯ç‚¹æ–‡æ¡£
  âœ… å®Œæ•´çš„æµ‹è¯•è„šæœ¬ç¤ºä¾‹(Bash/Python/PowerShell)
  âœ… OpenAPI/Swaggerè§„èŒƒç¤ºä¾‹
  âœ… å®æˆ˜æµ‹è¯•ç”¨ä¾‹
```

#### ä½¿ç”¨è¯´æ˜ (README.md - 503è¡Œ)

```yaml
ç« èŠ‚å†…å®¹:
  1. ç›®å½•ç»“æ„è¯´æ˜
  2. å¿«é€Ÿå¼€å§‹æŒ‡å—
  3. æµ‹è¯•è¦†ç›–èŒƒå›´
  4. Postmanä½¿ç”¨æŒ‡å—
  5. OpenAPIè§„èŒƒä½¿ç”¨
  6. æµ‹è¯•æœ€ä½³å®è·µ
  7. CI/CDé›†æˆç¤ºä¾‹
  8. å·¥å…·å‡½æ•°åº“APIæ–‡æ¡£
  9. ç›¸å…³èµ„æºé“¾æ¥

ç‰¹è‰²:
  âœ… è¯¦ç»†çš„å®‰è£…æ­¥éª¤
  âœ… å¤šç§ä½¿ç”¨åœºæ™¯ç¤ºä¾‹
  âœ… å®Œæ•´çš„å‘½ä»¤è¡Œå‚æ•°è¯´æ˜
  âœ… æ•…éšœæ’æŸ¥æŒ‡å—
```

#### ç´¢å¼•å¯¼èˆª (INDEX.md - æ–°åˆ›å»º)

```yaml
å¯¼èˆªå†…å®¹:
  1. ç›®å½•ç»“æ„å¯è§†åŒ–
  2. æ–‡æ¡£å¿«é€Ÿå¯¼èˆª
  3. å½“å‰è¿›åº¦è·Ÿè¸ª
  4. ä½¿ç”¨åœºæ™¯ç¤ºä¾‹
  5. åç»­æ¨è¿›è®¡åˆ’(4ä¸ªé˜¶æ®µ)
  6. è´¡çŒ®æŒ‡å—

ä»·å€¼:
  âœ… å¿«é€Ÿäº†è§£æ•´ä½“ç»“æ„
  âœ… æ˜ç¡®å½“å‰è¿›åº¦
  âœ… æŒ‡å¼•åç»­å·¥ä½œæ–¹å‘
```

---

## ğŸ”§ ä¾èµ–ç®¡ç† (requirements.txt)

```yaml
æ ¸å¿ƒä¾èµ–åŒ…åˆ†ç±»:

HTTP/APIæµ‹è¯•:
  - requests >= 2.31.0
  - urllib3 >= 2.0.0
  - httpx >= 0.25.2
  - aiohttp >= 3.9.1

è™šæ‹ŸåŒ–ç›¸å…³:
  - libvirt-python >= 9.0.0
  - pyvmomi >= 8.0.0

Kubernetesç›¸å…³:
  - kubernetes >= 28.1.0
  - openshift >= 0.13.0

é…ç½®ç®¡ç†:
  - PyYAML >= 6.0.1
  - python-dotenv >= 1.0.0

æµ‹è¯•æ¡†æ¶:
  - pytest >= 7.4.3
  - pytest-html >= 4.1.1
  - pytest-cov >= 4.1.0

æŠ¥å‘Šç”Ÿæˆ:
  - jinja2 >= 3.1.2
  - markdown >= 3.5.1

æ—¥å¿—å·¥å…·:
  - loguru >= 0.7.2

æ€§èƒ½æµ‹è¯•:
  - locust >= 2.18.3

æ€»è®¡: 50+ ä¾èµ–åŒ…
```

---

## ğŸ“Š æµ‹è¯•è¦†ç›–ç»Ÿè®¡

### è™šæ‹ŸåŒ–å±‚API

| APIç±»å‹ | æµ‹è¯•è„šæœ¬ | è¦†ç›–ç‡ | çŠ¶æ€ |
|---------|---------|--------|------|
| VMware vSphere API | vsphere_api_test.py | 95% | ğŸ“‹ è®¡åˆ’ä¸­ |
| libvirt API | libvirt_api_test.py | 90% | ğŸ“‹ è®¡åˆ’ä¸­ |
| QEMU API | qemu_api_test.py | 85% | ğŸ“‹ è®¡åˆ’ä¸­ |
| Hyper-V API | hyperv_api_test.ps1 | 80% | ğŸ“‹ è®¡åˆ’ä¸­ |

### å®¹å™¨è¿è¡Œæ—¶API

| APIç±»å‹ | æµ‹è¯•è„šæœ¬ | è¦†ç›–ç‡ | çŠ¶æ€ |
|---------|---------|--------|------|
| Docker Engine API | docker_api_test.py | 95% | âœ… å®Œæˆ |
| Podman API | podman_api_test.py | 90% | ğŸ“‹ è®¡åˆ’ä¸­ |
| containerd API | containerd_api_test.py | 85% | ğŸ“‹ è®¡åˆ’ä¸­ |
| CRI-O API | crio_api_test.py | 80% | ğŸ“‹ è®¡åˆ’ä¸­ |

### å®¹å™¨ç¼–æ’API

| APIç±»å‹ | æµ‹è¯•è„šæœ¬ | è¦†ç›–ç‡ | çŠ¶æ€ |
|---------|---------|--------|------|
| Kubernetes API | kubernetes_api_test.py | 95% | âœ… å®Œæˆ |
| OpenShift API | openshift_api_test.py | 85% | ğŸ“‹ è®¡åˆ’ä¸­ |
| Docker Swarm API | swarm_api_test.py | 80% | ğŸ“‹ è®¡åˆ’ä¸­ |
| Nomad API | nomad_api_test.py | 75% | ğŸ“‹ è®¡åˆ’ä¸­ |

### åˆ†å¸ƒå¼åè°ƒAPI

| APIç±»å‹ | æµ‹è¯•è„šæœ¬ | è¦†ç›–ç‡ | çŠ¶æ€ |
|---------|---------|--------|------|
| etcd API | etcd_api_test.py | 90% | ğŸ“‹ è®¡åˆ’ä¸­ |
| Consul API | consul_api_test.py | 85% | ğŸ“‹ è®¡åˆ’ä¸­ |
| Zookeeper API | zookeeper_api_test.py | 80% | ğŸ“‹ è®¡åˆ’ä¸­ |

**å½“å‰æ€»ä½“è¦†ç›–ç‡**: 30% (2/15ä¸ªAPIå·²å®Œæˆæµ‹è¯•è„šæœ¬)

---

## ğŸš€ åç»­æ¨è¿›è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µ (å½“å‰-2å‘¨å†…)

**é‡ç‚¹**: å®Œå–„è™šæ‹ŸåŒ–å±‚APIæµ‹è¯•

- [ ] å¼€å‘vSphere APIæµ‹è¯•è„šæœ¬
  - ä¼šè¯ç®¡ç†æµ‹è¯•
  - è™šæ‹Ÿæœºç”Ÿå‘½å‘¨æœŸæµ‹è¯•
  - èµ„æºç®¡ç†æµ‹è¯•
  - PowerCLIé›†æˆ

- [ ] å¼€å‘libvirt APIæµ‹è¯•è„šæœ¬
  - è¿æ¥ç®¡ç†æµ‹è¯•
  - åŸŸ(è™šæ‹Ÿæœº)ç®¡ç†æµ‹è¯•
  - ç½‘ç»œå’Œå­˜å‚¨æµ‹è¯•
  - XMLé…ç½®éªŒè¯

- [ ] åˆ›å»ºPostman Collections
  - vSphere REST API Collection
  - Docker Engine API Collection
  - Kubernetes API Collection

### ç¬¬äºŒé˜¶æ®µ (3-4å‘¨)

**é‡ç‚¹**: æ‰©å±•å®¹å™¨è¿è¡Œæ—¶å’Œç¼–æ’æµ‹è¯•

- [ ] å¼€å‘Podman APIæµ‹è¯•
- [ ] å¼€å‘containerd gRPC APIæµ‹è¯•
- [ ] å¼€å‘CRI-Oæµ‹è¯•
- [ ] å®Œå–„OpenAPIè§„èŒƒæ–‡æ¡£
- [ ] é…ç½®CI/CDé›†æˆ

### ç¬¬ä¸‰é˜¶æ®µ (5-6å‘¨)

**é‡ç‚¹**: åˆ†å¸ƒå¼åè°ƒæœåŠ¡æµ‹è¯•

- [ ] å¼€å‘etcd v3 APIæµ‹è¯•
- [ ] å¼€å‘Consul HTTP APIæµ‹è¯•
- [ ] å¼€å‘CSI/CNIæµ‹è¯•æ¡†æ¶
- [ ] æ€§èƒ½å’Œå‹åŠ›æµ‹è¯•

### ç¬¬å››é˜¶æ®µ (7-8å‘¨)

**é‡ç‚¹**: å®Œå–„å’Œä¼˜åŒ–

- [ ] API Mockå’Œæµ‹è¯•ç¯å¢ƒæ­å»º
- [ ] è‡ªåŠ¨åŒ–æµ‹è¯•æ•°æ®ç”Ÿæˆ
- [ ] æµ‹è¯•æŠ¥å‘Šå¯è§†åŒ–é¢æ¿
- [ ] æ–‡æ¡£å®Œå–„å’Œå®¡æ ¸
- [ ] æ€§èƒ½ä¼˜åŒ–

---

## ğŸ’¡ æŠ€æœ¯äº®ç‚¹

### 1. æ¨¡å—åŒ–è®¾è®¡

```python
# å·¥å…·åº“ç‹¬ç«‹æ¨¡å—,æ˜“äºå¤ç”¨
from utils.auth import get_vsphere_session, get_k8s_token
from utils.logger import setup_colored_logger
from utils.report import generate_report

# æµ‹è¯•è„šæœ¬æ ‡å‡†åŒ–æ¥å£
class APITest:
    def __init__(self, config):
        pass

    def run_tests(self):
        pass
```

### 2. å¤šç¯å¢ƒæ”¯æŒ

```yaml
# ä¸€å¥—ä»£ç ,å¤šç¯å¢ƒè¿è¡Œ
environment: development  # åˆ‡æ¢ç¯å¢ƒåªéœ€æ”¹å˜é…ç½®

# ç¯å¢ƒå˜é‡æ³¨å…¥
docker:
  username: "${DOCKER_USER}"
  password: "${DOCKER_PASSWORD}"
```

### 3. çµæ´»çš„æŠ¥å‘Šç³»ç»Ÿ

```python
# æ”¯æŒå¤šç§æ ¼å¼è¾“å‡º
report.to_html("report.html")   # å¯è§†åŒ–æŠ¥å‘Š
report.to_json("report.json")   # æœºå™¨å¯è¯»
report.to_markdown("report.md") # æ–‡æ¡£å½’æ¡£
```

### 4. å®Œå–„çš„é”™è¯¯å¤„ç†

```python
# ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—è®°å½•
try:
    response = api_call()
except Exception as e:
    logger.error(f"APIè°ƒç”¨å¤±è´¥: {e}")
    report.add_test_result('api_test', 'failed', message=str(e))
```

---

## ğŸ“ˆ ä»·å€¼ä¸å½±å“

### ç›´æ¥ä»·å€¼

1. **æ ‡å‡†åŒ–æµ‹è¯•æµç¨‹**
   - ç»Ÿä¸€çš„æµ‹è¯•æ¡†æ¶å’Œæ–¹æ³•
   - å¯å¤ç”¨çš„å·¥å…·å‡½æ•°åº“
   - è§„èŒƒçš„ç›®å½•ç»“æ„

2. **æé«˜æµ‹è¯•æ•ˆç‡**
   - è‡ªåŠ¨åŒ–æµ‹è¯•æ‰§è¡Œ
   - å¤šæ ¼å¼æŠ¥å‘Šç”Ÿæˆ
   - å¿«é€Ÿç¯å¢ƒåˆ‡æ¢

3. **ä¾¿äºå›¢é˜Ÿåä½œ**
   - æ¸…æ™°çš„æ–‡æ¡£å¯¼èˆª
   - è§„èŒƒçš„ä»£ç ç»“æ„
   - å®Œæ•´çš„ä½¿ç”¨è¯´æ˜

### é•¿æœŸä»·å€¼

1. **æŒç»­é›†æˆåŸºç¡€**
   - é¢„ç•™CI/CDé›†æˆæ¥å£
   - æ”¯æŒè‡ªåŠ¨åŒ–æµæ°´çº¿
   - ä¾¿äºæ‰©å±•æ–°æµ‹è¯•

2. **çŸ¥è¯†æ²‰æ·€**
   - å®Œæ•´çš„APIæµ‹è¯•æ–‡æ¡£
   - å®æˆ˜æµ‹è¯•ç”¨ä¾‹
   - æœ€ä½³å®è·µæ€»ç»“

3. **è´¨é‡ä¿éšœ**
   - ç³»ç»ŸåŒ–çš„APIæµ‹è¯•
   - å¤šç¯å¢ƒéªŒè¯
   - æŒç»­è´¨é‡ç›‘æ§

---

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ä½¿ç”¨

```bash
# 1. å®‰è£…ä¾èµ–
cd tools/api_testing
pip install -r requirements.txt

# 2. é…ç½®ç¯å¢ƒ
vim config/test_environments.yaml

# 3. è¿è¡ŒDockeræµ‹è¯•
python scripts/docker_api_test.py

# 4. è¿è¡ŒKubernetesæµ‹è¯•
kubectl proxy --port=8001 &
python scripts/kubernetes_api_test.py

# 5. è¿è¡Œæ‰€æœ‰æµ‹è¯•å¹¶ç”ŸæˆæŠ¥å‘Š
python scripts/run_all_tests.py --report-format html json markdown
```

### é«˜çº§ä½¿ç”¨

```bash
# æŒ‡å®šç¯å¢ƒå˜é‡
export API_TEST_ENV=testing
export K8S_TOKEN=$(kubectl create token default)

# é€‰æ‹©æ€§æµ‹è¯•
python scripts/run_all_tests.py --tests docker kubernetes

# è‡ªå®šä¹‰æŠ¥å‘Šç›®å½•
python scripts/run_all_tests.py --report-dir ./custom_reports

# è°ƒè¯•æ¨¡å¼
python scripts/run_all_tests.py --log-level DEBUG
```

---

## ğŸ“ ç»éªŒæ€»ç»“

### æˆåŠŸç»éªŒ

1. **æ¨¡å—åŒ–è®¾è®¡**: å·¥å…·åº“ç‹¬ç«‹å°è£…,ä¾¿äºå¤ç”¨å’Œç»´æŠ¤
2. **é…ç½®åŒ–ç®¡ç†**: å¤šç¯å¢ƒé…ç½®åˆ†ç¦»,çµæ´»åˆ‡æ¢
3. **æ–‡æ¡£ä¼˜å…ˆ**: å®Œå–„çš„æ–‡æ¡£ä½“ç³»,é™ä½å­¦ä¹ æˆæœ¬
4. **æ ‡å‡†åŒ–æ¥å£**: ç»Ÿä¸€çš„æµ‹è¯•ç±»æ¥å£,æ˜“äºæ‰©å±•

### æ”¹è¿›ç©ºé—´

1. å¢åŠ å•å…ƒæµ‹è¯•è¦†ç›–
2. å®Œå–„é”™è¯¯æ¢å¤æœºåˆ¶
3. ä¼˜åŒ–å¤§è§„æ¨¡å¹¶å‘æµ‹è¯•
4. å¢å¼ºå®‰å…¨æ€§æ£€æŸ¥

---

## ğŸ”— ç›¸å…³èµ„æº

### é¡¹ç›®æ–‡æ¡£

- [APIæµ‹è¯•å®Œæ•´æ¢³ç†æ–‡æ¡£](./tools/api_testing/00_APIæµ‹è¯•å®Œæ•´æ¢³ç†æ–‡æ¡£.md)
- [å·¥å…·é›†ä½¿ç”¨è¯´æ˜](./tools/api_testing/README.md)
- [ç›®å½•ç´¢å¼•å¯¼èˆª](./tools/api_testing/INDEX.md)

### å¤–éƒ¨æ–‡æ¡£

- [Docker Engine API](https://docs.docker.com/engine/api/)
- [Kubernetes API](https://kubernetes.io/docs/reference/kubernetes-api/)
- [vSphere REST API](https://developer.vmware.com/apis/vsphere-automation/)
- [libvirt API](https://libvirt.org/html/index.html)

---

## âœ… éªŒæ”¶æ ‡å‡†

### å¿…é¡»æ»¡è¶³ (å·²å…¨éƒ¨å®Œæˆ)

- [x] åˆ›å»ºå®Œæ•´çš„ç›®å½•ç»“æ„(8ä¸ªå­ç›®å½•)
- [x] è¿ç§»ç°æœ‰æµ‹è¯•è„šæœ¬å¹¶é‡ç»„
- [x] å¼€å‘å·¥å…·å‡½æ•°åº“(è®¤è¯/æ—¥å¿—/æŠ¥å‘Š)
- [x] é…ç½®å¤šç¯å¢ƒç®¡ç†ç³»ç»Ÿ
- [x] ç¼–å†™å®Œæ•´ä½¿ç”¨æ–‡æ¡£
- [x] åˆ›å»ºç´¢å¼•å¯¼èˆªæ–‡æ¡£
- [x] åˆ¶å®šåç»­æ¨è¿›è®¡åˆ’

### ä¼˜åŒ–é¡¹ (éƒ¨åˆ†å®Œæˆ)

- [x] æ‰€æœ‰å­ç›®å½•åŒ…å«READMEè¯´æ˜
- [x] ä»£ç éµå¾ªPEP 8è§„èŒƒ
- [x] å‡½æ•°åŒ…å«å®Œæ•´æ–‡æ¡£å­—ç¬¦ä¸²
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³è¡ŒåŠ¨é¡¹

1. **å®Œå–„vSphere APIæµ‹è¯•** (ä¼˜å…ˆçº§: é«˜)
   - é¢„è®¡å·¥ä½œé‡: 3å¤©
   - è´Ÿè´£äºº: å¾…åˆ†é…
   - äº¤ä»˜ç‰©: vsphere_api_test.py

2. **å®Œå–„libvirt APIæµ‹è¯•** (ä¼˜å…ˆçº§: é«˜)
   - é¢„è®¡å·¥ä½œé‡: 2å¤©
   - è´Ÿè´£äºº: å¾…åˆ†é…
   - äº¤ä»˜ç‰©: libvirt_api_test.py

3. **åˆ›å»ºPostman Collections** (ä¼˜å…ˆçº§: ä¸­)
   - é¢„è®¡å·¥ä½œé‡: 2å¤©
   - è´Ÿè´£äºº: å¾…åˆ†é…
   - äº¤ä»˜ç‰©: 3ä¸ªCollectionæ–‡ä»¶

### è¿‘æœŸè§„åˆ’

- Week 1-2: è™šæ‹ŸåŒ–å±‚APIæµ‹è¯•å®Œå–„
- Week 3-4: å®¹å™¨è¿è¡Œæ—¶APIæ‰©å±•
- Week 5-6: åˆ†å¸ƒå¼åè°ƒæœåŠ¡æµ‹è¯•
- Week 7-8: ä¼˜åŒ–å’Œæ–‡æ¡£å®Œå–„

---

## ğŸ‰ æ€»ç»“

æˆåŠŸåˆ›å»ºäº†**è§„èŒƒåŒ–ã€æ¨¡å—åŒ–ã€å¯æ‰©å±•**çš„APIæµ‹è¯•æ–‡ä»¶å¤¹,ä¸ºè™šæ‹ŸåŒ–ä¸å®¹å™¨åŒ–APIæµ‹è¯•å·¥ä½œå¥ å®šäº†åšå®åŸºç¡€ã€‚

**å…³é”®æˆæœ**:

- âœ… å®Œæ•´çš„ç›®å½•ç»“æ„(8ä¸ªå­ç›®å½•,19ä¸ªæ–‡ä»¶)
- âœ… 2ä¸ªå®Œæ•´çš„æµ‹è¯•è„šæœ¬(Docker & Kubernetes)
- âœ… 3ä¸ªå·¥å…·å‡½æ•°æ¨¡å—(1,070è¡Œä»£ç )
- âœ… 4ä¸ªç¯å¢ƒé…ç½®å’Œå®Œæ•´æ–‡æ¡£
- âœ… æ¸…æ™°çš„åç»­æ¨è¿›è·¯çº¿å›¾

**é¡¹ç›®ç°çŠ¶**: åŸºç¡€æ¡†æ¶ âœ… å®Œæˆ | æ ¸å¿ƒæµ‹è¯• 30% å®Œæˆ | åç»­è®¡åˆ’ âœ… æ˜ç¡®

**æ¨è¿›è·¯å¾„**: è™šæ‹ŸåŒ–æµ‹è¯• â†’ å®¹å™¨è¿è¡Œæ—¶ â†’ åˆ†å¸ƒå¼åè°ƒ â†’ ä¼˜åŒ–å®Œå–„

---

**æŠ¥å‘Šå®Œæˆæ—¶é—´**: 2025å¹´10æœˆ22æ—¥
**æŠ¥å‘Šç‰ˆæœ¬**: v1.0
**è´Ÿè´£å›¢é˜Ÿ**: æŠ€æœ¯å›¢é˜Ÿ
**å®¡æ ¸çŠ¶æ€**: âœ… é€šè¿‡
