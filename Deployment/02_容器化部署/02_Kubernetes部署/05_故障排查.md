# Kubernetes故障排查

> **返回**: [Kubernetes部署目录](README.md) | [容器化部署首页](../README.md) | [部署指南首页](../../00_索引导航/README.md)

---

## 📋 目录

- [Kubernetes故障排查](#kubernetes故障排查)
  - [📋 目录](#-目录)
  - [1. 故障排查流程](#1-故障排查流程)
  - [2. Pod故障排查](#2-pod故障排查)
    - [场景1: Pod一直处于Pending状态](#场景1-pod一直处于pending状态)
    - [场景2: CrashLoopBackOff](#场景2-crashloopbackoff)
    - [场景3: ImagePullBackOff](#场景3-imagepullbackoff)
  - [3. 网络故障排查](#3-网络故障排查)
    - [场景1: Service无法访问](#场景1-service无法访问)
    - [场景2: DNS解析失败](#场景2-dns解析失败)
  - [4. 存储故障排查](#4-存储故障排查)
    - [场景1: PVC一直Pending](#场景1-pvc一直pending)
    - [场景2: Pod无法挂载卷](#场景2-pod无法挂载卷)
  - [5. 节点故障排查](#5-节点故障排查)
    - [场景1: 节点NotReady](#场景1-节点notready)
    - [场景2: 节点资源压力](#场景2-节点资源压力)
  - [6. 控制平面故障排查](#6-控制平面故障排查)
  - [7. 性能问题排查](#7-性能问题排查)
  - [8. 常用诊断命令](#8-常用诊断命令)
  - [9. 日志收集](#9-日志收集)
  - [10. 故障预防最佳实践](#10-故障预防最佳实践)
  - [相关文档](#相关文档)

---

## 1. 故障排查流程

```yaml
Troubleshooting_Workflow:
  第一步_信息收集:
    - 故障现象描述
    - 发生时间
    - 影响范围
    - 近期变更
  
  第二步_快速检查:
    - 集群状态
    - 节点状态
    - Pod状态
    - 事件日志
  
  第三步_定位问题:
    - 查看日志
    - 检查配置
    - 资源使用
    - 网络连通性
  
  第四步_解决问题:
    - 临时缓解
    - 根本修复
    - 验证修复
    - 记录文档
  
  第五步_预防措施:
    - 分析根因
    - 改进监控
    - 更新文档
    - 团队分享
```

**快速检查清单**:

```bash
# 1. 集群整体状态
kubectl cluster-info
kubectl get nodes
kubectl get componentstatuses

# 2. 查看所有命名空间的Pod
kubectl get pods -A

# 3. 查看最近事件
kubectl get events -A --sort-by='.lastTimestamp' | tail -20

# 4. 查看资源使用
kubectl top nodes
kubectl top pods -A

# 5. 检查关键系统组件
kubectl get pods -n kube-system
```

---

## 2. Pod故障排查

```yaml
Pod_Troubleshooting:
  常见状态:
    Pending:
      原因:
        - 资源不足 (CPU/内存)
        - 节点污点不匹配
        - 持久卷不可用
        - 镜像拉取失败
    
    CrashLoopBackOff:
      原因:
        - 应用启动失败
        - 健康检查失败
        - 配置错误
        - 权限问题
    
    ImagePullBackOff:
      原因:
        - 镜像不存在
        - 认证失败
        - 网络问题
        - 私有仓库配置错误
    
    Error / Failed:
      原因:
        - 容器退出异常
        - OOMKilled (内存溢出)
        - 初始化失败
    
    Evicted:
      原因:
        - 节点资源不足
        - 磁盘压力
        - 内存压力
    
    Unknown:
      原因:
        - Kubelet失联
        - 节点故障
        - 网络分区
```

**Pod排查命令**:

```bash
# ========================================
# Pod基本信息
# ========================================

# 查看Pod状态
kubectl get pods -n <namespace>
kubectl get pods -n <namespace> -o wide  # 显示节点、IP

# 查看Pod详情
kubectl describe pod <pod-name> -n <namespace>

# 查看Pod YAML
kubectl get pod <pod-name> -n <namespace> -o yaml

# 查看Pod事件
kubectl get events --field-selector involvedObject.name=<pod-name> -n <namespace>

# ========================================
# Pod日志
# ========================================

# 查看当前日志
kubectl logs <pod-name> -n <namespace>

# 查看上一个容器日志 (重启后)
kubectl logs <pod-name> -n <namespace> --previous

# 多容器Pod指定容器
kubectl logs <pod-name> -c <container-name> -n <namespace>

# 实时日志
kubectl logs -f <pod-name> -n <namespace>

# 最近N行
kubectl logs --tail=100 <pod-name> -n <namespace>

# 指定时间范围
kubectl logs --since=1h <pod-name> -n <namespace>
kubectl logs --since-time=2024-10-19T10:00:00Z <pod-name> -n <namespace>

# ========================================
# Pod调试
# ========================================

# 进入容器
kubectl exec -it <pod-name> -n <namespace> -- /bin/bash

# 执行命令
kubectl exec <pod-name> -n <namespace> -- ls -la /app

# 多容器指定容器
kubectl exec -it <pod-name> -c <container-name> -n <namespace> -- sh

# 端口转发
kubectl port-forward <pod-name> 8080:80 -n <namespace>

# 复制文件
kubectl cp <pod-name>:/path/to/file ./local-file -n <namespace>
kubectl cp ./local-file <pod-name>:/path/to/file -n <namespace>

# 临时调试Pod
kubectl run debug-pod --image=busybox:1.28 -it --rm -- sh
```

**Pod故障场景与解决**:

### 场景1: Pod一直处于Pending状态

```bash
# 1. 查看Pod详情
kubectl describe pod <pod-name> -n <namespace>

# 常见原因和解决方案:

# A. 资源不足
# 查看事件: "0/3 nodes are available: 3 Insufficient cpu."
kubectl top nodes  # 查看节点资源
# 解决: 增加节点、减少资源请求、驱逐低优先级Pod

# B. 节点选择器不匹配
# Events: "0/3 nodes are available: 3 node(s) didn't match node selector."
kubectl get nodes --show-labels  # 查看节点标签
# 解决: 修改nodeSelector或给节点添加标签

# C. 污点不容忍
# Events: "0/3 nodes are available: 3 node(s) had taint {key: value}, that the pod didn't tolerate."
kubectl describe node <node-name> | grep Taints
# 解决: 添加toleration或移除污点

# D. PVC绑定失败
# Events: "pod has unbound immediate PersistentVolumeClaims"
kubectl get pvc -n <namespace>
# 解决: 创建PV、修复StorageClass、检查访问模式
```

### 场景2: CrashLoopBackOff

```bash
# 1. 查看Pod日志
kubectl logs <pod-name> -n <namespace> --previous

# 2. 查看退出码
kubectl describe pod <pod-name> -n <namespace> | grep "Exit Code"

# 常见退出码:
# 0: 正常退出
# 1: 应用错误
# 137: SIGKILL (OOMKilled, 内存溢出)
# 139: SIGSEGV (段错误)
# 143: SIGTERM (正常终止)

# 3. 检查资源限制
kubectl describe pod <pod-name> -n <namespace> | grep -A 5 "Limits"

# 4. 检查健康检查
kubectl describe pod <pod-name> -n <namespace> | grep -A 10 "Liveness"

# 解决方案:
# - 修复应用错误
# - 增加内存limits
# - 调整健康检查参数 (initialDelaySeconds, periodSeconds)
# - 检查依赖服务 (数据库、缓存)
```

### 场景3: ImagePullBackOff

```bash
# 1. 查看详细错误
kubectl describe pod <pod-name> -n <namespace>

# 常见错误:

# A. 镜像不存在
# "Failed to pull image: manifest for image:tag not found"
# 解决: 确认镜像名称和标签正确

# B. 认证失败
# "Failed to pull image: unauthorized"
# 检查imagePullSecrets
kubectl get secret -n <namespace>
kubectl describe pod <pod-name> -n <namespace> | grep "Image Pull Secrets"

# 创建docker-registry secret
kubectl create secret docker-registry regcred \
  --docker-server=<registry-url> \
  --docker-username=<username> \
  --docker-password=<password> \
  -n <namespace>

# C. 网络问题
# 测试节点到Registry的连通性
kubectl debug node/<node-name> -it --image=busybox:1.28
# nslookup registry.example.com
# wget https://registry.example.com

# D. 私有仓库证书问题
# 在节点上配置CA证书
# /etc/docker/certs.d/<registry-url>/ca.crt
```

---

## 3. 网络故障排查

```yaml
Network_Troubleshooting:
  常见问题:
    - Pod间无法通信
    - Service无法访问
    - Ingress不工作
    - DNS解析失败
    - 网络策略阻止
```

**网络排查命令**:

```bash
# ========================================
# Service排查
# ========================================

# 查看Service
kubectl get svc -n <namespace>

# Service详情
kubectl describe svc <service-name> -n <namespace>

# 查看Endpoints
kubectl get endpoints <service-name> -n <namespace>

# 如果Endpoints为空，检查:
# 1. Pod是否运行
kubectl get pods -l <label-selector> -n <namespace>

# 2. Pod标签是否匹配Service selector
kubectl get svc <service-name> -n <namespace> -o jsonpath='{.spec.selector}'

# 3. Pod端口是否正确
kubectl get pods <pod-name> -n <namespace> -o jsonpath='{.spec.containers[*].ports}'

# ========================================
# DNS排查
# ========================================

# 查看CoreDNS
kubectl get pods -n kube-system -l k8s-app=kube-dns

# CoreDNS日志
kubectl logs -n kube-system -l k8s-app=kube-dns

# DNS测试
kubectl run dnsutils --image=tutum/dnsutils -it --rm -- nslookup kubernetes.default

# 测试Service DNS
kubectl run dnsutils --image=tutum/dnsutils -it --rm -- nslookup <service-name>.<namespace>.svc.cluster.local

# 查看Pod DNS配置
kubectl exec <pod-name> -n <namespace> -- cat /etc/resolv.conf

# ========================================
# 网络连通性测试
# ========================================

# 测试Pod到Pod
kubectl exec <pod1> -n <namespace> -- ping <pod2-ip>
kubectl exec <pod1> -n <namespace> -- curl http://<pod2-ip>:8080

# 测试Pod到Service
kubectl exec <pod-name> -n <namespace> -- curl http://<service-name>

# 测试Pod到外部
kubectl exec <pod-name> -n <namespace> -- ping 8.8.8.8
kubectl exec <pod-name> -n <namespace> -- curl https://www.google.com

# ========================================
# NetworkPolicy排查
# ========================================

# 查看NetworkPolicy
kubectl get networkpolicy -n <namespace>

# NetworkPolicy详情
kubectl describe networkpolicy <policy-name> -n <namespace>

# 临时删除NetworkPolicy测试
kubectl delete networkpolicy <policy-name> -n <namespace>

# ========================================
# CNI排查
# ========================================

# Calico
kubectl get pods -n kube-system -l k8s-app=calico-node
kubectl logs -n kube-system <calico-node-pod> -c calico-node

# Flannel
kubectl get pods -n kube-system -l app=flannel
kubectl logs -n kube-system <flannel-pod>

# Cilium
kubectl get pods -n kube-system -l k8s-app=cilium
kubectl exec -n kube-system <cilium-pod> -- cilium status
```

**网络故障场景**:

### 场景1: Service无法访问

```bash
# 1. 检查Service Endpoints
kubectl get endpoints <service-name> -n <namespace>

# 2. 如果Endpoints为空
# 检查Pod标签与Service selector是否匹配
kubectl get svc <service-name> -n <namespace> -o yaml | grep -A 5 selector
kubectl get pods -n <namespace> --show-labels

# 3. 如果Endpoints正常，测试连接
# 从集群内Pod测试
kubectl run test-pod --image=busybox:1.28 -it --rm -- wget -qO- http://<service-name>.<namespace>

# 4. 检查kube-proxy
kubectl get pods -n kube-system -l k8s-app=kube-proxy
kubectl logs -n kube-system <kube-proxy-pod>

# 5. 检查iptables/ipvs规则
kubectl exec -n kube-system <kube-proxy-pod> -- iptables-save | grep <service-name>
kubectl exec -n kube-system <kube-proxy-pod> -- ipvsadm -Ln
```

### 场景2: DNS解析失败

```bash
# 1. 测试CoreDNS
kubectl run dnsutils --image=tutum/dnsutils -it --rm -- nslookup kubernetes.default

# 2. 如果失败，检查CoreDNS Pod
kubectl get pods -n kube-system -l k8s-app=kube-dns
kubectl logs -n kube-system -l k8s-app=kube-dns

# 3. 检查CoreDNS ConfigMap
kubectl get configmap coredns -n kube-system -o yaml

# 4. 检查Service
kubectl get svc kube-dns -n kube-system

# 5. 重启CoreDNS
kubectl rollout restart deployment coredns -n kube-system
```

---

## 4. 存储故障排查

```yaml
Storage_Troubleshooting:
  常见问题:
    - PVC处于Pending状态
    - Pod无法挂载卷
    - 卷数据丢失
    - 存储性能差
```

**存储排查命令**:

```bash
# ========================================
# PV/PVC排查
# ========================================

# 查看PVC
kubectl get pvc -n <namespace>

# PVC详情
kubectl describe pvc <pvc-name> -n <namespace>

# 查看PV
kubectl get pv

# PV详情
kubectl describe pv <pv-name>

# 查看StorageClass
kubectl get storageclass
kubectl describe storageclass <sc-name>

# ========================================
# 卷挂载排查
# ========================================

# 查看Pod卷挂载
kubectl describe pod <pod-name> -n <namespace> | grep -A 10 "Mounts"

# 查看kubelet日志
journalctl -u kubelet -f | grep -i volume

# ========================================
# CSI Driver排查
# ========================================

# 查看CSI Pods
kubectl get pods -n kube-system | grep csi

# CSI Driver日志
kubectl logs -n kube-system <csi-driver-pod> -c csi-provisioner
kubectl logs -n kube-system <csi-driver-pod> -c csi-attacher
```

**存储故障场景**:

### 场景1: PVC一直Pending

```bash
# 1. 查看PVC事件
kubectl describe pvc <pvc-name> -n <namespace>

# 常见原因:

# A. 没有可用的PV
# 检查PV
kubectl get pv
# 解决: 创建PV或使用动态供应

# B. StorageClass不存在
kubectl get storageclass
# 解决: 创建StorageClass

# C. 访问模式不匹配
# PVC要求RWX，但PV只支持RWO
# 解决: 使用支持RWX的存储 (NFS, CephFS)

# D. 容量不足
# PVC请求10Gi，但最大PV只有5Gi
# 解决: 增加PV容量或减少PVC请求
```

### 场景2: Pod无法挂载卷

```bash
# 1. 查看Pod事件
kubectl describe pod <pod-name> -n <namespace>

# 常见错误:

# "MountVolume.SetUp failed: mount failed"
# 2. 检查节点存储驱动
kubectl debug node/<node-name> -it --image=ubuntu
# lsblk
# mount | grep <volume>

# 3. 检查NFS (如果使用NFS)
showmount -e <nfs-server>
mount -t nfs <nfs-server>:/path /mnt/test

# 4. 查看kubelet日志
journalctl -u kubelet -n 100 | grep -i mount
```

---

## 5. 节点故障排查

```yaml
Node_Troubleshooting:
  常见状态:
    NotReady:
      - kubelet停止
      - 网络问题
      - 资源耗尽
      - 容器运行时故障
    
    MemoryPressure:
      - 内存不足
      - 触发驱逐
    
    DiskPressure:
      - 磁盘不足
      - 镜像清理
```

**节点排查命令**:

```bash
# ========================================
# 节点状态
# ========================================

# 查看节点
kubectl get nodes
kubectl get nodes -o wide

# 节点详情
kubectl describe node <node-name>

# 节点资源使用
kubectl top node <node-name>

# ========================================
# Kubelet排查
# ========================================

# 查看kubelet状态
systemctl status kubelet

# kubelet日志
journalctl -u kubelet -f
journalctl -u kubelet -n 100

# kubelet配置
cat /var/lib/kubelet/config.yaml

# ========================================
# 容器运行时排查
# ========================================

# containerd
systemctl status containerd
journalctl -u containerd -f

# 查看容器
crictl ps
crictl pods

# 容器日志
crictl logs <container-id>

# ========================================
# 系统资源
# ========================================

# 内存
free -h
cat /proc/meminfo

# CPU
top
mpstat 1

# 磁盘
df -h
du -sh /var/lib/*

# 网络
ip addr
ip route
netstat -tlnp
```

**节点故障场景**:

### 场景1: 节点NotReady

```bash
# 1. 查看节点详情
kubectl describe node <node-name>

# 2. SSH登录节点检查

# A. kubelet状态
systemctl status kubelet
journalctl -u kubelet --since "10 minutes ago"

# 常见错误:
# "Failed to get system container stats"
# 解决: 重启kubelet
sudo systemctl restart kubelet

# B. 容器运行时
systemctl status containerd
crictl ps

# C. 网络连通性
# 测试到API Server
curl -k https://<api-server>:6443

# D. 磁盘空间
df -h
# 如果/var满了，清理
docker system prune -a
crictl rmi --prune

# E. 系统负载
top
free -h
```

### 场景2: 节点资源压力

```bash
# 1. MemoryPressure
kubectl describe node <node-name> | grep -A 5 "Conditions"

# 查看内存使用
kubectl top node <node-name>

# SSH登录节点
free -h
ps aux --sort=-%mem | head

# 驱逐低优先级Pod
kubectl drain <node-name> --ignore-daemonsets --delete-emptydir-data

# 2. DiskPressure
df -h

# 清理Docker镜像和容器
docker system prune -a -f

# 清理日志
find /var/log -name "*.log" -type f -mtime +7 -delete
journalctl --vacuum-time=7d
```

---

## 6. 控制平面故障排查

```yaml
Control_Plane_Troubleshooting:
  组件:
    - kube-apiserver
    - etcd
    - kube-controller-manager
    - kube-scheduler
```

**控制平面排查**:

```bash
# ========================================
# API Server
# ========================================

# 查看Pod
kubectl get pods -n kube-system | grep apiserver

# 日志
kubectl logs -n kube-system kube-apiserver-<node> --tail=100

# 或者查看静态Pod日志
journalctl -u kubelet | grep apiserver

# API Server健康检查
curl -k https://localhost:6443/healthz
curl -k https://localhost:6443/readyz

# ========================================
# etcd
# ========================================

# 查看etcd Pod
kubectl get pods -n kube-system | grep etcd

# etcd日志
kubectl logs -n kube-system etcd-<node>

# etcd健康检查
export ETCDCTL_API=3
etcdctl --endpoints=https://127.0.0.1:2379 \
  --cacert=/etc/kubernetes/pki/etcd/ca.crt \
  --cert=/etc/kubernetes/pki/etcd/server.crt \
  --key=/etc/kubernetes/pki/etcd/server.key \
  endpoint health

# etcd成员
etcdctl member list

# ========================================
# Controller Manager
# ========================================

# 日志
kubectl logs -n kube-system kube-controller-manager-<node>

# 健康检查
curl -k https://localhost:10257/healthz

# ========================================
# Scheduler
# ========================================

# 日志
kubectl logs -n kube-system kube-scheduler-<node>

# 健康检查
curl -k https://localhost:10259/healthz
```

---

## 7. 性能问题排查

```bash
# ========================================
# 集群性能
# ========================================

# 查看资源使用
kubectl top nodes
kubectl top pods -A --sort-by=cpu
kubectl top pods -A --sort-by=memory

# API Server指标
kubectl get --raw /metrics | grep apiserver_request_duration

# ========================================
# Pod性能
# ========================================

# 进入Pod查看
kubectl exec -it <pod-name> -- top
kubectl exec -it <pod-name> -- ps aux

# 资源限制检查
kubectl describe pod <pod-name> | grep -A 10 "Limits"

# ========================================
# 网络性能
# ========================================

# Pod间延迟测试
kubectl run test-source --image=nicolaka/netshoot -it --rm -- bash
# ping <target-pod-ip>
# curl -w "@curl-format.txt" http://<target-service>

# ========================================
# 存储性能
# ========================================

# 磁盘IO测试
kubectl exec -it <pod-name> -- dd if=/dev/zero of=/mnt/test bs=1M count=1024
kubectl exec -it <pod-name> -- hdparm -t /dev/sda
```

---

## 8. 常用诊断命令

```bash
# ========================================
# 资源查看
# ========================================

# 查看所有资源
kubectl get all -A

# 按标签过滤
kubectl get pods -l app=nginx -A

# 输出格式
kubectl get pods -o wide
kubectl get pods -o yaml
kubectl get pods -o json
kubectl get pods -o jsonpath='{.items[*].metadata.name}'

# Watch模式
kubectl get pods -w
kubectl get events -w

# ========================================
# 详细信息
# ========================================

# Describe
kubectl describe node <node-name>
kubectl describe pod <pod-name>
kubectl describe svc <service-name>

# 查看YAML
kubectl get pod <pod-name> -o yaml

# 编辑资源
kubectl edit pod <pod-name>

# ========================================
# 调试
# ========================================

# 临时调试Pod
kubectl run debug --image=nicolaka/netshoot -it --rm -- bash

# 在现有Pod旁边创建调试容器 (1.23+)
kubectl debug <pod-name> -it --image=busybox --share-processes --copy-to=debug-pod

# 在节点上调试
kubectl debug node/<node-name> -it --image=ubuntu

# ========================================
# 批量操作
# ========================================

# 批量删除
kubectl delete pods --field-selector=status.phase=Failed -A
kubectl delete pods --all -n <namespace>

# 批量重启
kubectl rollout restart deployment -n <namespace>
kubectl delete pods -l app=myapp -n <namespace>

# ========================================
# 资源使用
# ========================================

# 资源配额
kubectl describe quota -n <namespace>

# 资源限制
kubectl describe limitrange -n <namespace>

# PV/PVC
kubectl get pv
kubectl get pvc -A
```

---

## 9. 日志收集

```bash
# ========================================
# 组件日志
# ========================================

# kubelet
journalctl -u kubelet -n 1000 > kubelet.log

# containerd
journalctl -u containerd -n 1000 > containerd.log

# API Server
kubectl logs -n kube-system kube-apiserver-<node> > apiserver.log

# etcd
kubectl logs -n kube-system etcd-<node> > etcd.log

# Controller Manager
kubectl logs -n kube-system kube-controller-manager-<node> > controller.log

# Scheduler
kubectl logs -n kube-system kube-scheduler-<node> > scheduler.log

# ========================================
# 集群信息导出
# ========================================

# 所有Pod
kubectl get pods -A -o yaml > all-pods.yaml

# 所有事件
kubectl get events -A --sort-by='.lastTimestamp' > events.log

# 节点信息
kubectl get nodes -o yaml > nodes.yaml
kubectl describe nodes > nodes-describe.txt

# ========================================
# 批量日志收集脚本
# ========================================

#!/bin/bash
# collect-logs.sh

NAMESPACE="default"
OUTPUT_DIR="./k8s-logs-$(date +%Y%m%d-%H%M%S)"

mkdir -p $OUTPUT_DIR

# 集群信息
kubectl cluster-info > $OUTPUT_DIR/cluster-info.txt
kubectl get nodes -o wide > $OUTPUT_DIR/nodes.txt
kubectl get pods -A -o wide > $OUTPUT_DIR/all-pods.txt
kubectl get events -A --sort-by='.lastTimestamp' > $OUTPUT_DIR/events.txt

# 命名空间资源
kubectl get all -n $NAMESPACE > $OUTPUT_DIR/resources-$NAMESPACE.txt

# Pod日志
for pod in $(kubectl get pods -n $NAMESPACE -o jsonpath='{.items[*].metadata.name}'); do
  kubectl logs $pod -n $NAMESPACE --all-containers=true > $OUTPUT_DIR/pod-$pod.log 2>&1
done

# 系统组件日志
kubectl logs -n kube-system -l component=kube-apiserver --tail=1000 > $OUTPUT_DIR/apiserver.log
kubectl logs -n kube-system -l component=etcd --tail=1000 > $OUTPUT_DIR/etcd.log
kubectl logs -n kube-system -l k8s-app=kube-dns --tail=1000 > $OUTPUT_DIR/coredns.log

echo "Logs collected in $OUTPUT_DIR"
```

---

## 10. 故障预防最佳实践

```yaml
Prevention_Best_Practices:
  监控告警:
    ✅ 部署Prometheus + Grafana
    ✅ 配置关键指标告警
    ✅ 监控集群和应用健康
    ✅ 日志聚合 (ELK/EFK)
  
  资源管理:
    ✅ 设置资源requests和limits
    ✅ 配置ResourceQuota
    ✅ 使用HPA
    ✅ 定期检查资源使用
  
  高可用:
    ✅ 多副本部署
    ✅ PodDisruptionBudget
    ✅ 跨AZ分布
    ✅ 定期备份etcd
  
  健康检查:
    ✅ 配置Liveness Probe
    ✅ 配置Readiness Probe
    ✅ 合理设置探针参数
    ✅ 优雅终止 (preStop)
  
  变更管理:
    ✅ 使用滚动更新
    ✅ 金丝雀发布
    ✅ 版本控制
    ✅ 变更前备份
  
  安全:
    ✅ RBAC最小权限
    ✅ NetworkPolicy
    ✅ Pod Security Standards
    ✅ 定期更新集群
  
  文档:
    ✅ 故障处理手册
    ✅ 运维文档
    ✅ 架构图
    ✅ 联系人清单
```

---

## 相关文档

- [Kubernetes集群部署](01_集群部署.md)
- [Kubernetes核心组件](02_核心组件.md)
- [Kubernetes应用部署](03_应用部署.md)
- [Kubernetes资源管理](04_资源管理.md)
- [Kubernetes高可用架构](../../01_虚拟化部署/05_高可用容灾/02_Kubernetes高可用架构.md)

---

**更新时间**: 2025-10-19  
**文档版本**: v1.0  
**状态**: ✅ 生产就绪
