# è¾¹ç¼˜è®¡ç®—ä¸K3s

> **è¿”å›**: [æ–°å…´æŠ€æœ¯2025é¦–é¡µ](README.md) | [å®¹å™¨åŒ–éƒ¨ç½²é¦–é¡µ](../README.md)

---

## ğŸ“‹ ç›®å½•

- [è¾¹ç¼˜è®¡ç®—ä¸K3s](#è¾¹ç¼˜è®¡ç®—ä¸k3s)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [è¾¹ç¼˜è®¡ç®—æ¦‚è¿°](#è¾¹ç¼˜è®¡ç®—æ¦‚è¿°)
    - [ä»€ä¹ˆæ˜¯è¾¹ç¼˜è®¡ç®—](#ä»€ä¹ˆæ˜¯è¾¹ç¼˜è®¡ç®—)
    - [è¾¹ç¼˜è®¡ç®—æ¶æ„](#è¾¹ç¼˜è®¡ç®—æ¶æ„)
    - [è¾¹ç¼˜è®¡ç®— vs äº‘è®¡ç®—](#è¾¹ç¼˜è®¡ç®—-vs-äº‘è®¡ç®—)
    - [è¾¹ç¼˜è®¡ç®—åº”ç”¨åœºæ™¯](#è¾¹ç¼˜è®¡ç®—åº”ç”¨åœºæ™¯)
      - [1. **5G MEC (ç§»åŠ¨è¾¹ç¼˜è®¡ç®—)**](#1-5g-mec-ç§»åŠ¨è¾¹ç¼˜è®¡ç®—)
      - [2. **å·¥ä¸šäº’è”ç½‘**](#2-å·¥ä¸šäº’è”ç½‘)
      - [3. **æ™ºæ…§åŸå¸‚**](#3-æ™ºæ…§åŸå¸‚)
      - [4. **CDNè¾¹ç¼˜ç¼“å­˜**](#4-cdnè¾¹ç¼˜ç¼“å­˜)
      - [5. **IoTè®¾å¤‡ç®¡ç†**](#5-iotè®¾å¤‡ç®¡ç†)
  - [K3sè½»é‡çº§Kubernetes](#k3sè½»é‡çº§kubernetes)
    - [K3sæ¦‚è¿°](#k3sæ¦‚è¿°)
    - [K3sæ¶æ„](#k3sæ¶æ„)
    - [K3s vs K8så¯¹æ¯”](#k3s-vs-k8så¯¹æ¯”)
    - [K3så®‰è£…éƒ¨ç½²](#k3så®‰è£…éƒ¨ç½²)
      - [å•èŠ‚ç‚¹éƒ¨ç½²](#å•èŠ‚ç‚¹éƒ¨ç½²)
      - [é«˜å¯ç”¨é›†ç¾¤éƒ¨ç½²](#é«˜å¯ç”¨é›†ç¾¤éƒ¨ç½²)
      - [ç¦»çº¿å®‰è£…](#ç¦»çº¿å®‰è£…)
    - [K3sæ ¸å¿ƒç‰¹æ€§](#k3sæ ¸å¿ƒç‰¹æ€§)
      - [å†…ç½®ç»„ä»¶](#å†…ç½®ç»„ä»¶)
      - [è½»é‡çº§å­˜å‚¨ - Local Path Provisioner](#è½»é‡çº§å­˜å‚¨---local-path-provisioner)
      - [åµŒå…¥å¼è´Ÿè½½å‡è¡¡ - ServiceLB](#åµŒå…¥å¼è´Ÿè½½å‡è¡¡---servicelb)
      - [åµŒå…¥å¼æ•°æ®åº“ - SQLite/etcd](#åµŒå…¥å¼æ•°æ®åº“---sqliteetcd)
    - [K3s 2025æ–°ç‰¹æ€§](#k3s-2025æ–°ç‰¹æ€§)
      - [1. **Kubernetes 1.28+ æ”¯æŒ**](#1-kubernetes-128-æ”¯æŒ)
      - [2. **å¢å¼ºçš„ç¦»çº¿èƒ½åŠ›**](#2-å¢å¼ºçš„ç¦»çº¿èƒ½åŠ›)
      - [3. **ARM64å®Œå…¨æ”¯æŒ**](#3-arm64å®Œå…¨æ”¯æŒ)
      - [4. **å®‰å…¨å¢å¼º**](#4-å®‰å…¨å¢å¼º)
      - [5. **é›†æˆWasmæ”¯æŒ**](#5-é›†æˆwasmæ”¯æŒ)
  - [KubeEdgeè¾¹äº‘ååŒ](#kubeedgeè¾¹äº‘ååŒ)
    - [KubeEdgeæ¦‚è¿°](#kubeedgeæ¦‚è¿°)
    - [KubeEdgeæ¶æ„](#kubeedgeæ¶æ„)
    - [KubeEdgeå®‰è£…éƒ¨ç½²](#kubeedgeå®‰è£…éƒ¨ç½²)
      - [äº‘ç«¯å®‰è£… (CloudCore)](#äº‘ç«¯å®‰è£…-cloudcore)
      - [è¾¹ç¼˜èŠ‚ç‚¹å®‰è£… (EdgeCore)](#è¾¹ç¼˜èŠ‚ç‚¹å®‰è£…-edgecore)
    - [KubeEdgeæ ¸å¿ƒç‰¹æ€§](#kubeedgeæ ¸å¿ƒç‰¹æ€§)
      - [è¾¹äº‘æ¶ˆæ¯è·¯ç”±](#è¾¹äº‘æ¶ˆæ¯è·¯ç”±)
      - [è®¾å¤‡ç®¡ç† (Device Mapper)](#è®¾å¤‡ç®¡ç†-device-mapper)
      - [è¾¹ç¼˜è‡ªæ²»](#è¾¹ç¼˜è‡ªæ²»)
    - [KubeEdge 2025æ–°ç‰¹æ€§](#kubeedge-2025æ–°ç‰¹æ€§)
      - [1. **KubeEdge 1.15+ æ–°ç‰¹æ€§**](#1-kubeedge-115-æ–°ç‰¹æ€§)
      - [2. **è¾¹ç¼˜åŸç”ŸService**](#2-è¾¹ç¼˜åŸç”Ÿservice)
      - [3. **è¾¹ç¼˜AI - Sedna**](#3-è¾¹ç¼˜ai---sedna)
  - [OpenYurtè¾¹ç¼˜è‡ªæ²»](#openyurtè¾¹ç¼˜è‡ªæ²»)
    - [OpenYurtæ¦‚è¿°](#openyurtæ¦‚è¿°)
    - [OpenYurtæ¶æ„](#openyurtæ¶æ„)
    - [OpenYurtå®‰è£…éƒ¨ç½²](#openyurtå®‰è£…éƒ¨ç½²)
    - [OpenYurtæ ¸å¿ƒç‰¹æ€§](#openyurtæ ¸å¿ƒç‰¹æ€§)
      - [1. **YurtHubæœ¬åœ°ä»£ç†**](#1-yurthubæœ¬åœ°ä»£ç†)
      - [2. **èŠ‚ç‚¹æ±  (NodePool)**](#2-èŠ‚ç‚¹æ± -nodepool)
      - [3. **UnitedDeploymentå¤šåœ°åŸŸéƒ¨ç½²**](#3-uniteddeploymentå¤šåœ°åŸŸéƒ¨ç½²)
      - [4. **æµé‡æ‹“æ‰‘ (ServiceTopology)**](#4-æµé‡æ‹“æ‰‘-servicetopology)
    - [OpenYurt 2025æ–°ç‰¹æ€§](#openyurt-2025æ–°ç‰¹æ€§)
      - [1. **OpenYurt 1.4+ æ–°ç‰¹æ€§**](#1-openyurt-14-æ–°ç‰¹æ€§)
      - [2. **è¾¹ç¼˜Ingress**](#2-è¾¹ç¼˜ingress)
  - [è¾¹ç¼˜è®¡ç®—æŠ€æœ¯å¯¹æ¯”](#è¾¹ç¼˜è®¡ç®—æŠ€æœ¯å¯¹æ¯”)
    - [K3s vs KubeEdge vs OpenYurt](#k3s-vs-kubeedge-vs-openyurt)
    - [é€‰å‹å»ºè®®](#é€‰å‹å»ºè®®)
      - [ä½¿ç”¨K3sçš„åœºæ™¯](#ä½¿ç”¨k3sçš„åœºæ™¯)
      - [ä½¿ç”¨KubeEdgeçš„åœºæ™¯](#ä½¿ç”¨kubeedgeçš„åœºæ™¯)
      - [ä½¿ç”¨OpenYurtçš„åœºæ™¯](#ä½¿ç”¨openyurtçš„åœºæ™¯)
  - [è¾¹ç¼˜è®¡ç®—æœ€ä½³å®è·µ](#è¾¹ç¼˜è®¡ç®—æœ€ä½³å®è·µ)
    - [ç½‘ç»œä¼˜åŒ–](#ç½‘ç»œä¼˜åŒ–)
      - [1. **è¾¹äº‘ç½‘ç»œä¼˜åŒ–**](#1-è¾¹äº‘ç½‘ç»œä¼˜åŒ–)
      - [2. **è¾¹ç¼˜æœåŠ¡æ‹“æ‰‘**](#2-è¾¹ç¼˜æœåŠ¡æ‹“æ‰‘)
    - [èµ„æºç®¡ç†](#èµ„æºç®¡ç†)
      - [1. **è¾¹ç¼˜èŠ‚ç‚¹èµ„æºé¢„ç•™**](#1-è¾¹ç¼˜èŠ‚ç‚¹èµ„æºé¢„ç•™)
      - [2. **è¾¹ç¼˜Podèµ„æºé™åˆ¶**](#2-è¾¹ç¼˜podèµ„æºé™åˆ¶)
    - [å®‰å…¨åŠ å›º](#å®‰å…¨åŠ å›º)
      - [1. **è¾¹ç¼˜èŠ‚ç‚¹TLSåŠ å›º**](#1-è¾¹ç¼˜èŠ‚ç‚¹tlsåŠ å›º)
      - [2. **NetworkPolicyéš”ç¦»**](#2-networkpolicyéš”ç¦»)
    - [ç›‘æ§è¿ç»´](#ç›‘æ§è¿ç»´)
      - [1. **è¾¹ç¼˜èŠ‚ç‚¹ç›‘æ§ (Prometheus)**](#1-è¾¹ç¼˜èŠ‚ç‚¹ç›‘æ§-prometheus)
      - [2. **è¾¹ç¼˜æ—¥å¿—æ”¶é›† (Fluent Bit)**](#2-è¾¹ç¼˜æ—¥å¿—æ”¶é›†-fluent-bit)
  - [è¾¹ç¼˜è®¡ç®—ç”Ÿäº§æ¡ˆä¾‹](#è¾¹ç¼˜è®¡ç®—ç”Ÿäº§æ¡ˆä¾‹)
    - [æ¡ˆä¾‹1ï¼š5G MECè¾¹ç¼˜è®¡ç®—](#æ¡ˆä¾‹15g-mecè¾¹ç¼˜è®¡ç®—)
    - [æ¡ˆä¾‹2ï¼šIoTè®¾å¤‡ç®¡ç†](#æ¡ˆä¾‹2iotè®¾å¤‡ç®¡ç†)
    - [æ¡ˆä¾‹3ï¼šCDNè¾¹ç¼˜èŠ‚ç‚¹](#æ¡ˆä¾‹3cdnè¾¹ç¼˜èŠ‚ç‚¹)
  - [è¾¹ç¼˜è®¡ç®—æœªæ¥è¶‹åŠ¿](#è¾¹ç¼˜è®¡ç®—æœªæ¥è¶‹åŠ¿)
    - [1. **è¾¹ç¼˜åŸç”Ÿ (Edge Native)**](#1-è¾¹ç¼˜åŸç”Ÿ-edge-native)
    - [2. **è¾¹ç¼˜AIä¸»æµåŒ–**](#2-è¾¹ç¼˜aiä¸»æµåŒ–)
    - [3. **5G + è¾¹ç¼˜è®¡ç®—èåˆ**](#3-5g--è¾¹ç¼˜è®¡ç®—èåˆ)
    - [4. **è¾¹ç¼˜å®‰å…¨å¢å¼º**](#4-è¾¹ç¼˜å®‰å…¨å¢å¼º)
    - [5. **è¾¹ç¼˜Serverless**](#5-è¾¹ç¼˜serverless)
  - [ç›¸å…³èµ„æº](#ç›¸å…³èµ„æº)
    - [å®˜æ–¹æ–‡æ¡£](#å®˜æ–¹æ–‡æ¡£)
    - [GitHubä»“åº“](#githubä»“åº“)
    - [ç¤¾åŒº](#ç¤¾åŒº)

---

## è¾¹ç¼˜è®¡ç®—æ¦‚è¿°

### ä»€ä¹ˆæ˜¯è¾¹ç¼˜è®¡ç®—

**è¾¹ç¼˜è®¡ç®—** (Edge Computing) æ˜¯ä¸€ç§åˆ†å¸ƒå¼è®¡ç®—æ¶æ„ï¼Œå°†è®¡ç®—ã€å­˜å‚¨å’Œç½‘ç»œèƒ½åŠ›ä»é›†ä¸­å¼æ•°æ®ä¸­å¿ƒ**ä¸‹æ²‰åˆ°ç½‘ç»œè¾¹ç¼˜**ï¼Œæ›´é è¿‘æ•°æ®æºå’Œç”¨æˆ·ã€‚

**æ ¸å¿ƒç†å¿µ**:

```text
ä¼ ç»Ÿäº‘è®¡ç®—:  è®¾å¤‡ â†’ äº‘æ•°æ®ä¸­å¿ƒ â†’ å¤„ç† â†’ è¿”å›ç»“æœ (å»¶è¿Ÿ: 100-500ms)
è¾¹ç¼˜è®¡ç®—:    è®¾å¤‡ â†’ è¾¹ç¼˜èŠ‚ç‚¹ â†’ æœ¬åœ°å¤„ç† â†’ è¿”å›ç»“æœ (å»¶è¿Ÿ: 1-10ms)
```

**ä»·å€¼**:

- âš¡ **ä½å»¶è¿Ÿ**: æœ¬åœ°å¤„ç†ï¼Œå»¶è¿Ÿé™ä½10-100å€
- ğŸ’° **èŠ‚çœå¸¦å®½**: æ•°æ®æœ¬åœ°è¿‡æ»¤ï¼Œå‡å°‘90%ä»¥ä¸Šäº‘ç«¯ä¼ è¾“
- ğŸ”’ **æ•°æ®ä¸»æƒ**: æ•æ„Ÿæ•°æ®ä¸å‡ºè¾¹ç¼˜ï¼Œæ»¡è¶³åˆè§„è¦æ±‚
- ğŸŒ **ç¦»çº¿è‡ªæ²»**: è¾¹ç¼˜èŠ‚ç‚¹æ–­ç½‘ä¹Ÿèƒ½ç»§ç»­è¿è¡Œ
- ğŸ“ˆ **å¯æ‰©å±•**: æ°´å¹³æ‰©å±•è¾¹ç¼˜èŠ‚ç‚¹

---

### è¾¹ç¼˜è®¡ç®—æ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         äº‘æ•°æ®ä¸­å¿ƒ                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Kubernetesé›†ç¾¤ (ä¸­å¿ƒäº‘)                             â”‚   â”‚
â”‚  â”‚   - åº”ç”¨ç¼–æ’ç®¡ç†                                      â”‚   â”‚
â”‚  â”‚   - è¾¹ç¼˜èŠ‚ç‚¹æ³¨å†Œ                                      â”‚   â”‚
â”‚  â”‚   - é…ç½®ä¸‹å‘                                          â”‚   â”‚
â”‚  â”‚   - æ•°æ®æ±‡èšåˆ†æ                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†• è¾¹äº‘é€šä¿¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         è¾¹ç¼˜åŒºåŸŸ                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ è¾¹ç¼˜èŠ‚ç‚¹1     â”‚  â”‚ è¾¹ç¼˜èŠ‚ç‚¹2     â”‚  â”‚ è¾¹ç¼˜èŠ‚ç‚¹3     â”‚      â”‚
â”‚  â”‚ (K3s/KubeEdge)â”‚  â”‚ (K3s/KubeEdge)â”‚  â”‚ (K3s/KubeEdge)â”‚      â”‚
â”‚  â”‚ - å®¹å™¨è¿è¡Œæ—¶  â”‚  â”‚ - å®¹å™¨è¿è¡Œæ—¶  â”‚  â”‚ - å®¹å™¨è¿è¡Œæ—¶  â”‚      â”‚
â”‚  â”‚ - æœ¬åœ°å­˜å‚¨    â”‚  â”‚ - æœ¬åœ°å­˜å‚¨    â”‚  â”‚ - æœ¬åœ°å­˜å‚¨    â”‚      â”‚
â”‚  â”‚ - è¾¹ç¼˜åº”ç”¨    â”‚  â”‚ - è¾¹ç¼˜åº”ç”¨    â”‚  â”‚ - è¾¹ç¼˜åº”ç”¨    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â†•                 â†•                 â†•                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  IoTè®¾å¤‡      â”‚  â”‚  æ‘„åƒå¤´       â”‚  â”‚  ä¼ æ„Ÿå™¨       â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ¶æ„å±‚æ¬¡**:

1. **äº‘ç«¯å±‚**: ä¸­å¿ƒKubernetesé›†ç¾¤ï¼Œè´Ÿè´£å…¨å±€ç®¡ç†ã€åº”ç”¨ç¼–æ’ã€æ•°æ®æ±‡èš
2. **è¾¹ç¼˜å±‚**: è¾¹ç¼˜KubernetesèŠ‚ç‚¹ (K3s/KubeEdge/OpenYurt)ï¼Œæœ¬åœ°è®¡ç®—å’Œå­˜å‚¨
3. **è®¾å¤‡å±‚**: IoTè®¾å¤‡ã€ä¼ æ„Ÿå™¨ã€æ‘„åƒå¤´ï¼Œæ•°æ®é‡‡é›†

---

### è¾¹ç¼˜è®¡ç®— vs äº‘è®¡ç®—

| ç»´åº¦ | äº‘è®¡ç®— | è¾¹ç¼˜è®¡ç®— | ä¼˜åŠ¿ |
|-----|--------|---------|------|
| **å»¶è¿Ÿ** | 100-500ms | 1-10ms | è¾¹ç¼˜ä½10-100å€ |
| **å¸¦å®½** | é«˜å¸¦å®½éœ€æ±‚ | ä½å¸¦å®½ | è¾¹ç¼˜èŠ‚çœ90%+ |
| **æ•°æ®ä¸»æƒ** | æ•°æ®ä¸Šäº‘ | æ•°æ®æœ¬åœ° | è¾¹ç¼˜åˆè§„æ€§å¥½ |
| **ç¦»çº¿èƒ½åŠ›** | ä¾èµ–ç½‘ç»œ | è‡ªæ²»è¿è¡Œ | è¾¹ç¼˜å®¹é”™æ€§å¼º |
| **è®¡ç®—èƒ½åŠ›** | é«˜æ€§èƒ½ | ä¸­ä½æ€§èƒ½ | äº‘ç«¯ç®—åŠ›å¼º |
| **æˆæœ¬** | é«˜ (å¸¦å®½+è®¡ç®—) | ä½ (æœ¬åœ°å¤„ç†) | è¾¹ç¼˜æˆæœ¬ä½ |
| **ç®¡ç†å¤æ‚åº¦** | ä½ | ä¸­é«˜ | äº‘ç«¯ç®¡ç†ç®€å• |

**æœ€ä½³å®è·µ**: è¾¹äº‘ååŒ

- **è¾¹ç¼˜å¤„ç†**: å®æ—¶æ€§è¦æ±‚é«˜ã€æ•°æ®é‡å¤§ã€æ•æ„Ÿæ•°æ®
- **äº‘ç«¯å¤„ç†**: å¤æ‚è®¡ç®—ã€æ•°æ®æ±‡èšåˆ†æã€æ¨¡å‹è®­ç»ƒ

---

### è¾¹ç¼˜è®¡ç®—åº”ç”¨åœºæ™¯

#### 1. **5G MEC (ç§»åŠ¨è¾¹ç¼˜è®¡ç®—)**

- **åœºæ™¯**: 5GåŸºç«™è¾¹ç¼˜è®¡ç®—
- **éœ€æ±‚**: è¶…ä½å»¶è¿Ÿ (<10ms)ã€é«˜å¹¶å‘ã€ç§»åŠ¨æ€§
- **åº”ç”¨**: AR/VRã€äº‘æ¸¸æˆã€è‡ªåŠ¨é©¾é©¶

#### 2. **å·¥ä¸šäº’è”ç½‘**

- **åœºæ™¯**: å·¥å‚è½¦é—´ã€ç”Ÿäº§çº¿
- **éœ€æ±‚**: å®æ—¶æ§åˆ¶ã€æ•°æ®å®‰å…¨ã€ç¦»çº¿è‡ªæ²»
- **åº”ç”¨**: è®¾å¤‡ç›‘æ§ã€é¢„æµ‹æ€§ç»´æŠ¤ã€è´¨é‡æ£€æµ‹

#### 3. **æ™ºæ…§åŸå¸‚**

- **åœºæ™¯**: äº¤é€šç›‘æ§ã€å…¬å…±å®‰å…¨
- **éœ€æ±‚**: è§†é¢‘åˆ†æã€å®æ—¶å‘Šè­¦ã€æ•°æ®æœ¬åœ°åŒ–
- **åº”ç”¨**: è½¦ç‰Œè¯†åˆ«ã€äººè„¸è¯†åˆ«ã€äº¤é€šæµé‡åˆ†æ

#### 4. **CDNè¾¹ç¼˜ç¼“å­˜**

- **åœºæ™¯**: å†…å®¹åˆ†å‘ç½‘ç»œ
- **éœ€æ±‚**: ä½å»¶è¿Ÿã€é«˜ååã€å°±è¿‘è®¿é—®
- **åº”ç”¨**: è§†é¢‘æµã€é™æ€èµ„æºã€åŠ¨æ€åŠ é€Ÿ

#### 5. **IoTè®¾å¤‡ç®¡ç†**

- **åœºæ™¯**: æ™ºèƒ½å®¶å±…ã€æ™ºèƒ½å†œä¸š
- **éœ€æ±‚**: è®¾å¤‡æ¥å…¥ã€åè®®è½¬æ¢ã€è¾¹ç¼˜AI
- **åº”ç”¨**: è®¾å¤‡ç›‘æ§ã€æ•°æ®é‡‡é›†ã€è¾¹ç¼˜æ¨ç†

---

## K3sè½»é‡çº§Kubernetes

### K3sæ¦‚è¿°

**K3s** æ˜¯ **Rancher Labs** å¼€å‘çš„è½»é‡çº§Kuberneteså‘è¡Œç‰ˆï¼Œä¸“ä¸º**è¾¹ç¼˜è®¡ç®—**ã€**IoT**å’Œ**èµ„æºå—é™ç¯å¢ƒ**è®¾è®¡ã€‚

**å®˜ç½‘**: https://k3s.io/  
**GitHub**: https://github.com/k3s-io/k3s  
**CNCFçŠ¶æ€**: Sandbox â†’ Graduated (2023)

**æ ¸å¿ƒç‰¹ç‚¹**:

- âš¡ **æè‡´è½»é‡**: äºŒè¿›åˆ¶æ–‡ä»¶<100MBï¼Œå†…å­˜å ç”¨<512MB
- ğŸš€ **å¿«é€Ÿå¯åŠ¨**: 30ç§’å†…å¯åŠ¨å®Œæ•´é›†ç¾¤
- ğŸ“¦ **å†…ç½®ç»„ä»¶**: Traefikã€CoreDNSã€ServiceLBã€Local Path Provisioner
- ğŸ”§ **ç®€åŒ–æ“ä½œ**: å•ä¸€äºŒè¿›åˆ¶ï¼Œä¸€æ¡å‘½ä»¤å®‰è£…
- ğŸŒ **è·¨å¹³å°**: x86_64ã€ARM64ã€ARMv7

---

### K3sæ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     K3s Server Node                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  K3s Server (å•ä¸€äºŒè¿›åˆ¶)                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  Kubernetes Control Plane                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - kube-apiserver                               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - kube-controller-manager                      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - kube-scheduler                               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - embedded etcd/SQLite (æ•°æ®å­˜å‚¨)             â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  Kubernetes Data Plane                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - kubelet                                      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - containerd (å®¹å™¨è¿è¡Œæ—¶)                      â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  å†…ç½®ç»„ä»¶                                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Traefik Ingress Controller                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - CoreDNS                                      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - ServiceLB (Klipper-lb)                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Local Path Provisioner                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Network Policy Controller (é»˜è®¤ç¦ç”¨)         â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     K3s Agent Nodes                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Agent Node 1 â”‚  â”‚ Agent Node 2 â”‚  â”‚ Agent Node 3 â”‚    â”‚
â”‚  â”‚ - kubelet    â”‚  â”‚ - kubelet    â”‚  â”‚ - kubelet    â”‚    â”‚
â”‚  â”‚ - containerd â”‚  â”‚ - containerd â”‚  â”‚ - containerd â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**K3s vs K8sæ¶æ„å·®å¼‚**:

| ç»„ä»¶ | K8s | K3s | è¯´æ˜ |
|-----|-----|-----|------|
| **äºŒè¿›åˆ¶** | å¤šä¸ªç»„ä»¶åˆ†ç¦» | å•ä¸€äºŒè¿›åˆ¶ | K3sç®€åŒ–éƒ¨ç½² |
| **æ•°æ®å­˜å‚¨** | etcd | SQLite/etcd | K3sé»˜è®¤SQLite |
| **å®¹å™¨è¿è¡Œæ—¶** | Docker/containerd | containerd | K3sä»…æ”¯æŒcontainerd |
| **Ingress** | éœ€æ‰‹åŠ¨å®‰è£… | Traefikå†…ç½® | K3så¼€ç®±å³ç”¨ |
| **LB** | éœ€å¤–éƒ¨LB | ServiceLBå†…ç½® | K3sè‡ªå¸¦LB |
| **å­˜å‚¨** | éœ€æ‰‹åŠ¨é…ç½® | Local Pathå†…ç½® | K3sè‡ªåŠ¨PV |

---

### K3s vs K8så¯¹æ¯”

| ç»´åº¦ | K3s | K8s | ä¼˜åŠ¿ |
|-----|-----|-----|------|
| **å®‰è£…å¤æ‚åº¦** | â­ (ä¸€æ¡å‘½ä»¤) | â­â­â­â­ | K3sæç®€ |
| **èµ„æºå ç”¨** | <512MBå†…å­˜ | >2GBå†…å­˜ | K3sçœèµ„æº |
| **å¯åŠ¨é€Ÿåº¦** | <30s | >5min | K3så¿«10å€ |
| **åŠŸèƒ½å®Œæ•´æ€§** | â­â­â­â­ | â­â­â­â­â­ | K8sæ›´å…¨ |
| **ç”Ÿæ€æˆç†Ÿåº¦** | â­â­â­â­ | â­â­â­â­â­ | K8sæœ€æˆç†Ÿ |
| **é€‚ç”¨åœºæ™¯** | è¾¹ç¼˜/IoT | å¤§è§„æ¨¡äº‘ | å„æœ‰ä¼˜åŠ¿ |

**å…¼å®¹æ€§**: K3s **100%å…¼å®¹** Kubernetes APIï¼Œå¯è¿è¡Œæ‰€æœ‰æ ‡å‡†K8så·¥ä½œè´Ÿè½½ã€‚

---

### K3så®‰è£…éƒ¨ç½²

#### å•èŠ‚ç‚¹éƒ¨ç½²

```bash
#!/bin/bash
# install-k3s-single.sh - K3så•èŠ‚ç‚¹å¿«é€Ÿå®‰è£… (2025)

set -e

echo "=== K3så•èŠ‚ç‚¹å®‰è£… ==="

# 1. ç³»ç»Ÿæ£€æŸ¥
echo "1. æ£€æŸ¥ç³»ç»Ÿç¯å¢ƒ..."
uname -a
free -h

# 2. å®‰è£…K3s Server (ä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿ)
echo "2. å®‰è£…K3s Server..."
curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | \
  INSTALL_K3S_MIRROR=cn \
  INSTALL_K3S_VERSION="v1.28.5+k3s1" \
  sh -s - server \
    --write-kubeconfig-mode 644 \
    --disable traefik \
    --disable servicelb \
    --kube-apiserver-arg='feature-gates=MixedProtocolLBService=true' \
    --node-name edge-master

# 3. éªŒè¯å®‰è£…
echo "3. éªŒè¯K3s..."
export KUBECONFIG=/etc/rancher/k3s/k3s.yaml
kubectl get nodes
kubectl get pods -A

# 4. é…ç½®kubectl (å¯é€‰)
echo "4. é…ç½®kubectl..."
mkdir -p ~/.kube
cp /etc/rancher/k3s/k3s.yaml ~/.kube/config
chmod 600 ~/.kube/config

# 5. å®‰è£…Helm (å¯é€‰)
echo "5. å®‰è£…Helm..."
curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash

# 6. æ˜¾ç¤ºèŠ‚ç‚¹Token (ç”¨äºæ·»åŠ AgentèŠ‚ç‚¹)
echo ""
echo "=== K3så®‰è£…å®Œæˆ ==="
echo "Node Token (ä¿å­˜ç”¨äºæ·»åŠ AgentèŠ‚ç‚¹):"
cat /var/lib/rancher/k3s/server/node-token
echo ""
echo "æ·»åŠ AgentèŠ‚ç‚¹å‘½ä»¤:"
echo "curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | \\"
echo "  INSTALL_K3S_MIRROR=cn \\"
echo "  K3S_URL=https://$(hostname -I | awk '{print $1}'):6443 \\"
echo "  K3S_TOKEN=<ä¸Šé¢çš„Token> sh -"
```

#### é«˜å¯ç”¨é›†ç¾¤éƒ¨ç½²

```bash
#!/bin/bash
# install-k3s-ha.sh - K3sé«˜å¯ç”¨é›†ç¾¤å®‰è£… (åµŒå…¥å¼etcd)

set -e

echo "=== K3sé«˜å¯ç”¨é›†ç¾¤å®‰è£… (åµŒå…¥å¼etcd) ==="

# ======== ç¬¬ä¸€ä¸ªServerèŠ‚ç‚¹ ========
# åœ¨ server1 ä¸Šæ‰§è¡Œ
echo "åœ¨ç¬¬ä¸€ä¸ªServerèŠ‚ç‚¹ä¸Šæ‰§è¡Œ:"
echo "---"
cat <<'EOF'
curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | \
  INSTALL_K3S_MIRROR=cn \
  INSTALL_K3S_VERSION="v1.28.5+k3s1" \
  sh -s - server \
    --cluster-init \
    --write-kubeconfig-mode 644 \
    --tls-san load-balancer.example.com \
    --node-name server1
EOF

# è·å–Token
# cat /var/lib/rancher/k3s/server/node-token

# ======== ç¬¬äºŒã€ä¸‰ä¸ªServerèŠ‚ç‚¹ ========
# åœ¨ server2, server3 ä¸Šæ‰§è¡Œ
echo ""
echo "åœ¨ç¬¬äºŒã€ä¸‰ä¸ªServerèŠ‚ç‚¹ä¸Šæ‰§è¡Œ:"
echo "---"
cat <<'EOF'
curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | \
  INSTALL_K3S_MIRROR=cn \
  INSTALL_K3S_VERSION="v1.28.5+k3s1" \
  K3S_TOKEN=<ä»server1è·å–çš„Token> \
  sh -s - server \
    --server https://<server1-ip>:6443 \
    --write-kubeconfig-mode 644 \
    --tls-san load-balancer.example.com \
    --node-name server2  # server3æ”¹ä¸ºserver3
EOF

# ======== AgentèŠ‚ç‚¹ ========
echo ""
echo "æ·»åŠ AgentèŠ‚ç‚¹ (åœ¨agentèŠ‚ç‚¹ä¸Šæ‰§è¡Œ):"
echo "---"
cat <<'EOF'
curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | \
  INSTALL_K3S_MIRROR=cn \
  INSTALL_K3S_VERSION="v1.28.5+k3s1" \
  K3S_URL=https://load-balancer.example.com:6443 \
  K3S_TOKEN=<Token> \
  sh -
EOF

# ======== éªŒè¯é›†ç¾¤ ========
echo ""
echo "éªŒè¯é›†ç¾¤ (åœ¨ä»»ä¸€ServerèŠ‚ç‚¹æ‰§è¡Œ):"
echo "kubectl get nodes"
echo "kubectl get pods -A"
```

**é«˜å¯ç”¨æ¶æ„**:

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Load Balancer â”‚  (å¯é€‰: HAProxy/Nginx)
â”‚  VIP: 10.0.0.10â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     K3s Server Nodes (HA)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚Server1 â”‚  â”‚Server2 â”‚  â”‚Server3 â”‚
â”‚  â”‚etcd    â”‚  â”‚etcd    â”‚  â”‚etcd    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     K3s Agent Nodes                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚Agent1  â”‚  â”‚Agent2  â”‚  â”‚Agent3  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ç¦»çº¿å®‰è£…

```bash
#!/bin/bash
# install-k3s-airgap.sh - K3sç¦»çº¿å®‰è£…

set -e

echo "=== K3sç¦»çº¿å®‰è£… ==="

# å‰æ: å·²ä¸‹è½½ä»¥ä¸‹æ–‡ä»¶å¹¶ä¼ è¾“åˆ°ç¦»çº¿ç¯å¢ƒ
# - k3s (äºŒè¿›åˆ¶)
# - k3s-airgap-images-amd64.tar.gz (é•œåƒåŒ…)
# - install.sh (å®‰è£…è„šæœ¬)

# 1. æ”¾ç½®äºŒè¿›åˆ¶
sudo cp k3s /usr/local/bin/
sudo chmod +x /usr/local/bin/k3s

# 2. åˆ›å»ºé•œåƒç›®å½•å¹¶è§£å‹
sudo mkdir -p /var/lib/rancher/k3s/agent/images/
sudo cp k3s-airgap-images-amd64.tar.gz /var/lib/rancher/k3s/agent/images/

# 3. è¿è¡Œå®‰è£…è„šæœ¬
INSTALL_K3S_SKIP_DOWNLOAD=true ./install.sh

# 4. éªŒè¯
export KUBECONFIG=/etc/rancher/k3s/k3s.yaml
kubectl get nodes
```

---

### K3sæ ¸å¿ƒç‰¹æ€§

#### å†…ç½®ç»„ä»¶

**1. Traefik Ingress Controller**:

```yaml
# traefik-ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: example-ingress
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: web,websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
spec:
  rules:
  - host: app.example.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: app-service
            port:
              number: 80
```

**ç¦ç”¨Traefik** (å¦‚æœä½¿ç”¨å…¶ä»–Ingress):

```bash
curl -sfL https://get.k3s.io | sh -s - --disable traefik
```

#### è½»é‡çº§å­˜å‚¨ - Local Path Provisioner

**è‡ªåŠ¨åˆ›å»ºæœ¬åœ°å­˜å‚¨PV**:

```yaml
# local-pvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: local-path-pvc
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: local-path  # K3så†…ç½®
  resources:
    requests:
      storage: 10Gi
```

**å­˜å‚¨è·¯å¾„**: `/var/lib/rancher/k3s/storage/`

#### åµŒå…¥å¼è´Ÿè½½å‡è¡¡ - ServiceLB

**è‡ªåŠ¨ä¸ºLoadBalancerç±»å‹Serviceåˆ†é…IP**:

```yaml
# loadbalancer-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: nginx-lb
spec:
  type: LoadBalancer
  selector:
    app: nginx
  ports:
  - protocol: TCP
    port: 80
    targetPort: 80
```

**åŸç†**: Klipper-lbåœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šå¯åŠ¨DaemonSetï¼Œç›‘å¬åˆ†é…çš„ç«¯å£ã€‚

#### åµŒå…¥å¼æ•°æ®åº“ - SQLite/etcd

**SQLite** (é»˜è®¤):

- å•èŠ‚ç‚¹éƒ¨ç½²
- é›¶é…ç½®
- è‡ªåŠ¨å¤‡ä»½åˆ° `/var/lib/rancher/k3s/server/db/`

**åµŒå…¥å¼etcd** (HA):

- é«˜å¯ç”¨é›†ç¾¤
- è‡ªåŠ¨ç®¡ç†
- æ— éœ€å¤–éƒ¨etcd

---

### K3s 2025æ–°ç‰¹æ€§

#### 1. **Kubernetes 1.28+ æ”¯æŒ**

- Gateway API 1.0 GA
- SIG Storageå¢å¼º
- Jobèµ„æºæ”¹è¿›

#### 2. **å¢å¼ºçš„ç¦»çº¿èƒ½åŠ›**

- é•œåƒé¢„åŠ è½½ä¼˜åŒ–
- Air-gappedå®‰è£…ç®€åŒ–

#### 3. **ARM64å®Œå…¨æ”¯æŒ**

- Raspberry Pi 4/5
- NVIDIA Jetsonç³»åˆ—
- Apple Silicon (M1/M2/M3)

#### 4. **å®‰å…¨å¢å¼º**

- FIPS 140-2åˆè§„ç‰ˆæœ¬
- SELinux/AppArmorå®Œå…¨æ”¯æŒ
- CIS Hardeningè‡ªåŠ¨åŒ–

#### 5. **é›†æˆWasmæ”¯æŒ**

```bash
# å®‰è£…æ”¯æŒWasmçš„K3s
curl -sfL https://get.k3s.io | sh -s - \
  --container-runtime-endpoint unix:///run/containerd/containerd.sock

# é…ç½®containerdæ”¯æŒWasm
kubectl apply -f wasm-runtimeclass.yaml
```

---

## KubeEdgeè¾¹äº‘ååŒ

### KubeEdgeæ¦‚è¿°

**KubeEdge** æ˜¯ **åä¸ºäº‘å¼€æº** çš„ **è¾¹ç¼˜è®¡ç®—å¹³å°**ï¼Œå°† Kubernetes çš„å®¹å™¨ç¼–æ’èƒ½åŠ›å»¶ä¼¸åˆ°è¾¹ç¼˜ã€‚

**å®˜ç½‘**: https://kubeedge.io/  
**GitHub**: https://github.com/kubeedge/kubeedge  
**CNCFçŠ¶æ€**: Sandbox â†’ Incubating (2020) â†’ Graduated (2023)

**æ ¸å¿ƒç‰¹ç‚¹**:

- â˜ï¸ **è¾¹äº‘ååŒ**: äº‘ç«¯KubernetesåŸç”Ÿç®¡ç†è¾¹ç¼˜èŠ‚ç‚¹
- ğŸ“¡ **å¯é é€šä¿¡**: è¾¹äº‘æ¶ˆæ¯æ€»çº¿ï¼Œæ”¯æŒç¦»çº¿åœºæ™¯
- ğŸ”Œ **è®¾å¤‡ç®¡ç†**: å†…ç½®Device Mapperï¼Œç®¡ç†IoTè®¾å¤‡
- ğŸ§  **è¾¹ç¼˜æ™ºèƒ½**: è¾¹ç¼˜AIæ¨ç†æ¡†æ¶ (KubeEdge-Sedna)
- ğŸŒ **è¾¹ç¼˜è‡ªæ²»**: æ–­ç½‘åè¾¹ç¼˜èŠ‚ç‚¹ç»§ç»­è¿è¡Œ

---

### KubeEdgeæ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Cloud (äº‘ç«¯)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Kubernetesé›†ç¾¤                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  CloudCore (KubeEdgeäº‘ç«¯ç»„ä»¶)                  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  - CloudHub: WebSocketæœåŠ¡å™¨                   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  - EdgeController: è¾¹ç¼˜èŠ‚ç‚¹ç®¡ç†                â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  - DeviceController: è®¾å¤‡ç®¡ç†                  â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  Kubernetes API Server                         â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†• WebSocket/QUIC
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Edge (è¾¹ç¼˜)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Edge Node 1  â”‚  â”‚ Edge Node 2  â”‚  â”‚ Edge Node 3  â”‚      â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚
â”‚  â”‚ â”‚EdgeCore  â”‚ â”‚  â”‚ â”‚EdgeCore  â”‚ â”‚  â”‚ â”‚EdgeCore  â”‚ â”‚      â”‚
â”‚  â”‚ â”‚- EdgeHub â”‚ â”‚  â”‚ â”‚- EdgeHub â”‚ â”‚  â”‚ â”‚- EdgeHub â”‚ â”‚      â”‚
â”‚  â”‚ â”‚- Edged   â”‚ â”‚  â”‚ â”‚- Edged   â”‚ â”‚  â”‚ â”‚- Edged   â”‚ â”‚      â”‚
â”‚  â”‚ â”‚- MetaManagerâ”‚ â”‚ â”‚- MetaManagerâ”‚ â”‚ â”‚- MetaManagerâ”‚ â”‚   â”‚
â”‚  â”‚ â”‚- DeviceTwinâ”‚ â”‚  â”‚- DeviceTwinâ”‚ â”‚  â”‚- DeviceTwinâ”‚ â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚
â”‚  â”‚ containerd   â”‚  â”‚ containerd   â”‚  â”‚ containerd   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â†•                 â†•                 â†•                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  IoTè®¾å¤‡      â”‚  â”‚  ä¼ æ„Ÿå™¨       â”‚  â”‚  æ‘„åƒå¤´       â”‚      â”‚
â”‚  â”‚  (MQTT/Modbus)â”‚  â”‚              â”‚  â”‚              â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒç»„ä»¶**:

**äº‘ç«¯ (CloudCore)**:

- **CloudHub**: è¾¹äº‘é€šä¿¡æœåŠ¡å™¨ (WebSocket/QUIC)
- **EdgeController**: åŒæ­¥K8sèµ„æºåˆ°è¾¹ç¼˜
- **DeviceController**: è®¾å¤‡CRDç®¡ç†

**è¾¹ç¼˜ (EdgeCore)**:

- **EdgeHub**: è¾¹äº‘é€šä¿¡å®¢æˆ·ç«¯
- **Edged**: è½»é‡çº§Kubeletï¼Œç®¡ç†å®¹å™¨ç”Ÿå‘½å‘¨æœŸ
- **MetaManager**: æœ¬åœ°å…ƒæ•°æ®å­˜å‚¨ (SQLite)ï¼Œå®ç°è¾¹ç¼˜è‡ªæ²»
- **DeviceTwin**: è®¾å¤‡çŠ¶æ€åŒæ­¥

---

### KubeEdgeå®‰è£…éƒ¨ç½²

#### äº‘ç«¯å®‰è£… (CloudCore)

```bash
#!/bin/bash
# install-kubeedge-cloud.sh - KubeEdgeäº‘ç«¯å®‰è£… (2025)

set -e

echo "=== KubeEdge CloudCoreå®‰è£… ==="

# å‰æ: å·²æœ‰Kubernetesé›†ç¾¤ (1.24+)

# 1. å®‰è£…keadm (KubeEdgeç®¡ç†å·¥å…·)
echo "1. ä¸‹è½½keadm..."
KUBEEDGE_VERSION="v1.15.0"
wget https://github.com/kubeedge/kubeedge/releases/download/${KUBEEDGE_VERSION}/keadm-${KUBEEDGE_VERSION}-linux-amd64.tar.gz
tar -zxvf keadm-${KUBEEDGE_VERSION}-linux-amd64.tar.gz
sudo cp keadm-${KUBEEDGE_VERSION}-linux-amd64/keadm/keadm /usr/local/bin/
sudo chmod +x /usr/local/bin/keadm

# 2. åˆå§‹åŒ–CloudCore
echo "2. åˆå§‹åŒ–CloudCore..."
sudo keadm init --advertise-address="<äº‘ç«¯å…¬ç½‘IP>" --profile version=${KUBEEDGE_VERSION}

# 3. éªŒè¯CloudCore
echo "3. éªŒè¯CloudCore..."
kubectl get pods -n kubeedge

# 4. è·å–è¾¹ç¼˜èŠ‚ç‚¹Token
echo "4. è·å–è¾¹ç¼˜èŠ‚ç‚¹Token..."
sudo keadm gettoken

# è¾“å‡ºç¤ºä¾‹:
# eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

echo ""
echo "=== CloudCoreå®‰è£…å®Œæˆ ==="
echo "Token (ä¿å­˜ç”¨äºè¾¹ç¼˜èŠ‚ç‚¹åŠ å…¥):"
sudo keadm gettoken
```

#### è¾¹ç¼˜èŠ‚ç‚¹å®‰è£… (EdgeCore)

```bash
#!/bin/bash
# install-kubeedge-edge.sh - KubeEdgeè¾¹ç¼˜èŠ‚ç‚¹å®‰è£…

set -e

echo "=== KubeEdge EdgeCoreå®‰è£… ==="

# 1. ä¸‹è½½keadm
echo "1. ä¸‹è½½keadm..."
KUBEEDGE_VERSION="v1.15.0"
wget https://github.com/kubeedge/kubeedge/releases/download/${KUBEEDGE_VERSION}/keadm-${KUBEEDGE_VERSION}-linux-amd64.tar.gz
tar -zxvf keadm-${KUBEEDGE_VERSION}-linux-amd64.tar.gz
sudo cp keadm-${KUBEEDGE_VERSION}-linux-amd64/keadm/keadm /usr/local/bin/
sudo chmod +x /usr/local/bin/keadm

# 2. åŠ å…¥è¾¹ç¼˜èŠ‚ç‚¹
echo "2. åŠ å…¥è¾¹ç¼˜èŠ‚ç‚¹..."
sudo keadm join \
  --cloudcore-ipport=<äº‘ç«¯IP>:10000 \
  --edgenode-name=edge-node-1 \
  --token=<ä»äº‘ç«¯è·å–çš„Token> \
  --cgroupdriver=systemd

# 3. éªŒè¯EdgeCore
echo "3. éªŒè¯EdgeCore..."
sudo systemctl status edgecore

# 4. åœ¨äº‘ç«¯éªŒè¯èŠ‚ç‚¹åŠ å…¥
echo "4. åœ¨äº‘ç«¯éªŒè¯ (åœ¨äº‘ç«¯æ‰§è¡Œ):"
echo "kubectl get nodes"

echo ""
echo "=== EdgeCoreå®‰è£…å®Œæˆ ==="
```

---

### KubeEdgeæ ¸å¿ƒç‰¹æ€§

#### è¾¹äº‘æ¶ˆæ¯è·¯ç”±

**å¯é é€šä¿¡æœºåˆ¶**:

```text
äº‘ç«¯ (K8s API) â†’ EdgeController â†’ CloudHub (WebSocket) â†’ EdgeHub â†’ Edged â†’ å®¹å™¨
                                        â†“
                                  MetaManager (æœ¬åœ°ç¼“å­˜)
                                        â†“
                                  ç¦»çº¿è‡ªæ²»è¿è¡Œ
```

**ç‰¹ç‚¹**:

- WebSocketé•¿è¿æ¥ (æ”¯æŒQUICåè®®)
- æ–­çº¿é‡è¿è‡ªåŠ¨å¤„ç†
- æ¶ˆæ¯æŒä¹…åŒ–é˜Ÿåˆ—
- è¾¹ç¼˜æœ¬åœ°ç¼“å­˜

#### è®¾å¤‡ç®¡ç† (Device Mapper)

**1. å®šä¹‰è®¾å¤‡æ¨¡å‹**:

```yaml
# device-model.yaml
apiVersion: devices.kubeedge.io/v1alpha2
kind: DeviceModel
metadata:
  name: temperature-sensor-model
  namespace: default
spec:
  properties:
  - name: temperature
    description: "Temperature in Celsius"
    type:
      int:
        accessMode: ReadOnly
        minimum: -50
        maximum: 100
        unit: "Celsius"
  - name: humidity
    description: "Humidity percentage"
    type:
      int:
        accessMode: ReadOnly
        minimum: 0
        maximum: 100
        unit: "percent"
```

**2. å®šä¹‰è®¾å¤‡å®ä¾‹**:

```yaml
# device-instance.yaml
apiVersion: devices.kubeedge.io/v1alpha2
kind: Device
metadata:
  name: sensor-01
  namespace: default
spec:
  deviceModelRef:
    name: temperature-sensor-model
  nodeSelector:
    nodeSelectorTerms:
    - matchExpressions:
      - key: kubernetes.io/hostname
        operator: In
        values:
        - edge-node-1
  protocol:
    modbus:
      slaveID: 1
    common:
      com:
        serialPort: "/dev/ttyUSB0"
        baudRate: 9600
        dataBits: 8
        parity: "none"
        stopBits: 1
```

**3. Device Mapperå®ç°**:

æ”¯æŒçš„åè®®:

- **MQTT** (å¸¸ç”¨äºIoT)
- **Modbus** (å·¥ä¸šè®¾å¤‡)
- **OPC-UA** (å·¥ä¸šè‡ªåŠ¨åŒ–)
- **Bluetooth** (è“ç‰™è®¾å¤‡)
- **è‡ªå®šä¹‰Mapper**

**æŸ¥è¯¢è®¾å¤‡çŠ¶æ€**:

```bash
# æŸ¥çœ‹è®¾å¤‡åˆ—è¡¨
kubectl get devices -n default

# æŸ¥çœ‹è®¾å¤‡è¯¦æƒ…
kubectl describe device sensor-01

# æŸ¥çœ‹è®¾å¤‡ä¸ŠæŠ¥çš„æ•°æ®
kubectl get device sensor-01 -o jsonpath='{.status.twins}'
```

#### è¾¹ç¼˜è‡ªæ²»

**ç¦»çº¿è¿è¡Œèƒ½åŠ›**:

```yaml
# edge-autonomous-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: edge-app
spec:
  replicas: 1
  selector:
    matchLabels:
      app: edge-app
  template:
    metadata:
      labels:
        app: edge-app
    spec:
      nodeSelector:
        node-role.kubernetes.io/edge: ""
      containers:
      - name: app
        image: nginx:alpine
        imagePullPolicy: IfNotPresent  # ä½¿ç”¨æœ¬åœ°é•œåƒ
```

**è‡ªæ²»æœºåˆ¶**:

1. **æœ¬åœ°ç¼“å­˜**: MetaManagerç¼“å­˜Podã€Serviceç­‰å…ƒæ•°æ®åˆ°SQLite
2. **é•œåƒé¢„æ‹‰å–**: æå‰æ‹‰å–é•œåƒåˆ°è¾¹ç¼˜èŠ‚ç‚¹
3. **æ–­ç½‘è¿è¡Œ**: è¾¹ç¼˜èŠ‚ç‚¹æ–­ç½‘åï¼ŒåŸºäºæœ¬åœ°ç¼“å­˜ç»§ç»­è¿è¡Œ
4. **è‡ªåŠ¨æ¢å¤**: ç½‘ç»œæ¢å¤åï¼Œè‡ªåŠ¨åŒæ­¥çŠ¶æ€åˆ°äº‘ç«¯

---

### KubeEdge 2025æ–°ç‰¹æ€§

#### 1. **KubeEdge 1.15+ æ–°ç‰¹æ€§**

- âœ… **QUICåè®®æ”¯æŒ**: æ¯”WebSocketæ›´å¯é ã€ä½å»¶è¿Ÿ
- âœ… **è¾¹ç¼˜åŸç”ŸService**: è¾¹ç¼˜èŠ‚ç‚¹é—´æœåŠ¡å‘ç°
- âœ… **è®¾å¤‡ç®¡ç†å¢å¼º**: æ”¯æŒæ›´å¤šIoTåè®®
- âœ… **è¾¹ç¼˜AIæ¡†æ¶**: Sedna 0.6+ (è”é‚¦å­¦ä¹ ã€å¢é‡å­¦ä¹ )

#### 2. **è¾¹ç¼˜åŸç”ŸService**

```yaml
# edge-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: edge-service
  annotations:
    service.kubeedge.io/edge-native: "true"  # è¾¹ç¼˜åŸç”ŸService
spec:
  selector:
    app: edge-app
  ports:
  - protocol: TCP
    port: 80
    targetPort: 8080
  type: ClusterIP
```

#### 3. **è¾¹ç¼˜AI - Sedna**

**è”é‚¦å­¦ä¹ ç¤ºä¾‹**:

```yaml
# federated-learning-job.yaml
apiVersion: sedna.io/v1alpha1
kind: FederatedLearningJob
metadata:
  name: federated-learning-demo
spec:
  aggregationWorker:
    model:
      name: "federated-model"
    template:
      spec:
        containers:
        - name: agg-worker
          image: kubeedge/sedna-example-federated-learning-aggregation-worker:v0.6.0
  trainingWorkers:
  - model:
      name: "model-1"
    template:
      spec:
        nodeName: edge-node-1
        containers:
        - name: train-worker
          image: kubeedge/sedna-example-federated-learning-train-worker:v0.6.0
  - model:
      name: "model-2"
    template:
      spec:
        nodeName: edge-node-2
        containers:
        - name: train-worker
          image: kubeedge/sedna-example-federated-learning-train-worker:v0.6.0
```

---

## OpenYurtè¾¹ç¼˜è‡ªæ²»

### OpenYurtæ¦‚è¿°

**OpenYurt** æ˜¯ **é˜¿é‡Œäº‘å¼€æº** çš„è¾¹ç¼˜è®¡ç®—å¹³å°ï¼Œé€šè¿‡**éä¾µå…¥å¼**æ–¹å¼å°†åŸç”ŸKubernetesæ‰©å±•åˆ°è¾¹ç¼˜ã€‚

**å®˜ç½‘**: https://openyurt.io/  
**GitHub**: https://github.com/openyurtio/openyurt  
**CNCFçŠ¶æ€**: Sandbox (2020)

**æ ¸å¿ƒç‰¹ç‚¹**:

- ğŸ”§ **éä¾µå…¥å¼**: ä¸ä¿®æ”¹Kubernetesæ ¸å¿ƒç»„ä»¶
- ğŸŒ **è¾¹ç¼˜è‡ªæ²»**: YurtHubæœ¬åœ°ç¼“å­˜ï¼Œæ–­ç½‘å¯ç”¨
- ğŸ“¦ **èŠ‚ç‚¹æ± ç®¡ç†**: UnitedDeploymentç»Ÿä¸€ç®¡ç†å¤šåœ°åŸŸè¾¹ç¼˜èŠ‚ç‚¹
- ğŸ”€ **æµé‡æ‹“æ‰‘**: æµé‡é—­ç¯ï¼Œå‡å°‘è¾¹äº‘é€šä¿¡
- ğŸ¯ **åŸç”Ÿå…¼å®¹**: 100%å…¼å®¹Kubernetes API

---

### OpenYurtæ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Cloud (äº‘ç«¯)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Kubernetesé›†ç¾¤                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  Yurt-App-Manager                              â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  - UnitedDeployment CRD (å¤šåœ°åŸŸéƒ¨ç½²)          â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  - NodePool CRD (èŠ‚ç‚¹æ± ç®¡ç†)                   â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  Yurt-Controller-Manager                       â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Edge (è¾¹ç¼˜)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Edge Node 1  â”‚  â”‚ Edge Node 2  â”‚  â”‚ Edge Node 3  â”‚      â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚
â”‚  â”‚ â”‚ YurtHub  â”‚ â”‚  â”‚ â”‚ YurtHub  â”‚ â”‚  â”‚ â”‚ YurtHub  â”‚ â”‚      â”‚
â”‚  â”‚ â”‚(æœ¬åœ°ä»£ç†)â”‚ â”‚  â”‚ â”‚(æœ¬åœ°ä»£ç†)â”‚ â”‚  â”‚ â”‚(æœ¬åœ°ä»£ç†)â”‚ â”‚      â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚
â”‚  â”‚     â†•        â”‚  â”‚     â†•        â”‚  â”‚     â†•        â”‚      â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚
â”‚  â”‚ â”‚ Kubelet  â”‚ â”‚  â”‚ â”‚ Kubelet  â”‚  â”‚  â”‚ â”‚ Kubelet  â”‚ â”‚      â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚
â”‚  â”‚ containerd   â”‚  â”‚ containerd   â”‚  â”‚ containerd   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒç»„ä»¶**:

- **YurtHub**: è¾¹ç¼˜èŠ‚ç‚¹æœ¬åœ°ä»£ç†ï¼Œç¼“å­˜äº‘ç«¯æ•°æ®ï¼Œå®ç°è¾¹ç¼˜è‡ªæ²»
- **Yurt-Controller-Manager**: è¾¹ç¼˜æ§åˆ¶å™¨ç®¡ç†
- **Yurt-App-Manager**: èŠ‚ç‚¹æ± å’ŒUnitedDeploymentç®¡ç†

---

### OpenYurtå®‰è£…éƒ¨ç½²

```bash
#!/bin/bash
# install-openyurt.sh - OpenYurtå®‰è£… (2025)

set -e

echo "=== OpenYurtå®‰è£… ==="

# å‰æ: å·²æœ‰Kubernetesé›†ç¾¤ (1.24+)

# 1. å®‰è£…yurtadm
echo "1. ä¸‹è½½yurtadm..."
OPENYURT_VERSION="v1.4.0"
wget https://github.com/openyurtio/openyurt/releases/download/${OPENYURT_VERSION}/yurtadm
sudo chmod +x yurtadm
sudo mv yurtadm /usr/local/bin/

# 2. è½¬æ¢Kubernetesé›†ç¾¤ä¸ºOpenYurté›†ç¾¤
echo "2. è½¬æ¢ä¸ºOpenYurté›†ç¾¤..."
sudo yurtadm convert --cloud-nodes <cloud-node-name> \
  --provider kubeadm

# 3. éªŒè¯å®‰è£…
echo "3. éªŒè¯OpenYurtç»„ä»¶..."
kubectl get pods -n kube-system | grep yurt

# 4. æ ‡è®°è¾¹ç¼˜èŠ‚ç‚¹
echo "4. æ ‡è®°è¾¹ç¼˜èŠ‚ç‚¹..."
kubectl label node <edge-node-name> openyurt.io/is-edge-worker=true

# 5. åˆ›å»ºèŠ‚ç‚¹æ± 
echo "5. åˆ›å»ºèŠ‚ç‚¹æ± ..."
cat <<EOF | kubectl apply -f -
apiVersion: apps.openyurt.io/v1beta1
kind: NodePool
metadata:
  name: beijing
spec:
  selector:
    matchLabels:
      region: beijing
  type: Edge
EOF

# 6. éªŒè¯èŠ‚ç‚¹æ± 
kubectl get nodepools

echo ""
echo "=== OpenYurtå®‰è£…å®Œæˆ ==="
```

---

### OpenYurtæ ¸å¿ƒç‰¹æ€§

#### 1. **YurtHubæœ¬åœ°ä»£ç†**

**å·¥ä½œåŸç†**:

```text
Kubelet â†’ YurtHub (æœ¬åœ°ä»£ç†) â†’ Kubernetes API Server
              â†“
         æœ¬åœ°ç¼“å­˜ (è¾¹ç¼˜è‡ªæ²»)
```

**ç‰¹ç‚¹**:

- é€æ˜ä»£ç†Kubeletè¯·æ±‚
- æœ¬åœ°ç¼“å­˜Podã€ConfigMapã€Secretç­‰èµ„æº
- æ–­ç½‘ååŸºäºç¼“å­˜è¿è¡Œ

#### 2. **èŠ‚ç‚¹æ±  (NodePool)**

```yaml
# nodepool.yaml
apiVersion: apps.openyurt.io/v1beta1
kind: NodePool
metadata:
  name: hangzhou
spec:
  selector:
    matchLabels:
      region: hangzhou
  type: Edge
  taints:
  - key: node-role.openyurt.io/edge
    effect: NoSchedule
```

#### 3. **UnitedDeploymentå¤šåœ°åŸŸéƒ¨ç½²**

```yaml
# united-deployment.yaml
apiVersion: apps.openyurt.io/v1beta1
kind: UnitedDeployment
metadata:
  name: multi-region-app
  namespace: default
spec:
  selector:
    matchLabels:
      app: nginx
  workloadTemplate:
    deploymentTemplate:
      metadata:
        labels:
          app: nginx
      spec:
        template:
          metadata:
            labels:
              app: nginx
          spec:
            containers:
            - name: nginx
              image: nginx:alpine
  topology:
    pools:
    - name: beijing
      nodeSelectorTerm:
        matchExpressions:
        - key: region
          operator: In
          values:
          - beijing
      replicas: 2
    - name: shanghai
      nodeSelectorTerm:
        matchExpressions:
        - key: region
          operator: In
          values:
          - shanghai
      replicas: 3
```

**æ•ˆæœ**: è‡ªåŠ¨åœ¨åŒ—äº¬èŠ‚ç‚¹æ± éƒ¨ç½²2ä¸ªå‰¯æœ¬ï¼Œä¸Šæµ·èŠ‚ç‚¹æ± éƒ¨ç½²3ä¸ªå‰¯æœ¬ã€‚

#### 4. **æµé‡æ‹“æ‰‘ (ServiceTopology)**

```yaml
# service-topology.yaml
apiVersion: v1
kind: Service
metadata:
  name: app-service
  annotations:
    openyurt.io/topologyKeys: "openyurt.io/nodepool"
spec:
  selector:
    app: nginx
  ports:
  - protocol: TCP
    port: 80
    targetPort: 80
```

**æ•ˆæœ**: åŒä¸€èŠ‚ç‚¹æ± å†…çš„Podè®¿é—®Serviceæ—¶ï¼Œæµé‡åªè·¯ç”±åˆ°æœ¬èŠ‚ç‚¹æ± çš„Endpointï¼Œä¸è·¨èŠ‚ç‚¹æ± ã€‚

---

### OpenYurt 2025æ–°ç‰¹æ€§

#### 1. **OpenYurt 1.4+ æ–°ç‰¹æ€§**

- âœ… **Kubernetes 1.28æ”¯æŒ**
- âœ… **YurtHubæ€§èƒ½ä¼˜åŒ–** (ç¼“å­˜å‘½ä¸­ç‡>99%)
- âœ… **è¾¹ç¼˜Ingress**: YurtIngress Controller
- âœ… **è¾¹ç¼˜å­˜å‚¨**: YurtStorage (CSIæ’ä»¶)

#### 2. **è¾¹ç¼˜Ingress**

```yaml
# yurt-ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: edge-ingress
  annotations:
    openyurt.io/nodepool: "beijing"  # ä»…åœ¨åŒ—äº¬èŠ‚ç‚¹æ± ç”Ÿæ•ˆ
spec:
  rules:
  - host: app.beijing.example.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: app-service
            port:
              number: 80
```

---

## è¾¹ç¼˜è®¡ç®—æŠ€æœ¯å¯¹æ¯”

### K3s vs KubeEdge vs OpenYurt

| ç»´åº¦ | K3s | KubeEdge | OpenYurt |
|-----|-----|---------|---------|
| **å®šä½** | è½»é‡çº§K8s | è¾¹äº‘ååŒå¹³å° | è¾¹ç¼˜è‡ªæ²»å¹³å° |
| **æ¶æ„** | ç‹¬ç«‹K8sé›†ç¾¤ | äº‘è¾¹ååŒ | äº‘è¾¹ååŒ |
| **ä¾µå…¥æ€§** | æ—  (ç‹¬ç«‹) | ä½ (è¾¹ç¼˜ç»„ä»¶) | æä½ (é€æ˜ä»£ç†) |
| **è®¾å¤‡ç®¡ç†** | âŒ | âœ… (Device Mapper) | âŒ |
| **è¾¹ç¼˜AI** | âŒ | âœ… (Sedna) | âŒ |
| **è¾¹ç¼˜è‡ªæ²»** | âœ… (æœ¬åœ°é›†ç¾¤) | âœ… (MetaManager) | âœ… (YurtHub) |
| **èŠ‚ç‚¹æ± ** | âŒ | âŒ | âœ… (NodePool) |
| **èµ„æºå ç”¨** | æä½ (<512MB) | ä¸­ (1-2GB) | ä¸­ (1-2GB) |
| **å®‰è£…å¤æ‚åº¦** | â­ (æç®€) | â­â­â­ (å¤æ‚) | â­â­ (ä¸­ç­‰) |
| **é€‚ç”¨åœºæ™¯** | è¾¹ç¼˜ç‹¬ç«‹é›†ç¾¤ | IoTè®¾å¤‡ç®¡ç† | å¤šåœ°åŸŸè¾¹ç¼˜ |

---

### é€‰å‹å»ºè®®

#### ä½¿ç”¨K3sçš„åœºæ™¯

âœ… **è¾¹ç¼˜ç‹¬ç«‹Kubernetesé›†ç¾¤**

- è¾¹ç¼˜èŠ‚ç‚¹ç®—åŠ›å……è¶³ (>2æ ¸4GB)
- éœ€è¦å®Œæ•´KubernetesåŠŸèƒ½
- è¾¹ç¼˜åœºæ™¯ç›¸å¯¹ç‹¬ç«‹ï¼Œä¸éœ€è¦äº‘ç«¯ç®¡ç†

**å…¸å‹æ¡ˆä¾‹**:

- CDNè¾¹ç¼˜èŠ‚ç‚¹
- é›¶å”®é—¨åº—ç³»ç»Ÿ
- å·¥å‚è½¦é—´ç‹¬ç«‹é›†ç¾¤

#### ä½¿ç”¨KubeEdgeçš„åœºæ™¯

âœ… **è¾¹äº‘ååŒ + IoTè®¾å¤‡ç®¡ç†**

- å¤§é‡IoTè®¾å¤‡éœ€è¦ç®¡ç† (MQTT/Modbus/OPC-UA)
- éœ€è¦è¾¹ç¼˜AIèƒ½åŠ› (è”é‚¦å­¦ä¹ ã€å¢é‡å­¦ä¹ )
- ç½‘ç»œä¸ç¨³å®šï¼Œéœ€è¦å¼ºè¾¹ç¼˜è‡ªæ²»

**å…¸å‹æ¡ˆä¾‹**:

- æ™ºæ…§åŸå¸‚ (æ‘„åƒå¤´ã€ä¼ æ„Ÿå™¨)
- å·¥ä¸šäº’è”ç½‘ (è®¾å¤‡ç›‘æ§)
- è½¦è”ç½‘ (V2X)

#### ä½¿ç”¨OpenYurtçš„åœºæ™¯

âœ… **å¤šåœ°åŸŸè¾¹ç¼˜èŠ‚ç‚¹æ± ç®¡ç†**

- å·²æœ‰Kubernetesé›†ç¾¤ï¼Œå¸Œæœ›æ‰©å±•åˆ°è¾¹ç¼˜
- å¤šåœ°åŸŸè¾¹ç¼˜èŠ‚ç‚¹ç»Ÿä¸€ç®¡ç†
- éœ€è¦æµé‡æ‹“æ‰‘ä¼˜åŒ–

**å…¸å‹æ¡ˆä¾‹**:

- å¤šåœ°åŸŸCDN
- è¿é”é›¶å”® (å¤šé—¨åº—)
- å¤šå›­åŒºå·¥å‚

---

## è¾¹ç¼˜è®¡ç®—æœ€ä½³å®è·µ

### ç½‘ç»œä¼˜åŒ–

#### 1. **è¾¹äº‘ç½‘ç»œä¼˜åŒ–**

```yaml
# quic-protocol.yaml (KubeEdge)
apiVersion: v1
kind: ConfigMap
metadata:
  name: cloudcore
  namespace: kubeedge
data:
  cloudcore.yaml: |
    modules:
      cloudHub:
        quic:
          enable: true
          port: 10001
          maxIncomingStreams: 10000
        websocket:
          enable: true
          port: 10000
```

#### 2. **è¾¹ç¼˜æœåŠ¡æ‹“æ‰‘**

```yaml
# service-topology-policy.yaml (OpenYurt)
apiVersion: v1
kind: Service
metadata:
  name: database-service
  annotations:
    openyurt.io/topologyKeys: "openyurt.io/nodepool,kubernetes.io/hostname"
spec:
  selector:
    app: database
  ports:
  - port: 3306
```

### èµ„æºç®¡ç†

#### 1. **è¾¹ç¼˜èŠ‚ç‚¹èµ„æºé¢„ç•™**

```yaml
# kubelet-config.yaml
apiVersion: kubelet.config.k8s.io/v1beta1
kind: KubeletConfiguration
systemReserved:
  cpu: "500m"
  memory: "512Mi"
kubeReserved:
  cpu: "500m"
  memory: "512Mi"
evictionHard:
  memory.available: "256Mi"
  nodefs.available: "10%"
```

#### 2. **è¾¹ç¼˜Podèµ„æºé™åˆ¶**

```yaml
# edge-pod-resources.yaml
apiVersion: v1
kind: Pod
metadata:
  name: edge-app
spec:
  containers:
  - name: app
    image: nginx:alpine
    resources:
      requests:
        cpu: "100m"
        memory: "128Mi"
      limits:
        cpu: "500m"
        memory: "512Mi"
```

### å®‰å…¨åŠ å›º

#### 1. **è¾¹ç¼˜èŠ‚ç‚¹TLSåŠ å›º**

```bash
# ç”Ÿæˆè¾¹ç¼˜èŠ‚ç‚¹è¯ä¹¦
sudo keadm join \
  --cloudcore-ipport=<äº‘ç«¯IP>:10000 \
  --edgenode-name=edge-node-1 \
  --token=<Token> \
  --certPath=/etc/kubeedge/certs \
  --cgroupdriver=systemd
```

#### 2. **NetworkPolicyéš”ç¦»**

```yaml
# edge-network-policy.yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: edge-isolation
  namespace: edge-apps
spec:
  podSelector:
    matchLabels:
      tier: edge
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - podSelector:
        matchLabels:
          tier: edge
  egress:
  - to:
    - podSelector:
        matchLabels:
          tier: edge
```

### ç›‘æ§è¿ç»´

#### 1. **è¾¹ç¼˜èŠ‚ç‚¹ç›‘æ§ (Prometheus)**

```yaml
# edge-node-exporter.yaml
apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: node-exporter
  namespace: monitoring
spec:
  selector:
    matchLabels:
      app: node-exporter
  template:
    metadata:
      labels:
        app: node-exporter
    spec:
      hostNetwork: true
      hostPID: true
      containers:
      - name: node-exporter
        image: prom/node-exporter:latest
        args:
        - --path.procfs=/host/proc
        - --path.sysfs=/host/sys
        - --collector.filesystem.mount-points-exclude=^/(sys|proc|dev|host|etc)($$|/)
        ports:
        - containerPort: 9100
        volumeMounts:
        - name: proc
          mountPath: /host/proc
          readOnly: true
        - name: sys
          mountPath: /host/sys
          readOnly: true
      volumes:
      - name: proc
        hostPath:
          path: /proc
      - name: sys
        hostPath:
          path: /sys
```

#### 2. **è¾¹ç¼˜æ—¥å¿—æ”¶é›† (Fluent Bit)**

```yaml
# fluent-bit-edge.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: fluent-bit-config
  namespace: logging
data:
  fluent-bit.conf: |
    [SERVICE]
        Flush         5
        Daemon        off
        Log_Level     info
        
    [INPUT]
        Name              tail
        Path              /var/log/containers/*.log
        Parser            docker
        Tag               kube.*
        Refresh_Interval  5
        
    [FILTER]
        Name                kubernetes
        Match               kube.*
        Kube_URL            https://kubernetes.default.svc:443
        Kube_CA_File        /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
        Kube_Token_File     /var/run/secrets/kubernetes.io/serviceaccount/token
        
    [OUTPUT]
        Name   forward
        Match  *
        Host   loki.monitoring.svc
        Port   24224
```

---

## è¾¹ç¼˜è®¡ç®—ç”Ÿäº§æ¡ˆä¾‹

### æ¡ˆä¾‹1ï¼š5G MECè¾¹ç¼˜è®¡ç®—

**èƒŒæ™¯**: æŸè¿è¥å•†5Gç½‘ç»œè¾¹ç¼˜è®¡ç®—éƒ¨ç½²

**æ¶æ„**:

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸­å¿ƒäº‘ (Regional DC)                             â”‚
â”‚  - Kubernetes 1.28                                â”‚
â”‚  - KubeEdge CloudCore                             â”‚
â”‚  - æµé‡åˆ†æã€è®¡è´¹ã€è¿è¥                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5G MECè¾¹ç¼˜èŠ‚ç‚¹ (æ¯ä¸ªåŸºç«™)                        â”‚
â”‚  - K3s / KubeEdge EdgeCore                        â”‚
â”‚  - è¾¹ç¼˜åº”ç”¨: AR/VRã€äº‘æ¸¸æˆã€è§†é¢‘åˆ†æ               â”‚
â”‚  - å»¶è¿Ÿ: <10ms                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æŠ€æœ¯é€‰å‹**:

- **è¾¹ç¼˜å¹³å°**: KubeEdge (è¾¹äº‘ååŒ)
- **è½»é‡åŒ–**: K3s (èµ„æºå—é™åŸºç«™)
- **ç½‘ç»œ**: QUICåè®® (5Gç½‘ç»œ)
- **ç›‘æ§**: Prometheus + Grafana

**æ•ˆæœ**:

- âœ… å»¶è¿Ÿé™ä½: 100ms â†’ 5ms
- âœ… å¸¦å®½èŠ‚çœ: 90%æµé‡æœ¬åœ°å¤„ç†
- âœ… ç”¨æˆ·ä½“éªŒ: AR/VRå¡é¡¿ç‡é™ä½95%

---

### æ¡ˆä¾‹2ï¼šIoTè®¾å¤‡ç®¡ç†

**èƒŒæ™¯**: æ™ºæ…§å·¥å‚è®¾å¤‡ç›‘æ§ä¸é¢„æµ‹æ€§ç»´æŠ¤

**æ¶æ„**:

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  äº‘ç«¯ (Central Cloud)                             â”‚
â”‚  - Kubernetesé›†ç¾¤                                 â”‚
â”‚  - KubeEdge CloudCore + DeviceController          â”‚
â”‚  - æ•°æ®æ¹–ã€AIæ¨¡å‹è®­ç»ƒ                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å·¥å‚è¾¹ç¼˜èŠ‚ç‚¹                                      â”‚
â”‚  - KubeEdge EdgeCore                              â”‚
â”‚  - Sednaè¾¹ç¼˜AIæ¨ç†                                â”‚
â”‚  - Device Mapper (MQTT/Modbus)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IoTè®¾å¤‡                                          â”‚
â”‚  - PLCæ§åˆ¶å™¨ (Modbus)                             â”‚
â”‚  - ä¼ æ„Ÿå™¨ (MQTT)                                  â”‚
â”‚  - æœºå™¨äºº (OPC-UA)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æŠ€æœ¯é€‰å‹**:

- **è¾¹ç¼˜å¹³å°**: KubeEdge (è®¾å¤‡ç®¡ç†)
- **è®¾å¤‡åè®®**: MQTTã€Modbusã€OPC-UA
- **è¾¹ç¼˜AI**: Sedna (å¼‚å¸¸æ£€æµ‹æ¨¡å‹)
- **æ•°æ®å­˜å‚¨**: TimescaleDB (æ—¶åºæ•°æ®)

**æ•ˆæœ**:

- âœ… è®¾å¤‡ç›‘æ§: 10000+è®¾å¤‡å®æ—¶ç›‘æ§
- âœ… é¢„æµ‹ç»´æŠ¤: è®¾å¤‡æ•…éšœç‡é™ä½60%
- âœ… æ•°æ®æœ¬åœ°åŒ–: æ»¡è¶³å·¥ä¸šæ•°æ®å®‰å…¨åˆè§„

---

### æ¡ˆä¾‹3ï¼šCDNè¾¹ç¼˜èŠ‚ç‚¹

**èƒŒæ™¯**: è§†é¢‘CDNè¾¹ç¼˜ç¼“å­˜ä¸åŠ é€Ÿ

**æ¶æ„**:

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸­å¿ƒäº‘                                           â”‚
â”‚  - Kubernetesé›†ç¾¤                                 â”‚
â”‚  - OpenYurt Yurt-App-Manager                      â”‚
â”‚  - æºç«™å­˜å‚¨ã€å†…å®¹ç®¡ç†                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¾¹ç¼˜èŠ‚ç‚¹æ±  (å¤šåœ°åŸŸ)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ åŒ—äº¬èŠ‚ç‚¹æ±  â”‚  â”‚ ä¸Šæµ·èŠ‚ç‚¹æ±  â”‚  â”‚ å¹¿å·èŠ‚ç‚¹æ±  â”‚ â”‚
â”‚  â”‚ - K3s      â”‚  â”‚ - K3s      â”‚  â”‚ - K3s      â”‚ â”‚
â”‚  â”‚ - Nginx    â”‚  â”‚ - Nginx    â”‚  â”‚ - Nginx    â”‚ â”‚
â”‚  â”‚ - æœ¬åœ°ç¼“å­˜ â”‚  â”‚ - æœ¬åœ°ç¼“å­˜ â”‚  â”‚ - æœ¬åœ°ç¼“å­˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æŠ€æœ¯é€‰å‹**:

- **è¾¹ç¼˜å¹³å°**: K3s (ç‹¬ç«‹è½»é‡é›†ç¾¤)
- **èŠ‚ç‚¹ç®¡ç†**: OpenYurt UnitedDeployment (å¯é€‰)
- **ç¼“å­˜**: Nginx + Redis
- **å­˜å‚¨**: Local Path Provisioner

**æ•ˆæœ**:

- âœ… å»¶è¿Ÿé™ä½: 200ms â†’ 20ms
- âœ… å›æºç‡: <5% (95%å‘½ä¸­ç‡)
- âœ… æˆæœ¬èŠ‚çœ: å¸¦å®½æˆæœ¬é™ä½80%

---

## è¾¹ç¼˜è®¡ç®—æœªæ¥è¶‹åŠ¿

### 1. **è¾¹ç¼˜åŸç”Ÿ (Edge Native)**

- ä¸“ä¸ºè¾¹ç¼˜è®¾è®¡çš„åº”ç”¨æ¶æ„
- è½»é‡çº§å®¹å™¨ + WebAssembly
- è¾¹ç¼˜å‡½æ•°è®¡ç®— (FaaS)

### 2. **è¾¹ç¼˜AIä¸»æµåŒ–**

- æ¨¡å‹å‹ç¼©æŠ€æœ¯æˆç†Ÿ
- è¾¹ç¼˜æ¨ç†èŠ¯ç‰‡æ™®åŠ (NPU)
- è”é‚¦å­¦ä¹ æ ‡å‡†åŒ–

### 3. **5G + è¾¹ç¼˜è®¡ç®—èåˆ**

- MECæˆä¸º5Gæ ‡å‡†é…ç½®
- è¶…ä½å»¶è¿Ÿåº”ç”¨çˆ†å‘ (AR/VR/è‡ªåŠ¨é©¾é©¶)
- ç½‘ç»œåˆ‡ç‰‡ + è¾¹ç¼˜è®¡ç®—

### 4. **è¾¹ç¼˜å®‰å…¨å¢å¼º**

- é›¶ä¿¡ä»»æ¶æ„ä¸‹æ²‰åˆ°è¾¹ç¼˜
- è¾¹ç¼˜TEE (å¯ä¿¡æ‰§è¡Œç¯å¢ƒ)
- è¾¹ç¼˜å¯†é’¥ç®¡ç†

### 5. **è¾¹ç¼˜Serverless**

- Knativeè¾¹ç¼˜ç‰ˆ
- WebAssembly + è¾¹ç¼˜FaaS
- äº‹ä»¶é©±åŠ¨è¾¹ç¼˜åº”ç”¨

---

## ç›¸å…³èµ„æº

### å®˜æ–¹æ–‡æ¡£

- [K3så®˜ç½‘](https://k3s.io/)
- [KubeEdgeå®˜ç½‘](https://kubeedge.io/)
- [OpenYurtå®˜ç½‘](https://openyurt.io/)

### GitHubä»“åº“

- [K3s GitHub](https://github.com/k3s-io/k3s)
- [KubeEdge GitHub](https://github.com/kubeedge/kubeedge)
- [OpenYurt GitHub](https://github.com/openyurtio/openyurt)

### ç¤¾åŒº

- [CNCF Edge Computing](https://www.cncf.io/projects/)
- [K3s Slack](https://rancher-users.slack.com/)
- [KubeEdge Slack](https://kubeedge.slack.com/)

---

**æ›´æ–°æ—¶é—´**: 2025-10-20  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**çŠ¶æ€**: âœ… **å®Œæˆ - 2025è¾¹ç¼˜è®¡ç®—æŠ€æœ¯å…¨é¢å¯¹é½**

---

**ğŸ’¡ è¾¹ç¼˜è®¡ç®—æ˜¯äº‘åŸç”ŸæŠ€æœ¯çš„é‡è¦å»¶ä¼¸ï¼ŒK3sã€KubeEdgeã€OpenYurtå„æœ‰ç‰¹è‰²ï¼Œè¯·æ ¹æ®å®é™…åœºæ™¯é€‰å‹ï¼**
