# è™šæ‹ŸåŒ–å®¹å™¨åŒ–éƒ¨ç½²ç»ˆææŒ‡å—ï¼ˆ2025ç‰ˆï¼‰

> **æ–‡æ¡£å®šä½**: æœ¬æ–‡æ¡£æä¾›ä¼ä¸šçº§è™šæ‹ŸåŒ–ä¸å®¹å™¨åŒ–éƒ¨ç½²çš„å®Œæ•´æŒ‡å—ï¼Œæ¶µç›–ç¡¬ä»¶é€‰å‹ã€è™šæ‹ŸåŒ–å¹³å°ï¼ˆVMware/KVM/Hyper-Vï¼‰ã€å®¹å™¨ç¼–æ’ï¼ˆKubernetesï¼‰ã€æ··åˆéƒ¨ç½²æ¶æ„ã€å­˜å‚¨ç½‘ç»œé…ç½®ä¸è¿ç»´ç®¡ç†ï¼Œå¯¹é½2025å¹´æœ€æ–°æŠ€æœ¯æ ‡å‡†[deployment-guide]ã€‚

## æ–‡æ¡£å…ƒä¿¡æ¯

| å±æ€§ | å€¼ |
|------|-----|
| **æ–‡æ¡£ç‰ˆæœ¬** | v3.0 (2025æ”¹è¿›ç‰ˆ) |
| **æ€»è¡Œæ•°** | 3580+ |
| **æ›´æ–°æ—¥æœŸ** | 2025-10-21 |
| **æŠ€æœ¯åŸºå‡†** | VMware vSphere 8.0, KVM/QEMU 8.0, Kubernetes 1.30, Docker 25.0, Podman 5.0 |
| **æ ‡å‡†å¯¹é½** | VMware Reference Architecture, CNCF Kubernetes Best Practices, OCI |
| **çŠ¶æ€** | ç”Ÿäº§å°±ç»ª |

> **ç‰ˆæœ¬é”šç‚¹**: æœ¬æ–‡æ¡£åŸºäº2025å¹´ä¼ä¸šçº§éƒ¨ç½²æ ‡å‡†ï¼Œå¯¹é½VMware vSphere 8.0ã€Kubernetes 1.30+ã€Docker 25.0+ã€Podman 5.0+ã€‚å®Œæ•´ç‰ˆæœ¬ä¿¡æ¯å‚è€ƒã€Š2025å¹´æŠ€æœ¯æ ‡å‡†æœ€ç»ˆå¯¹é½æŠ¥å‘Š.mdã€‹ã€‚

---

## ç›®å½•

- [è™šæ‹ŸåŒ–å®¹å™¨åŒ–éƒ¨ç½²ç»ˆææŒ‡å—ï¼ˆ2025ç‰ˆï¼‰](#è™šæ‹ŸåŒ–å®¹å™¨åŒ–éƒ¨ç½²ç»ˆææŒ‡å—2025ç‰ˆ)
  - [æ–‡æ¡£å…ƒä¿¡æ¯](#æ–‡æ¡£å…ƒä¿¡æ¯)
  - [ç›®å½•](#ç›®å½•)
  - [1. éƒ¨ç½²æ¶æ„æ¦‚è¿°](#1-éƒ¨ç½²æ¶æ„æ¦‚è¿°)
    - [1.1 æ•´ä½“æ¶æ„](#11-æ•´ä½“æ¶æ„)
    - [1.2 éƒ¨ç½²æ¨¡å¼](#12-éƒ¨ç½²æ¨¡å¼)
  - [2. ç¯å¢ƒå‡†å¤‡](#2-ç¯å¢ƒå‡†å¤‡)
    - [2.1 ç¡¬ä»¶è¦æ±‚ä¸é€‰å‹æŒ‡å—](#21-ç¡¬ä»¶è¦æ±‚ä¸é€‰å‹æŒ‡å—)
      - [2.1.1 CPUå¤„ç†å™¨é€‰å‹](#211-cpuå¤„ç†å™¨é€‰å‹)
      - [2.1.2 å†…å­˜é€‰å‹](#212-å†…å­˜é€‰å‹)
      - [2.1.3 å­˜å‚¨é€‰å‹](#213-å­˜å‚¨é€‰å‹)
      - [2.1.4 ç½‘ç»œè®¾å¤‡é€‰å‹](#214-ç½‘ç»œè®¾å¤‡é€‰å‹)
      - [2.1.5 å®Œæ•´ç¡¬ä»¶é…ç½®æ–¹æ¡ˆ](#215-å®Œæ•´ç¡¬ä»¶é…ç½®æ–¹æ¡ˆ)
      - [2.1.6 BIOS/å›ºä»¶é…ç½®æ¸…å• ğŸ†•](#216-bioså›ºä»¶é…ç½®æ¸…å•-)
      - [2.1.7 ç¡¬ä»¶å…¼å®¹æ€§æ¸…å• (HCL) ğŸ†•](#217-ç¡¬ä»¶å…¼å®¹æ€§æ¸…å•-hcl-)
    - [2.2 è½¯ä»¶è¦æ±‚](#22-è½¯ä»¶è¦æ±‚)
      - [2.2.1 è½¯ä»¶å®‰è£…è„šæœ¬ ğŸ†•](#221-è½¯ä»¶å®‰è£…è„šæœ¬-)
    - [2.3 ç½‘ç»œé…ç½®](#23-ç½‘ç»œé…ç½®)
  - [3. è™šæ‹ŸåŒ–éƒ¨ç½²](#3-è™šæ‹ŸåŒ–éƒ¨ç½²)
    - [3.1 VMware vSphereéƒ¨ç½²](#31-vmware-vsphereéƒ¨ç½²)
      - [3.1.1 ESXiå®‰è£…å‡†å¤‡](#311-esxiå®‰è£…å‡†å¤‡)
      - [3.1.2 ESXiäº¤äº’å¼å®‰è£…æ­¥éª¤ ğŸ†•](#312-esxiäº¤äº’å¼å®‰è£…æ­¥éª¤-)
      - [3.1.3 ESXiå­˜å‚¨é…ç½® ğŸ†•](#313-esxiå­˜å‚¨é…ç½®-)
      - [3.1.4 ESXiç½‘ç»œé…ç½® ğŸ†•](#314-esxiç½‘ç»œé…ç½®-)
      - [3.1.5 vCenter Serveréƒ¨ç½² ğŸ†•](#315-vcenter-serveréƒ¨ç½²-)
      - [3.1.6 åˆ›å»ºæ•°æ®ä¸­å¿ƒå’Œé›†ç¾¤ ğŸ†•](#316-åˆ›å»ºæ•°æ®ä¸­å¿ƒå’Œé›†ç¾¤-)
    - [3.2 KVMè™šæ‹ŸåŒ–éƒ¨ç½² ğŸ†•](#32-kvmè™šæ‹ŸåŒ–éƒ¨ç½²-)
      - [3.2.1 KVMç¯å¢ƒå‡†å¤‡](#321-kvmç¯å¢ƒå‡†å¤‡)
      - [3.2.2 KVMç½‘ç»œé…ç½®](#322-kvmç½‘ç»œé…ç½®)
      - [3.2.3 åˆ›å»ºKVMè™šæ‹Ÿæœº](#323-åˆ›å»ºkvmè™šæ‹Ÿæœº)
    - [3.3 Hyper-Vè™šæ‹ŸåŒ–éƒ¨ç½² ğŸ†•](#33-hyper-vè™šæ‹ŸåŒ–éƒ¨ç½²-)
      - [3.3.1 Hyper-Vå®‰è£…](#331-hyper-vå®‰è£…)
      - [3.3.2 Hyper-Vç½‘ç»œé…ç½®](#332-hyper-vç½‘ç»œé…ç½®)
      - [3.3.3 åˆ›å»ºHyper-Vè™šæ‹Ÿæœº](#333-åˆ›å»ºhyper-vè™šæ‹Ÿæœº)
    - [3.4 è™šæ‹Ÿæœºæ¨¡æ¿åˆ›å»º ğŸ†•](#34-è™šæ‹Ÿæœºæ¨¡æ¿åˆ›å»º-)
      - [3.4.1 VMwareè™šæ‹Ÿæœºæ¨¡æ¿](#341-vmwareè™šæ‹Ÿæœºæ¨¡æ¿)
      - [3.4.2 KVMè™šæ‹Ÿæœºæ¨¡æ¿](#342-kvmè™šæ‹Ÿæœºæ¨¡æ¿)
      - [3.4.3 æ¨¡æ¿æœ€ä½³å®è·µ](#343-æ¨¡æ¿æœ€ä½³å®è·µ)
  - [4. å®¹å™¨åŒ–éƒ¨ç½²](#4-å®¹å™¨åŒ–éƒ¨ç½²)
    - [4.1 Dockeréƒ¨ç½²](#41-dockeréƒ¨ç½²)
      - [4.1.1 Dockerå®‰è£…](#411-dockerå®‰è£…)
      - [4.1.2 Docker Composeéƒ¨ç½²](#412-docker-composeéƒ¨ç½²)
    - [4.2 Kuberneteséƒ¨ç½²](#42-kuberneteséƒ¨ç½²)
      - [4.2.1 é›†ç¾¤åˆå§‹åŒ–](#421-é›†ç¾¤åˆå§‹åŒ–)
      - [4.2.2 å·¥ä½œèŠ‚ç‚¹åŠ å…¥](#422-å·¥ä½œèŠ‚ç‚¹åŠ å…¥)
  - [5. æ··åˆéƒ¨ç½²](#5-æ··åˆéƒ¨ç½²)
    - [5.1 è™šæ‹ŸåŒ–+å®¹å™¨åŒ–æ¶æ„](#51-è™šæ‹ŸåŒ–å®¹å™¨åŒ–æ¶æ„)
    - [5.2 éƒ¨ç½²ç­–ç•¥](#52-éƒ¨ç½²ç­–ç•¥)
  - [6. ç›‘æ§ä¸è¿ç»´](#6-ç›‘æ§ä¸è¿ç»´)
    - [6.1 ç›‘æ§ç³»ç»Ÿéƒ¨ç½²](#61-ç›‘æ§ç³»ç»Ÿéƒ¨ç½²)
    - [6.2 æ—¥å¿—ç®¡ç†](#62-æ—¥å¿—ç®¡ç†)
    - [6.3 è‡ªåŠ¨åŒ–è¿ç»´](#63-è‡ªåŠ¨åŒ–è¿ç»´)
  - [7. æ•…éšœæ’é™¤](#7-æ•…éšœæ’é™¤)
    - [7.1 å¸¸è§é—®é¢˜è¯Šæ–­](#71-å¸¸è§é—®é¢˜è¯Šæ–­)
    - [7.2 æ€§èƒ½é—®é¢˜æ’æŸ¥](#72-æ€§èƒ½é—®é¢˜æ’æŸ¥)
  - [8. å­˜å‚¨æ¶æ„æ ‡å‡†é…ç½® ğŸ†•](#8-å­˜å‚¨æ¶æ„æ ‡å‡†é…ç½®-)
    - [8.1 å­˜å‚¨ç±»å‹ä¸é€‰å‹æ ‡å‡†](#81-å­˜å‚¨ç±»å‹ä¸é€‰å‹æ ‡å‡†)
    - [8.2 ç½‘ç»œæ¶æ„æ ‡å‡†é…ç½® ğŸ†•](#82-ç½‘ç»œæ¶æ„æ ‡å‡†é…ç½®-)
    - [9.2 Kubernetesé«˜å¯ç”¨é…ç½®](#92-kubernetesé«˜å¯ç”¨é…ç½®)
  - [10. æœ€ä½³å®è·µ](#10-æœ€ä½³å®è·µ)
    - [10.1 éƒ¨ç½²æœ€ä½³å®è·µ](#101-éƒ¨ç½²æœ€ä½³å®è·µ)
    - [10.2 è¿ç»´æœ€ä½³å®è·µ](#102-è¿ç»´æœ€ä½³å®è·µ)
    - [10.3 æ•…éšœæ¢å¤](#103-æ•…éšœæ¢å¤)
  - [å‚è€ƒèµ„æº](#å‚è€ƒèµ„æº)
    - [1. å®˜æ–¹æ–‡æ¡£](#1-å®˜æ–¹æ–‡æ¡£)
    - [2. ç¡¬ä»¶ä¸BIOS](#2-ç¡¬ä»¶ä¸bios)
    - [3. VMware vSphere](#3-vmware-vsphere)
    - [4. KVMè™šæ‹ŸåŒ–](#4-kvmè™šæ‹ŸåŒ–)
    - [5. Hyper-V](#5-hyper-v)
    - [6. Dockerå®¹å™¨](#6-dockerå®¹å™¨)
    - [7. Kubernetes](#7-kubernetes)
    - [8. å­˜å‚¨ä¸ç½‘ç»œ](#8-å­˜å‚¨ä¸ç½‘ç»œ)
  - [11. ç›¸å…³æ–‡æ¡£](#11-ç›¸å…³æ–‡æ¡£)
    - [æ ¸å¿ƒæŠ€æœ¯æ–‡æ¡£](#æ ¸å¿ƒæŠ€æœ¯æ–‡æ¡£)
    - [æŠ€æœ¯å®æ–½æ–‡æ¡£](#æŠ€æœ¯å®æ–½æ–‡æ¡£)
    - [å®‰å…¨ä¸è¿ç»´æ–‡æ¡£](#å®‰å…¨ä¸è¿ç»´æ–‡æ¡£)
    - [å­¦ä¹ èµ„æº](#å­¦ä¹ èµ„æº)
    - [æ›´æ–°æ—¥å¿— ğŸ†•](#æ›´æ–°æ—¥å¿—-)

## 1. éƒ¨ç½²æ¶æ„æ¦‚è¿°

**ä¼ä¸šçº§æ¶æ„è®¾è®¡åŸåˆ™**[enterprise-architecture]:

### 1.1 æ•´ä½“æ¶æ„

```yaml
éƒ¨ç½²æ¶æ„[deployment-patterns]:
  åŸºç¡€è®¾æ–½å±‚:
    - ç‰©ç†æœåŠ¡å™¨
    - ç½‘ç»œè®¾å¤‡
    - å­˜å‚¨è®¾å¤‡
    - å®‰å…¨è®¾å¤‡
  
  è™šæ‹ŸåŒ–å±‚:
    - VMware vSphere
    - ESXiä¸»æœº
    - vCenter Server
    - è™šæ‹Ÿç½‘ç»œ
  
  å®¹å™¨åŒ–å±‚:
    - Docker Engine
    - Kubernetesé›†ç¾¤
    - å®¹å™¨ç¼–æ’
    - æœåŠ¡ç½‘æ ¼
  
  åº”ç”¨å±‚:
    - å¾®æœåŠ¡åº”ç”¨
    - æ•°æ®åº“æœåŠ¡
    - ç›‘æ§æœåŠ¡
    - å®‰å…¨æœåŠ¡
```

### 1.2 éƒ¨ç½²æ¨¡å¼

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    éƒ¨ç½²æ¨¡å¼é€‰æ‹©                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   çº¯è™šæ‹ŸåŒ–   â”‚  â”‚   çº¯å®¹å™¨åŒ–   â”‚  â”‚   æ··åˆéƒ¨ç½²  â”‚          â”‚
â”‚  â”‚   éƒ¨ç½²       â”‚  â”‚   éƒ¨ç½²      â”‚  â”‚             â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    éƒ¨ç½²ç¯å¢ƒ                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   å¼€å‘ç¯å¢ƒ   â”‚  â”‚   æµ‹è¯•ç¯å¢ƒ  â”‚   â”‚   ç”Ÿäº§ç¯å¢ƒ  â”‚          â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2. ç¯å¢ƒå‡†å¤‡

### 2.1 ç¡¬ä»¶è¦æ±‚ä¸é€‰å‹æŒ‡å—

#### 2.1.1 CPUå¤„ç†å™¨é€‰å‹

**CPUè™šæ‹ŸåŒ–æŠ€æœ¯è¦æ±‚**[cpu-virtualization]:

```yaml
CPUè¦æ±‚ä¸é€‰å‹[cpu-selection]:
  è™šæ‹ŸåŒ–å¿…é¡»ç‰¹æ€§:
    âœ… Intel VT-x / AMD-V (ç¡¬ä»¶è™šæ‹ŸåŒ–)
    âœ… Intel VT-d / AMD-Vi (IOè™šæ‹ŸåŒ–)
    âœ… EPT / RVI (å†…å­˜è™šæ‹ŸåŒ–)
    âœ… æ”¯æŒ64ä½
  
  æ¨èå¤„ç†å™¨ (2025):
    Intel:
      å…¥é—¨çº§: Xeon E-2300 ç³»åˆ—
        - æ ¸å¿ƒ: 4-8æ ¸
        - é¢‘ç‡: 2.8-4.5GHz
        - ç¼“å­˜: 16MB
        - ä»·æ ¼: Â¥3,000-6,000
        - é€‚ç”¨: å°å‹è™šæ‹ŸåŒ–ç¯å¢ƒ
      
      ä¸­ç«¯: Xeon Silver 4300 ç³»åˆ—
        - æ ¸å¿ƒ: 8-16æ ¸
        - é¢‘ç‡: 2.2-3.4GHz
        - ç¼“å­˜: 22-30MB
        - ä»·æ ¼: Â¥8,000-20,000
        - é€‚ç”¨: ä¸­å‹ä¼ä¸šè™šæ‹ŸåŒ–
      
      é«˜ç«¯: Xeon Gold 6300 ç³»åˆ—
        - æ ¸å¿ƒ: 16-40æ ¸
        - é¢‘ç‡: 2.0-3.8GHz
        - ç¼“å­˜: 36-60MB
        - ä»·æ ¼: Â¥30,000-80,000
        - é€‚ç”¨: å¤§å‹æ•°æ®ä¸­å¿ƒ
      
      æ——èˆ°: Xeon Platinum 8300 ç³»åˆ—
        - æ ¸å¿ƒ: 28-40æ ¸
        - é¢‘ç‡: 2.0-4.0GHz
        - ç¼“å­˜: 57-120MB
        - ä»·æ ¼: Â¥100,000-300,000
        - é€‚ç”¨: å…³é”®ä¸šåŠ¡è´Ÿè½½
    
    AMD:
      å…¥é—¨çº§: EPYC 7232P
        - æ ¸å¿ƒ: 8æ ¸16çº¿ç¨‹
        - é¢‘ç‡: 3.1-3.2GHz
        - ç¼“å­˜: 32MB L3
        - ä»·æ ¼: Â¥4,000-6,000
      
      ä¸­ç«¯: EPYC 7443
        - æ ¸å¿ƒ: 24æ ¸48çº¿ç¨‹
        - é¢‘ç‡: 2.85-4.0GHz
        - ç¼“å­˜: 128MB L3
        - ä»·æ ¼: Â¥25,000-35,000
      
      é«˜ç«¯: EPYC 7763
        - æ ¸å¿ƒ: 64æ ¸128çº¿ç¨‹
        - é¢‘ç‡: 2.45-3.5GHz
        - ç¼“å­˜: 256MB L3
        - ä»·æ ¼: Â¥70,000-90,000
    
    å›½äº§:
      æµ·å…‰ (Hygon):
        - C86 7185 (32æ ¸)
        - ä»·æ ¼: Â¥15,000-25,000
        - å…¼å®¹x86æ¶æ„
        - æ”¯æŒå›½äº§åŒ–è¦æ±‚
      
      é²²é¹ (åä¸º):
        - 920-6426 (64æ ¸)
        - ARMæ¶æ„
        - ä»·æ ¼: Â¥20,000-40,000
        - ç”Ÿæ€é€æ¸å®Œå–„

  CPUé€‰å‹å»ºè®®:
    å°å‹ç¯å¢ƒ (<50VM):
      - 2é¢— Xeon Silver 4310 (12æ ¸)
      - æ€»æ ¸å¿ƒ: 24æ ¸48çº¿ç¨‹
      - æˆæœ¬: Â¥25,000
    
    ä¸­å‹ç¯å¢ƒ (50-200VM):
      - 2é¢— Xeon Gold 6326 (16æ ¸)
      - æ€»æ ¸å¿ƒ: 32æ ¸64çº¿ç¨‹
      - æˆæœ¬: Â¥70,000
    
    å¤§å‹ç¯å¢ƒ (>200VM):
      - 2é¢— Xeon Platinum 8358 (32æ ¸)
      - æ€»æ ¸å¿ƒ: 64æ ¸128çº¿ç¨‹
      - æˆæœ¬: Â¥200,000
    
    æ€§ä»·æ¯”æ–¹æ¡ˆ:
      - 2é¢— AMD EPYC 7443 (24æ ¸)
      - æ€»æ ¸å¿ƒ: 48æ ¸96çº¿ç¨‹
      - æˆæœ¬: Â¥60,000 (èŠ‚çœÂ¥10,000)
```

#### 2.1.2 å†…å­˜é€‰å‹

**å†…å­˜è§„åˆ’æœ€ä½³å®è·µ**[memory-sizing]:

```yaml
å†…å­˜è¦æ±‚ä¸é€‰å‹[memory-planning]:
  å†…å­˜ç±»å‹:
    DDR4: 2933-3200MHz
      - æˆç†Ÿç¨³å®š
      - ä»·æ ¼è¾ƒä½
      - é€‚åˆå¤§å¤šæ•°åœºæ™¯
    
    DDR5: 4800-5600MHz
      - æ€§èƒ½æ›´å¼º (+50%)
      - åŠŸè€—æ›´ä½ (-20%)
      - ä»·æ ¼è¾ƒé«˜ (+30%)
      - é€‚åˆé«˜æ€§èƒ½åœºæ™¯
  
  å†…å­˜é…ç½®:
    åŸºç¡€åŸåˆ™:
      âœ… å¯¹ç§°é…ç½® (å¤šé€šé“)
      âœ… åŒå“ç‰ŒåŒå‹å·
      âœ… å¯ç”¨ECC (çº é”™)
      âœ… é¢„ç•™20%ä½™é‡
    
    å°å‹ç¯å¢ƒ:
      é…ç½®: 8x 16GB DDR4 ECC
      æ€»å®¹é‡: 128GB
      é€šé“: 8é€šé“
      æˆæœ¬: Â¥12,000
      é€‚ç”¨: <50VM
    
    ä¸­å‹ç¯å¢ƒ:
      é…ç½®: 12x 32GB DDR4 ECC
      æ€»å®¹é‡: 384GB
      é€šé“: 12é€šé“
      æˆæœ¬: Â¥38,000
      é€‚ç”¨: 50-200VM
    
    å¤§å‹ç¯å¢ƒ:
      é…ç½®: 24x 64GB DDR4 ECC
      æ€»å®¹é‡: 1.5TB
      é€šé“: 24é€šé“
      æˆæœ¬: Â¥160,000
      é€‚ç”¨: >200VM
    
    è¶…å¤§è§„æ¨¡:
      é…ç½®: 32x 128GB DDR5 ECC
      æ€»å®¹é‡: 4TB
      é€šé“: 32é€šé“
      æˆæœ¬: Â¥500,000
      é€‚ç”¨: >1000VM

  å†…å­˜è¶…é¢é…æ¯”:
    ä¿å®ˆ: 1.5:1 (150%)
    æ ‡å‡†: 2:1 (200%)
    æ¿€è¿›: 3:1 (300%)
    
    æ³¨æ„: éœ€é…åˆå†…å­˜çƒ­æ·»åŠ ã€TPSç­‰æŠ€æœ¯
```

#### 2.1.3 å­˜å‚¨é€‰å‹

**å­˜å‚¨æ¶æ„è®¾è®¡æŒ‡å—**[storage-architecture]:

```yaml
å­˜å‚¨è¦æ±‚ä¸é€‰å‹[storage-selection]:
  å­˜å‚¨ç±»å‹å¯¹æ¯”:
    HDDæœºæ¢°ç¡¬ç›˜:
      IOPS: 100-200
      å»¶è¿Ÿ: 5-10ms
      ä»·æ ¼: Â¥0.3/GB
      é€‚ç”¨: å†·æ•°æ®ã€å½’æ¡£
      å“ç‰Œ: è¥¿éƒ¨æ•°æ®ã€å¸Œæ·ã€ä¸œèŠ
    
    SATA SSD:
      IOPS: 50K-100K
      å»¶è¿Ÿ: 0.5-1ms
      ä»·æ ¼: Â¥1/GB
      é€‚ç”¨: æ ‡å‡†è™šæ‹ŸåŒ–
      å“ç‰Œ: ä¸‰æ˜Ÿ860/870 EVO, è‹±ç¿è¾¾MX500
    
    NVMe SSD:
      IOPS: 500K-1M
      å»¶è¿Ÿ: 0.1-0.2ms
      ä»·æ ¼: Â¥2-3/GB
      é€‚ç”¨: é«˜æ€§èƒ½è™šæ‹ŸåŒ–
      å“ç‰Œ: ä¸‰æ˜Ÿ980 PRO, WD Black SN850, Intel P5800X
    
    ä¼ä¸šçº§NVMe:
      IOPS: 1M-2M
      å»¶è¿Ÿ: 0.05-0.1ms
      ä»·æ ¼: Â¥5-10/GB
      é€‚ç”¨: å…³é”®ä¸šåŠ¡
      å“ç‰Œ: Intel Optane, Samsung PM9A3, Micron 7450

  å­˜å‚¨é…ç½®æ–¹æ¡ˆ:
    å°å‹ç¯å¢ƒ:
      æ–¹æ¡ˆ1 (ç»æµå‹):
        - 2x 1TB NVMe SSD (RAID1) - ç³»ç»Ÿç›˜
        - 4x 4TB SATA SSD (RAID10) - æ•°æ®ç›˜
        - æ€»å®¹é‡: 9TBå¯ç”¨
        - æˆæœ¬: Â¥20,000
      
      æ–¹æ¡ˆ2 (æ€§èƒ½å‹):
        - 2x 1TB NVMe SSD (RAID1) - ç³»ç»Ÿç›˜
        - 6x 2TB NVMe SSD (RAID10) - æ•°æ®ç›˜
        - æ€»å®¹é‡: 7TBå¯ç”¨
        - æˆæœ¬: Â¥35,000
    
    ä¸­å‹ç¯å¢ƒ:
      æ–¹æ¡ˆ1 (å‡è¡¡å‹):
        - 2x 2TB NVMe SSD (RAID1) - ç³»ç»Ÿç›˜
        - 8x 4TB NVMe SSD (RAID10) - æ•°æ®ç›˜
        - 4x 8TB SATA SSD (RAID10) - å†·æ•°æ®
        - æ€»å®¹é‡: 34TBå¯ç”¨
        - æˆæœ¬: Â¥100,000
      
      æ–¹æ¡ˆ2 (å…¨é—ªå­˜):
        - 2x 2TB NVMe SSD (RAID1) - ç³»ç»Ÿç›˜
        - 12x 8TB NVMe SSD (RAID10) - æ•°æ®ç›˜
        - æ€»å®¹é‡: 50TBå¯ç”¨
        - æˆæœ¬: Â¥240,000
    
    å¤§å‹ç¯å¢ƒ:
      å…¨é—ªå­˜é˜µåˆ—:
        - Pure Storage FlashArray
        - Dell EMC PowerStore
        - NetApp AFF
        - å®¹é‡: 100TB+
        - æˆæœ¬: Â¥1,000,000+

  RAIDé…ç½®å»ºè®®:
    ç³»ç»Ÿç›˜: RAID1 (é•œåƒ)
      - ä¿è¯å¯é æ€§
      - 2å—ç›˜ç»„æˆ
    
    æ•°æ®ç›˜: RAID10 (é•œåƒæ¡å¸¦)
      - å¹³è¡¡æ€§èƒ½å’Œå¯é æ€§
      - 4/6/8å—ç›˜ç»„æˆ
      - 50%ç©ºé—´åˆ©ç”¨ç‡
    
    å¤§å®¹é‡: RAID6 (åŒé‡æ ¡éªŒ)
      - å…è®¸2å—ç›˜æ•…éšœ
      - 8å—ç›˜ä»¥ä¸Š
      - 75%ç©ºé—´åˆ©ç”¨ç‡
    
    æè‡´æ€§èƒ½: RAID0 (æ¡å¸¦)
      - ä»…ç”¨äºä¸´æ—¶æ•°æ®
      - æ— å†—ä½™ä¿æŠ¤
      - 100%ç©ºé—´åˆ©ç”¨ç‡
```

#### 2.1.4 ç½‘ç»œè®¾å¤‡é€‰å‹

**ç½‘ç»œæ¶æ„æœ€ä½³å®è·µ**[network-architecture]:

```yaml
ç½‘ç»œè¦æ±‚ä¸é€‰å‹[network-planning]:
  ç½‘å¡é€‰å‹:
    1GbE (åƒå…†):
      Intel I350-T4 (4å£)
        - ä»·æ ¼: Â¥800
        - é€‚ç”¨: ç®¡ç†ç½‘ç»œ
      
      Broadcom 5719 (4å£)
        - ä»·æ ¼: Â¥1,000
        - Dell/HPæœåŠ¡å™¨å¸¸ç”¨
    
    10GbE (ä¸‡å…†):
      Intel X710-DA2 (SFP+)
        - ä»·æ ¼: Â¥3,000
        - é€‚ç”¨: ä¸šåŠ¡ç½‘ç»œ
      
      Mellanox ConnectX-4 Lx
        - ä»·æ ¼: Â¥3,500
        - æ›´å¥½çš„æ€§èƒ½
    
    25GbE:
      Mellanox ConnectX-5
        - ä»·æ ¼: Â¥6,000
        - é€‚ç”¨: é«˜æ€§èƒ½åœºæ™¯
      
      Intel XXV710
        - ä»·æ ¼: Â¥5,500
        - ä¸Intel CPUé…åˆå¥½
    
    100GbE:
      Mellanox ConnectX-6
        - ä»·æ ¼: Â¥20,000
        - é€‚ç”¨: å¤§å‹æ•°æ®ä¸­å¿ƒ

  äº¤æ¢æœºé€‰å‹:
    æ¥å…¥äº¤æ¢æœº (1GbE):
      Cisco Catalyst 2960X (48å£)
        - ä»·æ ¼: Â¥15,000
        - ä¼ä¸šçº§å¯é 
      
      HPE OfficeConnect 1920S
        - ä»·æ ¼: Â¥8,000
        - æ€§ä»·æ¯”é«˜
      
      åä¸º S5720-SI
        - ä»·æ ¼: Â¥10,000
        - å›½äº§æ›¿ä»£
    
    æ±‡èšäº¤æ¢æœº (10GbE):
      Cisco Nexus 9300
        - ä»·æ ¼: Â¥100,000
        - æ•°æ®ä¸­å¿ƒçº§
      
      Arista 7050X
        - ä»·æ ¼: Â¥80,000
        - ä½å»¶è¿Ÿ
      
      åä¸º CE6800
        - ä»·æ ¼: Â¥70,000
        - å›½äº§é«˜ç«¯
    
    æ ¸å¿ƒäº¤æ¢æœº (100GbE):
      Cisco Nexus 9500
        - ä»·æ ¼: Â¥500,000+
        - å¤§å‹æ•°æ®ä¸­å¿ƒ
      
      Juniper QFX10000
        - ä»·æ ¼: Â¥400,000+
        - é«˜æ€§èƒ½

  ç½‘ç»œæ¶æ„:
    å°å‹ç¯å¢ƒ:
      - 2å°1GbEæ¥å…¥äº¤æ¢æœº (å †å )
      - ç®¡ç†ç½‘ç»œ: 1GbE
      - ä¸šåŠ¡ç½‘ç»œ: 1GbE
      - æˆæœ¬: Â¥30,000
    
    ä¸­å‹ç¯å¢ƒ:
      - 2å°10GbEæ±‡èšäº¤æ¢æœº
      - 4å°1GbEæ¥å…¥äº¤æ¢æœº
      - ç®¡ç†ç½‘ç»œ: 1GbE
      - ä¸šåŠ¡ç½‘ç»œ: 10GbE
      - å­˜å‚¨ç½‘ç»œ: 10GbE
      - æˆæœ¬: Â¥250,000
    
    å¤§å‹ç¯å¢ƒ:
      - 2å°100GbEæ ¸å¿ƒäº¤æ¢æœº
      - 4å°25GbEæ±‡èšäº¤æ¢æœº
      - 8å°10GbEæ¥å…¥äº¤æ¢æœº
      - æˆæœ¬: Â¥1,500,000
```

#### 2.1.5 å®Œæ•´ç¡¬ä»¶é…ç½®æ–¹æ¡ˆ

```yaml
æ–¹æ¡ˆå¯¹æ¯”:
  å°å‹ç¯å¢ƒ (é¢„ç®—Â¥15ä¸‡):
    æœåŠ¡å™¨: Dell PowerEdge R650 x2
      CPU: 2x Xeon Silver 4310 (12æ ¸)
      å†…å­˜: 8x 16GB DDR4 = 128GB
      å­˜å‚¨: 2x 1TB NVMe + 4x 4TB SATA SSD
      ç½‘ç»œ: 4x 1GbE + 2x 10GbE
      ä»·æ ¼: Â¥60,000/å° x2 = Â¥120,000
    
    äº¤æ¢æœº: HPE 1920S 48å£ x2
      ä»·æ ¼: Â¥8,000/å° x2 = Â¥16,000
    
    å…¶ä»–: çº¿ç¼†ã€æœºæŸœã€UPS
      ä»·æ ¼: Â¥15,000
    
    æ€»è®¡: Â¥151,000
    æ”¯æŒ: 50-100 VM
  
  ä¸­å‹ç¯å¢ƒ (é¢„ç®—Â¥50ä¸‡):
    æœåŠ¡å™¨: Dell PowerEdge R750 x4
      CPU: 2x Xeon Gold 6326 (16æ ¸)
      å†…å­˜: 12x 32GB DDR4 = 384GB
      å­˜å‚¨: 2x 2TB NVMe + 8x 4TB NVMe
      ç½‘ç»œ: 4x 1GbE + 2x 25GbE
      ä»·æ ¼: Â¥110,000/å° x4 = Â¥440,000
    
    äº¤æ¢æœº: 
      æ±‡èš: Cisco Nexus 9300 x2 = Â¥200,000
      æ¥å…¥: Cisco 2960X x4 = Â¥60,000
    
    å­˜å‚¨ç½‘ç»œ: 10GbEä¸“ç”¨
    
    å…¶ä»–: çº¿ç¼†ã€æœºæŸœã€UPS
      ä»·æ ¼: Â¥50,000
    
    æ€»è®¡: Â¥750,000
    æ”¯æŒ: 200-500 VM
  
  å¤§å‹ç¯å¢ƒ (é¢„ç®—Â¥300ä¸‡):
    æœåŠ¡å™¨: Dell PowerEdge R760 x8
      CPU: 2x AMD EPYC 7763 (64æ ¸)
      å†…å­˜: 24x 64GB DDR4 = 1.5TB
      å­˜å‚¨: 2x 4TB NVMe + 12x 8TB NVMe
      ç½‘ç»œ: 4x 1GbE + 4x 25GbE
      ä»·æ ¼: Â¥280,000/å° x8 = Â¥2,240,000
    
    å­˜å‚¨: Pure Storage FlashArray
      å®¹é‡: 100TB å…¨é—ªå­˜
      ä»·æ ¼: Â¥1,500,000
    
    ç½‘ç»œ:
      æ ¸å¿ƒ: Cisco Nexus 9500 x2 = Â¥1,000,000
      æ±‡èš: Arista 7050X x4 = Â¥320,000
      æ¥å…¥: Cisco 2960X x8 = Â¥120,000
    
    å…¶ä»–: ä¸“ä¸šæœºæŸœã€é«˜ç«¯UPSã€å†·é€šé“
      ä»·æ ¼: Â¥200,000
    
    æ€»è®¡: Â¥5,380,000
    æ”¯æŒ: 1000+ VM
```

#### 2.1.6 BIOS/å›ºä»¶é…ç½®æ¸…å• ğŸ†•

**BIOSè™šæ‹ŸåŒ–é…ç½®æ ‡å‡†**[bios-virtualization]:

```yaml
BIOSé…ç½®è¦æ±‚[bios-settings]:
  è™šæ‹ŸåŒ–æŠ€æœ¯:
    âœ… Intel VT-x / AMD-V: å¿…é¡»å¯ç”¨
      - ä½ç½®: Advanced â†’ Processor Configuration â†’ Intel VT-x
      - è¯´æ˜: ç¡¬ä»¶è™šæ‹ŸåŒ–åŸºç¡€
    
    âœ… Intel VT-d / AMD-Vi: å¼ºçƒˆæ¨è
      - ä½ç½®: Advanced â†’ System Agent Configuration â†’ VT-d
      - è¯´æ˜: IOè™šæ‹ŸåŒ–ï¼ŒPCIç›´é€šå¿…é¡»
    
    âœ… EPT / RVI: è‡ªåŠ¨å¯ç”¨
      - è¯´æ˜: å†…å­˜è™šæ‹ŸåŒ–
      - ä¸VT-xåŒæ—¶å¯ç”¨
  
  ç”µæºç®¡ç†:
    âœ… Power Technology: è®¾ç½®ä¸º Custom
    âœ… Energy Efficient Turbo: Disabled
    âœ… C-States: Disabled (ç¦ç”¨çœç”µçŠ¶æ€)
    âœ… C1E: Disabled
    âœ… Turbo Boost: Enabled (å¯ç”¨ç¿é¢‘)
    è¯´æ˜: ä¿è¯ç¨³å®šæ€§èƒ½ï¼Œé¿å…å»¶è¿Ÿæ³¢åŠ¨
  
  å†…å­˜é…ç½®:
    âœ… Node Interleaving: Disabled
    âœ… Memory Patrol Scrub: Disabled
    âœ… ECC Memory: Enabled (å¦‚æœæ”¯æŒ)
    âœ… Memory Speed: æœ€é«˜æ”¯æŒé€Ÿåº¦
  
  å¯åŠ¨é€‰é¡¹:
    âœ… Boot Mode: UEFI (ä¸è¦ç”¨Legacy)
    âœ… Secure Boot: Disabled (è™šæ‹ŸåŒ–ç¯å¢ƒç¦ç”¨)
    âœ… Network Boot: æŒ‰éœ€å¯ç”¨ (PXE)
  
  å…¶ä»–è®¾ç½®:
    âœ… Hyper-Threading: Enabled (è¶…çº¿ç¨‹)
    âœ… NUMA: Enabled (NUMAæ¶æ„)
    âœ… SR-IOV: Enabled (ç½‘å¡è™šæ‹ŸåŒ–)
    âœ… ACS: Enabled (PCIeè®¿é—®æ§åˆ¶)

æˆ´å°”æœåŠ¡å™¨ (Dell PowerEdge):
  è¿›å…¥BIOS: å¼€æœºæŒ‰F2
  å…³é”®è·¯å¾„:
    1. System BIOS â†’ Processor Settings
       - Virtualization Technology: Enabled
       - VT for Direct I/O: Enabled
    
    2. System BIOS â†’ Integrated Devices
       - SR-IOV Global Enable: Enabled
    
    3. System BIOS â†’ System Profile Settings
       - System Profile: Performance (æ€§èƒ½æ¨¡å¼)
       - C States: Disabled
    
    4. iDRAC Settings â†’ Network
       - é…ç½®è¿œç¨‹ç®¡ç†IP

HPEæœåŠ¡å™¨ (ProLiant):
  è¿›å…¥BIOS: å¼€æœºæŒ‰F9
  å…³é”®è·¯å¾„:
    1. System Options â†’ Processor Options
       - Intel Virtualization Technology: Enabled
       - Intel VT-d: Enabled
    
    2. System Options â†’ BIOS/Platform Configuration
       - Workload Profile: Virtualization - Max Performance
    
    3. Power Management â†’ Advanced Power Options
       - Power Regulator: HP Static High Performance Mode

è”æƒ³æœåŠ¡å™¨ (ThinkSystem):
  è¿›å…¥BIOS: å¼€æœºæŒ‰F1
  å…³é”®è·¯å¾„:
    1. System Settings â†’ Processors
       - Intel Virtualization Technology: Enabled
       - VT-d: Enabled
    
    2. System Settings â†’ Power
       - Operating Mode: Maximum Performance

åä¸ºæœåŠ¡å™¨ (FusionServer):
  è¿›å…¥BIOS: å¼€æœºæŒ‰Delete
  å…³é”®è·¯å¾„:
    1. Advanced â†’ Processor Configuration
       - Intel Virtualization Technology: Enabled
       - VT-d: Enabled
    
    2. Advanced â†’ Power Configuration
       - Power Policy: Performance
```

#### 2.1.7 ç¡¬ä»¶å…¼å®¹æ€§æ¸…å• (HCL) ğŸ†•

**VMware HCLéªŒè¯æ ‡å‡†**[vmware-hcl]:

```yaml
VMware vSphere 8.0 å…¼å®¹æ€§[vsphere-compatibility]:
  è®¤è¯æœåŠ¡å™¨å“ç‰Œ:
    Tier 1 (é¡¶çº§æ”¯æŒ):
      âœ… Dell EMC PowerEdge
        - R650, R750, R760 ç³»åˆ—
        - å®Œæ•´æ”¯æŒï¼Œæœ€æ–°é©±åŠ¨
      
      âœ… HPE ProLiant
        - DL360 Gen10/Gen11
        - å®Œæ•´æ”¯æŒï¼Œè®¤è¯å®Œå–„
      
      âœ… Cisco UCS
        - C-Series, B-Series
        - æ·±åº¦é›†æˆ
      
      âœ… æµªæ½® (Inspur)
        - NF5280M6, NF8260M6
        - å›½äº§æœåŠ¡å™¨æ”¯æŒå¥½
    
    Tier 2 (è‰¯å¥½æ”¯æŒ):
      âœ… è”æƒ³ ThinkSystem
        - SR650, SR850
      
      âœ… è¶…å¾® SuperMicro
        - æ€§ä»·æ¯”é«˜
      
      âœ… åä¸º FusionServer
        - 2288H V5, 5288 V5
  
  è®¤è¯CPU:
    Intel:
      âœ… Xeon Scalable (å…¨ç³»åˆ—)
      âœ… Xeon E (å…¥é—¨çº§)
      âŒ Core/Pentium (ä¸æ”¯æŒ)
    
    AMD:
      âœ… EPYC 7002/7003 ç³»åˆ—
      âœ… EPYC 9004 ç³»åˆ— (æœ€æ–°)
  
  è®¤è¯ç½‘å¡:
    âœ… Intel X710/XXV710 ç³»åˆ—
    âœ… Broadcom BCM57xxx ç³»åˆ—
    âœ… Mellanox ConnectX-4/5/6
    âš ï¸ Realtek (éƒ¨åˆ†å‹å·ä¸æ”¯æŒ)
  
  è®¤è¯å­˜å‚¨æ§åˆ¶å™¨:
    âœ… Dell PERC H730P/H750
    âœ… HPE Smart Array P408i
    âœ… Broadcom MegaRAID
    âœ… LSI/Avago 9361/9460

  æŸ¥è¯¢HCL:
    å®˜æ–¹ç½‘ç«™: https://www.vmware.com/resources/compatibility
    æœç´¢æ­¥éª¤:
      1. é€‰æ‹©vSphereç‰ˆæœ¬
      2. è¾“å…¥æœåŠ¡å™¨å‹å·
      3. æŸ¥çœ‹å…¼å®¹æ€§çŠ¶æ€
      4. ä¸‹è½½é©±åŠ¨ç¨‹åº

Kubernetesç¡¬ä»¶è¦æ±‚:
  CPU:
    âœ… x86_64 æ¶æ„
    âœ… ARM64 æ¶æ„ (å®éªŒæ€§)
    âŒ 32ä½ç³»ç»Ÿä¸æ”¯æŒ
  
  å†…å­˜:
    MasterèŠ‚ç‚¹: æœ€ä½4GB (æ¨è8GB+)
    WorkerèŠ‚ç‚¹: æœ€ä½2GB (æ¨è8GB+)
  
  å­˜å‚¨:
    âœ… æœ¬åœ°SSD
    âœ… ç½‘ç»œå­˜å‚¨ (NFS/iSCSI)
    âœ… åˆ†å¸ƒå¼å­˜å‚¨ (Ceph/GlusterFS)

å›½äº§åŒ–ç¡¬ä»¶å…¼å®¹:
  CPU:
    âœ… æµ·å…‰ (Hygon) - x86å…¼å®¹
      - æ”¯æŒ: VMware, KVM, Docker, K8s
      - ç”Ÿæ€: è¾ƒå¥½
    
    âœ… é²²é¹ (Kunpeng) - ARM64
      - æ”¯æŒ: KVM, Docker, K8s
      - ç”Ÿæ€: å¿«é€Ÿå‘å±•
    
    âœ… é£è…¾ (Phytium) - ARM64
      - æ”¯æŒ: KVM, Docker
      - ç”Ÿæ€: æŒç»­å®Œå–„
    
    âš ï¸ é¾™èŠ¯ (Loongson) - LoongArch
      - æ”¯æŒ: æœ‰é™
      - ç”Ÿæ€: åˆæœŸé˜¶æ®µ
  
  æ“ä½œç³»ç»Ÿ:
    âœ… éº’éºŸ (Kylin)
    âœ… ç»Ÿä¿¡ (UOS)
    âœ… ä¸­æ ‡éº’éºŸ
    âœ… æ¬§æ‹‰ (openEuler)

ç¡¬ä»¶æµ‹è¯•æ¸…å•:
  è´­ä¹°å‰éªŒè¯:
    â–¡ æŸ¥è¯¢å®˜æ–¹HCL
    â–¡ ç¡®è®¤BIOSç‰ˆæœ¬
    â–¡ ç¡®è®¤å›ºä»¶ç‰ˆæœ¬
    â–¡ æŸ¥çœ‹ç”¨æˆ·è¯„ä»·
  
  æ”¶è´§åæµ‹è¯•:
    â–¡ ç¡¬ä»¶è‡ªæ£€
    â–¡ å†…å­˜æµ‹è¯• (memtest86+)
    â–¡ ç¡¬ç›˜æµ‹è¯• (smartctl)
    â–¡ ç½‘ç»œæµ‹è¯• (iperf3)
    â–¡ CPUå‹åŠ›æµ‹è¯• (stress-ng)
  
  å®‰è£…å‰é…ç½®:
    â–¡ æ›´æ–°BIOS
    â–¡ æ›´æ–°å›ºä»¶
    â–¡ é…ç½®RAID
    â–¡ é…ç½®ç½‘ç»œ
    â–¡ å¯¼å…¥iDRAC/iLOè¯ä¹¦
```

### 2.2 è½¯ä»¶è¦æ±‚

```yaml
æ“ä½œç³»ç»Ÿè¦æ±‚:
  è™šæ‹ŸåŒ–å®¿ä¸»æœº:
    VMware ESXi:
      - ç‰ˆæœ¬: 7.0 U3 / 8.0 U1
      - æœ€å°å†…å­˜: 8GB
      - æœ€å°ç£ç›˜: 32GB (æ¨è140GB)
      - ç½‘ç»œ: 1Gbps+
    
    Linux KVM:
      Ubuntu Server: 22.04 LTS
      CentOS Stream: 9
      RHEL: 8.6+
      å†…æ ¸: 5.15+
      QEMU/KVM: 6.2+
    
    Windows Hyper-V:
      - Windows Server 2022
      - Hyper-Vè§’è‰²
      - æœ€å°å†…å­˜: 16GB
  
  å®¹å™¨å®¿ä¸»æœº:
    æ¨èç³»ç»Ÿ:
      Ubuntu Server: 22.04 LTS
      RHEL: 8.6 / 9.0
      CentOS Stream: 9
      Rocky Linux: 9
    
    å†…æ ¸è¦æ±‚:
      - ç‰ˆæœ¬: 5.10+ (æ¨è5.15+)
      - cgroup v2æ”¯æŒ
      - namespaceæ”¯æŒ
      - overlay2æ–‡ä»¶ç³»ç»Ÿ
    
    å®¹å™¨è¿è¡Œæ—¶:
      Docker: 24.0+
      containerd: 1.6+
      Podman: 4.5+
    
    ç¼–æ’ç³»ç»Ÿ:
      Kubernetes: 1.28+ (æ¨è1.29/1.30)
      OpenShift: 4.13+

  ç®¡ç†å·¥å…·:
    vCenter Server: 8.0
    Kubernetes Dashboard: 2.7+
    Portainer: 2.19+
    Rancher: 2.7+

ç³»ç»Ÿä¼˜åŒ–é…ç½®:
  å†…æ ¸å‚æ•° (/etc/sysctl.conf):
    ```bash
    # ç½‘ç»œä¼˜åŒ–
    net.ipv4.ip_forward = 1
    net.bridge.bridge-nf-call-iptables = 1
    net.bridge.bridge-nf-call-ip6tables = 1
    
    # æ€§èƒ½ä¼˜åŒ–
    vm.swappiness = 0
    vm.overcommit_memory = 1
    net.ipv4.tcp_keepalive_time = 600
    net.ipv4.tcp_keepalive_intvl = 30
    net.ipv4.tcp_keepalive_probes = 10
    
    # æ–‡ä»¶å¥æŸ„
    fs.file-max = 2097152
    fs.inotify.max_user_watches = 524288
    ```
  
  èµ„æºé™åˆ¶ (/etc/security/limits.conf):
    ```bash
    * soft nofile 655360
    * hard nofile 655360
    * soft nproc 655360
    * hard nproc 655360
    * soft memlock unlimited
    * hard memlock unlimited
    ```
  
  ç¦ç”¨æœåŠ¡:
    ```bash
    # ç¦ç”¨é˜²ç«å¢™ (æˆ–é…ç½®è§„åˆ™)
    systemctl stop firewalld
    systemctl disable firewalld
    
    # ç¦ç”¨SELinux (æˆ–è®¾ç½®ä¸ºPermissive)
    setenforce 0
    sed -i 's/SELINUX=enforcing$/SELINUX=permissive/' /etc/selinux/config
    
    # ç¦ç”¨swap
    swapoff -a
    sed -i '/swap/d' /etc/fstab
    ```
```

#### 2.2.1 è½¯ä»¶å®‰è£…è„šæœ¬ ğŸ†•

```bash
#!/bin/bash
# ç³»ç»Ÿåˆå§‹åŒ–å’Œè½¯ä»¶å®‰è£…è„šæœ¬

set -e

echo "=== ç³»ç»Ÿåˆå§‹åŒ– ==="

# æ›´æ–°ç³»ç»Ÿ
apt update && apt upgrade -y

# å®‰è£…åŸºç¡€å·¥å…·
apt install -y \
    curl wget git vim htop iotop \
    net-tools iputils-ping dnsutils \
    build-essential cmake \
    python3 python3-pip \
    jq yq

# é…ç½®æ—¶åŒº
timedatectl set-timezone Asia/Shanghai

# é…ç½®NTP
apt install -y chrony
systemctl enable chrony
systemctl start chrony

# å®‰è£…Docker
echo "=== å®‰è£…Docker ==="
curl -fsSL https://get.docker.com | bash
systemctl enable docker
systemctl start docker

# é…ç½®Docker
mkdir -p /etc/docker
cat > /etc/docker/daemon.json <<EOF
{
  "exec-opts": ["native.cgroupdriver=systemd"],
  "log-driver": "json-file",
  "log-opts": {
    "max-size": "100m",
    "max-file": "3"
  },
  "storage-driver": "overlay2",
  "storage-opts": [
    "overlay2.override_kernel_check=true"
  ],
  "registry-mirrors": [
    "https://docker.mirrors.ustc.edu.cn"
  ]
}
EOF

systemctl restart docker

# å®‰è£…Kuberneteså·¥å…·
echo "=== å®‰è£…Kubernetes ==="
curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add -
cat <<EOF | tee /etc/apt/sources.list.d/kubernetes.list
deb https://apt.kubernetes.io/ kubernetes-xenial main
EOF

apt update
apt install -y kubelet=1.29.0-00 kubeadm=1.29.0-00 kubectl=1.29.0-00
apt-mark hold kubelet kubeadm kubectl

# åŠ è½½å†…æ ¸æ¨¡å—
modprobe overlay
modprobe br_netfilter

cat > /etc/modules-load.d/k8s.conf <<EOF
overlay
br_netfilter
EOF

# é…ç½®å†…æ ¸å‚æ•°
cat > /etc/sysctl.d/k8s.conf <<EOF
net.bridge.bridge-nf-call-iptables  = 1
net.bridge.bridge-nf-call-ip6tables = 1
net.ipv4.ip_forward                 = 1
EOF

sysctl --system

echo "=== å®‰è£…å®Œæˆ ==="
echo "è¯·é‡å¯ç³»ç»Ÿ: sudo reboot"
```

### 2.3 ç½‘ç»œé…ç½®

```yaml
ç½‘ç»œé…ç½®:
  ç½‘ç»œæ‹“æ‰‘:
    ç®¡ç†ç½‘ç»œ: 192.168.1.0/24
    å­˜å‚¨ç½‘ç»œ: 192.168.2.0/24
    ä¸šåŠ¡ç½‘ç»œ: 192.168.3.0/24
    å¤–éƒ¨ç½‘ç»œ: 10.0.0.0/8
  
  ç«¯å£è¦æ±‚:
    SSH: 22
    HTTP: 80
    HTTPS: 443
    Docker API: 2376
    Kubernetes API: 6443
    etcd: 2379-2380
    kubelet: 10250
    kube-proxy: 10256
```

## 3. è™šæ‹ŸåŒ–éƒ¨ç½²

### 3.1 VMware vSphereéƒ¨ç½²

**VMware vSphere 8.0æ¶æ„**[vsphere-architecture]:

#### 3.1.1 ESXiå®‰è£…å‡†å¤‡

**ESXiå®‰è£…æŒ‡å—**[esxi-installation]:

```yaml
å®‰è£…å‰å‡†å¤‡[esxi-requirements]:
  ä¸‹è½½ESXi:
    ç‰ˆæœ¬: VMware ESXi 8.0 U2
    æ¥æº: https://my.vmware.com
    æ–‡ä»¶: VMware-VMvisor-Installer-8.0U2-xxx.iso
    å¤§å°: ~500MB
  
  åˆ¶ä½œå¯åŠ¨Uç›˜:
    Windowsæ–¹æ³•:
      å·¥å…·: Rufus 3.20+
      æ­¥éª¤:
        1. æ’å…¥Uç›˜ (8GB+)
        2. æ‰“å¼€Rufus
        3. é€‰æ‹©ESXi ISO
        4. åˆ†åŒºç±»å‹: GPT
        5. ç›®æ ‡ç³»ç»Ÿ: UEFI
        6. æ–‡ä»¶ç³»ç»Ÿ: FAT32
        7. ç‚¹å‡»å¼€å§‹
    
    Linux/Macæ–¹æ³•:
      ```bash
      # æŸ¥æ‰¾Uç›˜è®¾å¤‡
      lsblk
      
      # å†™å…¥ISO (å‡è®¾Uç›˜æ˜¯/dev/sdb)
      sudo dd if=VMware-VMvisor-Installer-8.0U2.iso of=/dev/sdb bs=4M status=progress
      sudo sync
      ```
  
  æœåŠ¡å™¨å‡†å¤‡:
    â–¡ BIOSå·²é…ç½®è™šæ‹ŸåŒ–ï¼ˆå‚è€ƒ2.1.6ï¼‰
    â–¡ RAIDå·²é…ç½®
    â–¡ ç½‘çº¿å·²è¿æ¥
    â–¡ iDRAC/iLOå·²é…ç½®ï¼ˆå¯é€‰ï¼‰
    â–¡ è®°å½•ç¡¬ä»¶ä¿¡æ¯ï¼ˆåºåˆ—å·ã€ç½‘å¡MACç­‰ï¼‰

è‡ªåŠ¨åŒ–å®‰è£…é…ç½® (kickstart):
  åˆ›å»ºé…ç½®æ–‡ä»¶ (ks.cfg):
    ```bash
    # ESXiè‡ªåŠ¨åŒ–å®‰è£…é…ç½®
    vmaccepteula
    
    # å®‰è£…åˆ°ç¬¬ä¸€å—ç¡¬ç›˜
    install --firstdisk --overwritevmfs
    
    # Rootå¯†ç 
    rootpw VMware123!
    
    # ç½‘ç»œé…ç½®
    network --bootproto=static --ip=192.168.1.101 --netmask=255.255.255.0 --gateway=192.168.1.1 --nameserver=8.8.8.8,8.8.4.4 --hostname=esxi-01.domain.local --vlanid=0
    
    # å®‰è£…åé‡å¯
    reboot
    
    # å®‰è£…åè„šæœ¬
    %firstboot --interpreter=busybox
    
    # å¯ç”¨SSHå’ŒESXi Shell
    vim-cmd hostsvc/enable_ssh
    vim-cmd hostsvc/start_ssh
    vim-cmd hostsvc/enable_esx_shell
    vim-cmd hostsvc/start_esx_shell
    
    # é…ç½®NTP
    esxcli system ntp set --server=ntp.aliyun.com
    esxcli system ntp set --enabled=yes
    
    # é…ç½®é˜²ç«å¢™å…è®¸NTP
    esxcli network firewall ruleset set --ruleset-id=ntpClient --enabled=yes
    
    # è®¾ç½®ä¸»æœºå
    esxcli system hostname set --fqdn=esxi-01.domain.local
    
    # é‡å¯ç®¡ç†æœåŠ¡
    /etc/init.d/hostd restart
    /etc/init.d/vpxa restart
    ```
```

#### 3.1.2 ESXiäº¤äº’å¼å®‰è£…æ­¥éª¤ ğŸ†•

```yaml
å®‰è£…æµç¨‹:
  æ­¥éª¤1: å¯åŠ¨å®‰è£…ç¨‹åº
    1. æ’å…¥Uç›˜ï¼Œå¼€æœº
    2. è¿›å…¥BIOSè®¾ç½®å¯åŠ¨é¡ºåºï¼ˆF11/F12ï¼‰
    3. é€‰æ‹©Uç›˜å¯åŠ¨
    4. ç­‰å¾…åŠ è½½ï¼ˆçº¦30ç§’ï¼‰
    5. çœ‹åˆ°æ¬¢è¿ç•Œé¢ "Welcome to VMware ESXi"
  
  æ­¥éª¤2: æ¥å—è®¸å¯åè®®
    1. æŒ‰ Enter ç»§ç»­
    2. é˜…è¯»EULA
    3. æŒ‰ F11 æ¥å—åè®®
  
  æ­¥éª¤3: é€‰æ‹©å®‰è£…ç£ç›˜
    1. æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨ç£ç›˜
    2. ä½¿ç”¨æ–¹å‘é”®é€‰æ‹©ç›®æ ‡ç£ç›˜
       âš ï¸ è­¦å‘Š: ç£ç›˜ä¸Šæ‰€æœ‰æ•°æ®å°†è¢«æ¸…é™¤
    3. æŒ‰ Enter ç¡®è®¤
    
    æ¨èé€‰æ‹©:
      - RAID1é•œåƒç›˜ï¼ˆæ¨èï¼‰
      - æœ¬åœ°SSD
      - USB/SDå¡ï¼ˆå°å‹ç¯å¢ƒï¼‰
  
  æ­¥éª¤4: é€‰æ‹©é”®ç›˜å¸ƒå±€
    1. é»˜è®¤: US Default
    2. ä¸­æ–‡ç¯å¢ƒå¯é€‰æ‹©
    3. æŒ‰ Enter ç»§ç»­
  
  æ­¥éª¤5: è®¾ç½®Rootå¯†ç 
    1. è¾“å…¥å¯†ç ï¼ˆè‡³å°‘7ä¸ªå­—ç¬¦ï¼‰
    2. å†æ¬¡ç¡®è®¤å¯†ç 
    3. æŒ‰ Enter ç»§ç»­
    
    å¯†ç ç­–ç•¥:
      âœ… è‡³å°‘7ä¸ªå­—ç¬¦
      âœ… åŒ…å«å¤§å°å†™å­—æ¯
      âœ… åŒ…å«æ•°å­—
      âœ… åŒ…å«ç‰¹æ®Šå­—ç¬¦
      ç¤ºä¾‹: VMware@2025
  
  æ­¥éª¤6: ç¡®è®¤å®‰è£…
    1. æ£€æŸ¥å®‰è£…æ‘˜è¦
       - å®‰è£…ç£ç›˜
       - é”®ç›˜å¸ƒå±€
    2. æŒ‰ F11 å¼€å§‹å®‰è£…
    3. ç­‰å¾…å®‰è£…ï¼ˆçº¦5-10åˆ†é’Ÿï¼‰
    4. æ˜¾ç¤º "Installation Complete"
    5. ç§»é™¤Uç›˜
    6. æŒ‰ Enter é‡å¯

å®‰è£…åé¦–æ¬¡é…ç½®:
  æ­¥éª¤1: ç™»å½•æ§åˆ¶å°
    1. é‡å¯åè¿›å…¥DCUI (Direct Console User Interface)
    2. æŒ‰ F2 è¿›å…¥ç³»ç»Ÿå®šåˆ¶
    3. è¾“å…¥rootå¯†ç 
  
  æ­¥éª¤2: é…ç½®ç®¡ç†ç½‘ç»œ
    1. é€‰æ‹© "Configure Management Network"
    2. é…ç½®é€‰é¡¹:
       a. Network Adapters
          - é€‰æ‹©ç®¡ç†ç½‘å¡ï¼ˆvmnic0ï¼‰
          - æŒ‰ç©ºæ ¼é€‰ä¸­
       
       b. VLAN (optional)
          - è¾“å…¥VLAN IDï¼ˆå¦‚æœ‰ï¼‰
          - ç•™ç©ºåˆ™ä½¿ç”¨åŸç”ŸVLAN
       
       c. IPv4 Configuration
          - é€‰æ‹© "Set static IPv4 address"
          - IPåœ°å€: 192.168.1.101
          - å­ç½‘æ©ç : 255.255.255.0
          - é»˜è®¤ç½‘å…³: 192.168.1.1
       
       d. IPv6 Configuration
          - é»˜è®¤ç¦ç”¨ï¼ˆæŒ‰éœ€å¯ç”¨ï¼‰
       
       e. DNS Configuration
          - ä¸»DNS: 8.8.8.8
          - å¤‡DNS: 8.8.4.4
          - ä¸»æœºå: esxi-01.domain.local
       
    3. æŒ‰ Esc è¿”å›
    4. æŒ‰ Y ç¡®è®¤æ›´æ”¹å¹¶é‡å¯ç½‘ç»œ
  
  æ­¥éª¤3: æµ‹è¯•ç½‘ç»œè¿æ¥
    1. é€‰æ‹© "Test Management Network"
    2. æŒ‰ Enter æµ‹è¯•
    3. æ£€æŸ¥:
       - Ping ç½‘å…³: OK
       - Ping ä¸»DNS: OK
       - Ping å¤‡DNS: OK
       - Resolve hostname: OK
  
  æ­¥éª¤4: å¯ç”¨æœåŠ¡
    1. è¿”å›ä¸»èœå•
    2. é€‰æ‹© "Troubleshooting Options"
    3. å¯ç”¨ "Enable ESXi Shell"
    4. å¯ç”¨ "Enable SSH"
    5. æŒ‰ Esc è¿”å›

Webè®¿é—®é…ç½®:
  è®¿é—®ESXi:
    URL: https://192.168.1.101
    ç”¨æˆ·: root
    å¯†ç : è®¾ç½®çš„Rootå¯†ç 
  
  ç•Œé¢å¯¼èˆª:
    å·¦ä¾§èœå•:
      - ä¸»æœº: æŸ¥çœ‹ç¡¬ä»¶ä¿¡æ¯
      - è™šæ‹Ÿæœº: ç®¡ç†è™šæ‹Ÿæœº
      - å­˜å‚¨: ç®¡ç†æ•°æ®å­˜å‚¨
      - ç½‘ç»œ: ç®¡ç†ç½‘ç»œ
      - è®¸å¯: æ·»åŠ è®¸å¯è¯
  
  åŸºç¡€é…ç½®:
    1. è®¸å¯è¯é…ç½®:
       - å¯¼èˆªåˆ° ä¸»æœº â†’ ç®¡ç† â†’ è®¸å¯
       - ç‚¹å‡» "åˆ†é…è®¸å¯è¯"
       - è¾“å…¥è®¸å¯è¯å¯†é’¥ï¼ˆ60å¤©è¯„ä¼°æœŸï¼‰
    
    2. æ—¶é—´é…ç½®:
       - å¯¼èˆªåˆ° ä¸»æœº â†’ ç®¡ç† â†’ æ—¶é—´å’Œæ—¥æœŸ
       - é€‰æ‹© "ä½¿ç”¨ç½‘ç»œæ—¶é—´åè®®"
       - æ·»åŠ NTPæœåŠ¡å™¨: ntp.aliyun.com
       - å¯åŠ¨NTPæœåŠ¡
    
    3. é˜²ç«å¢™é…ç½®:
       - å¯¼èˆªåˆ° ä¸»æœº â†’ ç®¡ç† â†’ å®‰å…¨é…ç½®æ–‡ä»¶
       - ç¼–è¾‘é˜²ç«å¢™è§„åˆ™
       - å…è®¸éœ€è¦çš„æœåŠ¡ï¼ˆSSHã€NTPç­‰ï¼‰
```

#### 3.1.3 ESXiå­˜å‚¨é…ç½® ğŸ†•

```yaml
æ•°æ®å­˜å‚¨é…ç½®:
  åˆ›å»ºVMFSæ•°æ®å­˜å‚¨:
    æ­¥éª¤:
      1. å¯¼èˆªåˆ° å­˜å‚¨ â†’ æ•°æ®å­˜å‚¨
      2. ç‚¹å‡» "æ–°å»ºæ•°æ®å­˜å‚¨"
      3. é€‰æ‹©ç±»å‹: "åˆ›å»ºæ–°VMFSæ•°æ®å­˜å‚¨"
      4. è¾“å…¥åç§°: datastore1
      5. é€‰æ‹©è®¾å¤‡ï¼ˆæœªä½¿ç”¨çš„ç£ç›˜/RAIDï¼‰
      6. é€‰æ‹©VMFSç‰ˆæœ¬: VMFS6
      7. åˆ†åŒºé€‰é¡¹:
         - ä½¿ç”¨å…¨éƒ¨å¯ç”¨ç©ºé—´ï¼ˆæ¨èï¼‰
         - æˆ–è‡ªå®šä¹‰å¤§å°
      8. å®Œæˆåˆ›å»º
  
  åˆ›å»ºNFSæ•°æ®å­˜å‚¨:
    å‰æ: å·²æœ‰NFSæœåŠ¡å™¨
    æ­¥éª¤:
      1. å¯¼èˆªåˆ° å­˜å‚¨ â†’ æ•°æ®å­˜å‚¨
      2. ç‚¹å‡» "æ–°å»ºæ•°æ®å­˜å‚¨"
      3. é€‰æ‹©ç±»å‹: "æŒ‚è½½NFSæ•°æ®å­˜å‚¨"
      4. é…ç½®:
         - åç§°: nfs-datastore1
         - NFSæœåŠ¡å™¨: 192.168.2.10
         - NFSå…±äº«: /export/vmware
         - NFSç‰ˆæœ¬: NFS 3 (æ¨è)
      5. å®Œæˆåˆ›å»º
  
  å­˜å‚¨æœ€ä½³å®è·µ:
    å‘½åè§„èŒƒ:
      - æœ¬åœ°å­˜å‚¨: local-esxi01
      - SSDå­˜å‚¨: ssd-datastore1
      - NFSå­˜å‚¨: nfs-storage1
      - iSCSIå­˜å‚¨: iscsi-lun01
    
    æ€§èƒ½ä¼˜åŒ–:
      âœ… ç³»ç»Ÿç›˜: ä½¿ç”¨SSD
      âœ… VMç£ç›˜: ä½¿ç”¨NVMeæˆ–SSD
      âœ… ISOå­˜å‚¨: å¯ç”¨HDD
      âœ… å¯ç”¨VAAI (ç¡¬ä»¶åŠ é€Ÿ)
      âœ… é…ç½®å¤šè·¯å¾„ (å¤šé“¾è·¯)
```

#### 3.1.4 ESXiç½‘ç»œé…ç½® ğŸ†•

```yaml
è™šæ‹Ÿäº¤æ¢æœºé…ç½®:
  åˆ›å»ºæ ‡å‡†äº¤æ¢æœº (vSwitch):
    æ­¥éª¤:
      1. å¯¼èˆªåˆ° ç½‘ç»œ â†’ è™šæ‹Ÿäº¤æ¢æœº
      2. ç‚¹å‡» "æ·»åŠ æ ‡å‡†è™šæ‹Ÿäº¤æ¢æœº"
      3. é…ç½®:
         - åç§°: vSwitch1
         - MTU: 1500 (æ ‡å‡†) æˆ– 9000 (Jumbo Frame)
         - ä¸Šè¡Œé“¾è·¯: vmnic1, vmnic2 (é“¾è·¯èšåˆ)
         - å®‰å…¨ç­–ç•¥: æ‹’ç»æ··æ‚æ¨¡å¼
      4. å®Œæˆåˆ›å»º
  
  åˆ›å»ºç«¯å£ç»„:
    ä¸šåŠ¡ç½‘ç»œç«¯å£ç»„:
      1. å¯¼èˆªåˆ° ç½‘ç»œ â†’ ç«¯å£ç»„
      2. ç‚¹å‡» "æ·»åŠ ç«¯å£ç»„"
      3. é…ç½®:
         - åç§°: VM-Network
         - VLAN ID: 10
         - è™šæ‹Ÿäº¤æ¢æœº: vSwitch1
         - å®‰å…¨ç­–ç•¥: ç»§æ‰¿è‡ªvSwitch
      4. å®Œæˆåˆ›å»º
    
    å­˜å‚¨ç½‘ç»œç«¯å£ç»„:
      é…ç½®:
        - åç§°: Storage-Network
        - VLAN ID: 20
        - è™šæ‹Ÿäº¤æ¢æœº: vSwitch0
        - ä»…ç”¨äºiSCSI/NFS
    
    vMotionç½‘ç»œç«¯å£ç»„:
      é…ç½®:
        - åç§°: vMotion-Network
        - VLAN ID: 30
        - è™šæ‹Ÿäº¤æ¢æœº: vSwitch0
        - å¯ç”¨vMotionæµé‡
  
  ç½‘ç»œæœ€ä½³å®è·µ:
    ç‰©ç†ç½‘å¡åˆ†é…:
      ç®¡ç†ç½‘ç»œ: vmnic0 (ç‹¬ç«‹)
      vMotion: vmnic1 (ç‹¬ç«‹)
      å­˜å‚¨ç½‘ç»œ: vmnic2, vmnic3 (ç»‘å®š)
      VMä¸šåŠ¡ç½‘ç»œ: vmnic4, vmnic5 (ç»‘å®š)
    
    é“¾è·¯èšåˆé…ç½®:
      ç­–ç•¥: 
        - Route based on originating virtual port (é»˜è®¤)
        - Route based on IP hash (éœ€è¦äº¤æ¢æœºæ”¯æŒ)
        - Route based on physical NIC load (è´Ÿè½½å‡è¡¡)
      
      æ•…éšœåˆ‡æ¢é¡ºåº:
        - Active adapters: vmnic4, vmnic5
        - Standby adapters: (ç©º)
        - Unused adapters: (ç©º)
```

#### 3.1.5 vCenter Serveréƒ¨ç½² ğŸ†•

**vCenter Server Appliance (VCSA) æ¶æ„**[vcsa-architecture]:

```yaml
vCenteréƒ¨ç½²æ–¹å¼[vcenter-deployment]:
  æ–¹å¼1: vCenter Server Appliance (VCSA) - æ¨è
    ä¼˜ç‚¹:
      âœ… åŸºäºLinuxï¼Œèµ„æºå ç”¨ä½
      âœ… å†…ç½®PostgreSQLæ•°æ®åº“
      âœ… éƒ¨ç½²ç®€å•ï¼Œä¸€é”®å®‰è£…
      âœ… å…è´¹ï¼ŒåŒ…å«åœ¨vSphereè®¸å¯ä¸­
    
    ç¡¬ä»¶è¦æ±‚:
      æœ€å°é…ç½®:
        - vCPU: 2æ ¸
        - å†…å­˜: 12GB
        - ç£ç›˜: 250GB
        - é€‚ç”¨: <10å°ä¸»æœº, <100è™šæ‹Ÿæœº
      
      æ¨èé…ç½®:
        - vCPU: 4æ ¸
        - å†…å­˜: 16GB
        - ç£ç›˜: 300GB
        - é€‚ç”¨: 10-100å°ä¸»æœº, 100-1000è™šæ‹Ÿæœº
      
      å¤§å‹é…ç½®:
        - vCPU: 8æ ¸
        - å†…å­˜: 24GB
        - ç£ç›˜: 500GB
        - é€‚ç”¨: >100å°ä¸»æœº, >1000è™šæ‹Ÿæœº
  
  æ–¹å¼2: Windows vCenter Server
    è¯´æ˜: ä»vSphere 7.0å¼€å§‹å·²å¼ƒç”¨
    å»ºè®®: ä½¿ç”¨VCSA

VCSAéƒ¨ç½²æ­¥éª¤:
  é˜¶æ®µ1: éƒ¨ç½²OVF
    1. æŒ‚è½½VCSA ISO
       Windows: åŒå‡»ISOæ–‡ä»¶
       Linux: mount -o loop vcsa.iso /mnt
    
    2. è¿è¡Œå®‰è£…ç¨‹åº
       Windows: vcsa-ui-installer\win32\installer.exe
       Linux: vcsa-ui-installer/lin64/installer
       Mac: vcsa-ui-installer/mac/installer
    
    3. é€‰æ‹© "å®‰è£…"
    
    4. æ¥å—è®¸å¯åè®®
    
    5. éƒ¨ç½²ç›®æ ‡é…ç½®:
       - ESXiä¸»æœº: 192.168.1.101
       - HTTPSç«¯å£: 443
       - ç”¨æˆ·å: root
       - å¯†ç : ESXiçš„rootå¯†ç 
       - æ¥å—è¯ä¹¦è­¦å‘Š
    
    6. è®¾ç½®VCSA VM:
       - VMåç§°: vcenter-01
       - Rootå¯†ç : VMware@2025
       - ç¡®è®¤å¯†ç 
    
    7. éƒ¨ç½²è§„æ¨¡:
       é€‰æ‹©: å°å‹ï¼ˆ<10ä¸»æœºï¼Œ<100VMï¼‰
             ä¸­å‹ï¼ˆ10-100ä¸»æœºï¼Œ100-1000VMï¼‰
             å¤§å‹ï¼ˆ>100ä¸»æœºï¼Œ>1000VMï¼‰
    
    8. é€‰æ‹©æ•°æ®å­˜å‚¨:
       - æ•°æ®å­˜å‚¨: datastore1
       - ç£ç›˜é¢„ç½®: ç²¾ç®€ç½®å¤‡ï¼ˆèŠ‚çœç©ºé—´ï¼‰
    
    9. ç½‘ç»œé…ç½®:
       - ç½‘ç»œ: VM Network
       - IPç‰ˆæœ¬: IPv4
       - IPåˆ†é…: é™æ€
       - IPåœ°å€: 192.168.1.10
       - å­ç½‘æ©ç : 255.255.255.0
       - é»˜è®¤ç½‘å…³: 192.168.1.1
       - DNSæœåŠ¡å™¨: 8.8.8.8
       - ç³»ç»Ÿåç§°: vcenter-01.domain.local
    
    10. æ£€æŸ¥é…ç½®å¹¶å®Œæˆ
        - å®¡æ ¸è®¾ç½®
        - ç‚¹å‡» "å®Œæˆ"
        - ç­‰å¾…éƒ¨ç½²ï¼ˆçº¦10-15åˆ†é’Ÿï¼‰
  
  é˜¶æ®µ2: é…ç½®vCenter
    1. éƒ¨ç½²å®Œæˆåï¼Œç‚¹å‡» "ç»§ç»­"
    
    2. æ—¶é—´åŒæ­¥é…ç½®:
       - æ—¶é—´åŒæ­¥æ¨¡å¼: ä¸ESXiä¸»æœºåŒæ­¥
       - æˆ–: ä¸NTPæœåŠ¡å™¨åŒæ­¥
       - NTPæœåŠ¡å™¨: ntp.aliyun.com
    
    3. SSOé…ç½®:
       - åˆ›å»ºæ–°çš„SSOåŸŸï¼ˆæ¨èï¼‰
       - SSOåŸŸå: vsphere.local
       - SSOå¯†ç : VMware@2025
       - SSOç«™ç‚¹åç§°: Default-Site
    
    4. CEIPé…ç½®:
       - å‚åŠ å®¢æˆ·ä½“éªŒæ”¹è¿›è®¡åˆ’: å¦ï¼ˆå¯é€‰ï¼‰
    
    5. æ£€æŸ¥é…ç½®å¹¶å®Œæˆ:
       - å®¡æ ¸è®¾ç½®
       - ç‚¹å‡» "å®Œæˆ"
       - ç­‰å¾…é…ç½®ï¼ˆçº¦5-10åˆ†é’Ÿï¼‰
  
  é˜¶æ®µ3: é¦–æ¬¡ç™»å½•:
    1. è®¿é—®vCenter:
       URL: https://192.168.1.10/ui
       æˆ–: https://vcenter-01.domain.local/ui
    
    2. ç™»å½•:
       ç”¨æˆ·å: administrator@vsphere.local
       å¯†ç : VMware@2025
    
    3. æ¥å—è®¸å¯åè®®
    
    4. æ·»åŠ è®¸å¯è¯:
       - å¯¼èˆªåˆ° èœå• â†’ ç®¡ç† â†’ è®¸å¯
       - æ·»åŠ vCenterè®¸å¯è¯
       - æ·»åŠ vSphereè®¸å¯è¯
       - åˆ†é…è®¸å¯è¯åˆ°vCenter
```

#### 3.1.6 åˆ›å»ºæ•°æ®ä¸­å¿ƒå’Œé›†ç¾¤ ğŸ†•

```yaml
æ•°æ®ä¸­å¿ƒé…ç½®:
  åˆ›å»ºæ•°æ®ä¸­å¿ƒ:
    1. ç™»å½•vCenter Webç•Œé¢
    2. å³é”®ç‚¹å‡»vCenteråç§°
    3. é€‰æ‹© "æ–°å»ºæ•°æ®ä¸­å¿ƒ"
    4. åç§°: DC-Beijing
    5. ç‚¹å‡» "ç¡®å®š"

  æ·»åŠ ESXiä¸»æœºåˆ°æ•°æ®ä¸­å¿ƒ:
    1. å³é”®ç‚¹å‡»æ•°æ®ä¸­å¿ƒ
    2. é€‰æ‹© "æ·»åŠ ä¸»æœº"
    3. ä¸»æœºä¿¡æ¯:
       - åç§°æˆ–IP: 192.168.1.101
       - ç”¨æˆ·å: root
       - å¯†ç : ESXiå¯†ç 
    4. ä¸»æœºæ‘˜è¦: æŸ¥çœ‹ä¸»æœºä¿¡æ¯
    5. åˆ†é…è®¸å¯è¯: é€‰æ‹©vSphereè®¸å¯è¯
    6. é”å®šæ¨¡å¼: å·²ç¦ç”¨ï¼ˆé¦–æ¬¡é…ç½®ï¼‰
    7. VMä½ç½®: æ•°æ®ä¸­å¿ƒ
    8. å®Œæˆæ·»åŠ 

é›†ç¾¤é…ç½®:
  åˆ›å»ºé›†ç¾¤:
    1. å³é”®ç‚¹å‡»æ•°æ®ä¸­å¿ƒ
    2. é€‰æ‹© "æ–°å»ºé›†ç¾¤"
    3. é›†ç¾¤åç§°: Cluster-Production
    4. åŠŸèƒ½é…ç½®:
       
       â–¡ å¯ç”¨vSphere DRS (åˆ†å¸ƒå¼èµ„æºè°ƒåº¦)
         - DRSè‡ªåŠ¨åŒ–çº§åˆ«: å…¨è‡ªåŠ¨
         - è¿ç§»é˜ˆå€¼: ä¸­ç­‰
         - ä½œç”¨: è‡ªåŠ¨è´Ÿè½½å‡è¡¡
       
       â–¡ å¯ç”¨vSphere HA (é«˜å¯ç”¨æ€§)
         - ä¸»æœºæ•…éšœå“åº”: é‡å¯VM
         - ä¸»æœºéš”ç¦»å“åº”: å…³é—­VMç”µæº
         - æ•°æ®å­˜å‚¨å¿ƒè·³: å¯ç”¨
         - ä½œç”¨: ä¸»æœºæ•…éšœè‡ªåŠ¨æ¢å¤
       
       â–¡ å¯ç”¨vSAN (å¦‚æœæœ‰)
         - ä»…åœ¨æœ‰3ä¸ªä»¥ä¸Šä¸»æœºæ—¶
         - éœ€è¦SSDç¼“å­˜ç›˜
       
       â–¡ å¯ç”¨vSphere EVC (å¢å¼ºçš„vMotionå…¼å®¹æ€§)
         - EVCæ¨¡å¼: Intel "Skylake"
         - ä½œç”¨: å…¼å®¹ä¸åŒCPUä»£é™…çš„ä¸»æœº
    
    5. å®Œæˆåˆ›å»º

  æ·»åŠ ä¸»æœºåˆ°é›†ç¾¤:
    1. å°†å·²æœ‰ä¸»æœºæ‹–æ‹½åˆ°é›†ç¾¤
    2. æˆ–: å³é”®é›†ç¾¤ â†’ æ·»åŠ ä¸»æœº
    3. è¾“å…¥ä¸»æœºä¿¡æ¯
    4. å®Œæˆæ·»åŠ 

  é…ç½®èµ„æºæ± :
    1. å³é”®ç‚¹å‡»é›†ç¾¤
    2. é€‰æ‹© "æ–°å»ºèµ„æºæ± "
    3. é…ç½®:
       - åç§°: Production-Pool
       - CPUèµ„æº:
         - é¢„ç•™: 8GHz
         - é™åˆ¶: æ— é™åˆ¶
         - ä»½é¢: æ­£å¸¸
       - å†…å­˜èµ„æº:
         - é¢„ç•™: 32GB
         - é™åˆ¶: æ— é™åˆ¶
         - ä»½é¢: æ­£å¸¸
    4. å®Œæˆåˆ›å»º
```

### 3.2 KVMè™šæ‹ŸåŒ–éƒ¨ç½² ğŸ†•

**KVM/QEMUæ¶æ„ä¸æ€§èƒ½**[kvm-architecture]:

#### 3.2.1 KVMç¯å¢ƒå‡†å¤‡

**KVMå®‰è£…ä¸é…ç½®æŒ‡å—**[kvm-installation]:

```bash
#!/bin/bash
# KVMå®‰è£…è„šæœ¬ (Ubuntu 22.04)[kvm-setup]

set -e

echo "=== æ£€æŸ¥ç¡¬ä»¶è™šæ‹ŸåŒ–æ”¯æŒ ==="

# æ£€æŸ¥CPUè™šæ‹ŸåŒ–æ”¯æŒ
if grep -E '(vmx|svm)' /proc/cpuinfo > /dev/null; then
    echo "âœ… CPUæ”¯æŒç¡¬ä»¶è™šæ‹ŸåŒ–"
else
    echo "âŒ CPUä¸æ”¯æŒç¡¬ä»¶è™šæ‹ŸåŒ–"
    exit 1
fi

# æ£€æŸ¥å†…æ ¸æ¨¡å—
echo "=== åŠ è½½KVMæ¨¡å— ==="
modprobe kvm
modprobe kvm_intel  # Intel CPU
# modprobe kvm_amd  # AMD CPU

# å®‰è£…KVMå’Œç›¸å…³å·¥å…·
echo "=== å®‰è£…KVM ==="
apt update
apt install -y \
    qemu-kvm \
    libvirt-daemon-system \
    libvirt-clients \
    bridge-utils \
    virt-manager \
    cpu-checker \
    libguestfs-tools \
    libosinfo-bin

# éªŒè¯å®‰è£…
kvm-ok

# å¯åŠ¨libvirtæœåŠ¡
systemctl enable libvirtd
systemctl start libvirtd

# å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ°libvirtç»„
usermod -aG libvirt $USER
usermod -aG kvm $USER

echo "=== KVMå®‰è£…å®Œæˆ ==="
echo "è¯·é‡æ–°ç™»å½•ä»¥ä½¿ç»„æƒé™ç”Ÿæ•ˆ"
```

#### 3.2.2 KVMç½‘ç»œé…ç½®

```bash
# åˆ›å»ºæ¡¥æ¥ç½‘ç»œ
cat > /etc/netplan/01-netcfg.yaml <<EOF
network:
  version: 2
  renderer: networkd
  ethernets:
    eno1:
      dhcp4: false
      dhcp6: false
  bridges:
    br0:
      interfaces: [eno1]
      addresses: [192.168.1.150/24]
      gateway4: 192.168.1.1
      nameservers:
        addresses: [8.8.8.8, 8.8.4.4]
      parameters:
        stp: false
        forward-delay: 0
      dhcp4: false
      dhcp6: false
EOF

# åº”ç”¨é…ç½®
netplan apply

# åˆ›å»ºKVMç½‘ç»œ
cat > /tmp/br0.xml <<EOF
<network>
  <name>br0</name>
  <forward mode='bridge'/>
  <bridge name='br0'/>
</network>
EOF

virsh net-define /tmp/br0.xml
virsh net-start br0
virsh net-autostart br0
virsh net-list --all
```

#### 3.2.3 åˆ›å»ºKVMè™šæ‹Ÿæœº

```bash
#!/bin/bash
# åˆ›å»ºKVMè™šæ‹Ÿæœº

VM_NAME="ubuntu-vm01"
VCPUS=2
MEMORY=2048  # MB
DISK_SIZE=20  # GB
ISO_PATH="/var/lib/libvirt/images/ubuntu-22.04-server.iso"
DISK_PATH="/var/lib/libvirt/images/${VM_NAME}.qcow2"

# åˆ›å»ºç£ç›˜
qemu-img create -f qcow2 $DISK_PATH ${DISK_SIZE}G

# åˆ›å»ºè™šæ‹Ÿæœº
virt-install \
  --name $VM_NAME \
  --ram $MEMORY \
  --vcpus $VCPUS \
  --disk path=$DISK_PATH,format=qcow2,bus=virtio \
  --network bridge=br0,model=virtio \
  --graphics vnc,listen=0.0.0.0,port=5901 \
  --cdrom $ISO_PATH \
  --os-variant ubuntu22.04 \
  --boot uefi

echo "è™šæ‹Ÿæœºåˆ›å»ºå®Œæˆ"
echo "ä½¿ç”¨VNCè¿æ¥: 192.168.1.150:5901"
```

### 3.3 Hyper-Vè™šæ‹ŸåŒ–éƒ¨ç½² ğŸ†•

**Microsoft Hyper-Væ¶æ„**[hyperv-architecture]:

#### 3.3.1 Hyper-Vå®‰è£…

**Hyper-Vå®‰è£…ä¸é…ç½®**[hyperv-installation]:

```powershell
# PowerShellè„šæœ¬ (ç®¡ç†å‘˜æƒé™)[hyperv-powershell]

# æ£€æŸ¥ç³»ç»Ÿè¦æ±‚
Write-Host "=== æ£€æŸ¥Hyper-Væ”¯æŒ ===" -ForegroundColor Green
$hyperv = Get-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V-All
if ($hyperv.State -eq "Enabled") {
    Write-Host "Hyper-Vå·²å¯ç”¨" -ForegroundColor Yellow
} else {
    # å®‰è£…Hyper-V
    Write-Host "æ­£åœ¨å®‰è£…Hyper-V..." -ForegroundColor Cyan
    
    # å®‰è£…Hyper-VåŠŸèƒ½
    Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V -All -NoRestart
    
    # å®‰è£…Hyper-Vç®¡ç†å·¥å…·
    Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V-Tools-All -All -NoRestart
    
    Write-Host "Hyper-Vå®‰è£…å®Œæˆï¼Œè¯·é‡å¯ç³»ç»Ÿ" -ForegroundColor Green
    
    # æç¤ºé‡å¯
    $restart = Read-Host "æ˜¯å¦ç°åœ¨é‡å¯ï¼Ÿ(Y/N)"
    if ($restart -eq "Y") {
        Restart-Computer -Force
    }
}
```

#### 3.3.2 Hyper-Vç½‘ç»œé…ç½®

```powershell
# åˆ›å»ºè™šæ‹Ÿäº¤æ¢æœº

# å¤–éƒ¨è™šæ‹Ÿäº¤æ¢æœºï¼ˆè¿æ¥ç‰©ç†ç½‘ç»œï¼‰
New-VMSwitch -Name "External-Switch" -NetAdapterName "Ethernet" -AllowManagementOS $true

# å†…éƒ¨è™šæ‹Ÿäº¤æ¢æœºï¼ˆä»…ä¸»æœºé€šä¿¡ï¼‰
New-VMSwitch -Name "Internal-Switch" -SwitchType Internal

# ä¸“ç”¨è™šæ‹Ÿäº¤æ¢æœºï¼ˆVMé—´é€šä¿¡ï¼‰
New-VMSwitch -Name "Private-Switch" -SwitchType Private

# æŸ¥çœ‹è™šæ‹Ÿäº¤æ¢æœº
Get-VMSwitch | Format-Table Name, SwitchType, NetAdapterInterfaceDescription
```

#### 3.3.3 åˆ›å»ºHyper-Vè™šæ‹Ÿæœº

```powershell
# åˆ›å»ºè™šæ‹Ÿæœºè„šæœ¬

$VMName = "Ubuntu-VM01"
$VMPath = "C:\Hyper-V\VMs"
$VHDPath = "C:\Hyper-V\VHDs\$VMName.vhdx"
$ISOPath = "C:\ISOs\ubuntu-22.04-server.iso"

# åˆ›å»ºè™šæ‹Ÿç¡¬ç›˜
New-VHD -Path $VHDPath -SizeBytes 40GB -Dynamic

# åˆ›å»ºè™šæ‹Ÿæœº
New-VM -Name $VMName `
    -MemoryStartupBytes 2GB `
    -Generation 2 `
    -NewVHDPath $VHDPath `
    -NewVHDSizeBytes 40GB `
    -Path $VMPath `
    -SwitchName "External-Switch"

# é…ç½®è™šæ‹Ÿæœº
Set-VMProcessor -VMName $VMName -Count 2
Set-VMMemory -VMName $VMName -DynamicMemoryEnabled $true -MinimumBytes 1GB -MaximumBytes 4GB

# æŒ‚è½½ISO
Add-VMDvdDrive -VMName $VMName -Path $ISOPath

# é…ç½®å¯åŠ¨é¡ºåº
$dvd = Get-VMDvdDrive -VMName $VMName
Set-VMFirmware -VMName $VMName -FirstBootDevice $dvd

# å¯åŠ¨è™šæ‹Ÿæœº
Start-VM -Name $VMName

Write-Host "è™šæ‹Ÿæœºåˆ›å»ºå®Œæˆ: $VMName" -ForegroundColor Green
```

### 3.4 è™šæ‹Ÿæœºæ¨¡æ¿åˆ›å»º ğŸ†•

#### 3.4.1 VMwareè™šæ‹Ÿæœºæ¨¡æ¿

```yaml
æ¨¡æ¿åˆ›å»ºç­–ç•¥:
  æ¨¡æ¿ç±»å‹:
    åŸºç¡€æ¨¡æ¿:
      - Ubuntu 22.04 LTS
      - CentOS Stream 9
      - Rocky Linux 9
      - Windows Server 2022
    
    åº”ç”¨æ¨¡æ¿:
      - Dockerä¸»æœºæ¨¡æ¿
      - KubernetesèŠ‚ç‚¹æ¨¡æ¿
      - WebæœåŠ¡å™¨æ¨¡æ¿
      - æ•°æ®åº“æœåŠ¡å™¨æ¨¡æ¿

åˆ›å»ºUbuntuæ¨¡æ¿æ­¥éª¤:
  æ­¥éª¤1: åˆ›å»ºè™šæ‹Ÿæœº
    1. åœ¨vCenterä¸­å³é”®é›†ç¾¤
    2. é€‰æ‹© "æ–°å»ºè™šæ‹Ÿæœº"
    3. é…ç½®:
       - åç§°: ubuntu-22.04-template
       - å…¼å®¹æ€§: ESXi 8.0
       - å®¢æˆ·æœºOS: Ubuntu Linux (64ä½)
       - CPU: 2 vCPU
       - å†…å­˜: 4GB
       - ç¡¬ç›˜: 40GB (ç²¾ç®€ç½®å¤‡)
       - ç½‘ç»œ: VM Network
    4. æŒ‚è½½Ubuntu ISO
    5. å¼€æœºå®‰è£…
  
  æ­¥éª¤2: å®‰è£…æ“ä½œç³»ç»Ÿ
    1. é€‰æ‹©è¯­è¨€: English
    2. é”®ç›˜: English (US)
    3. ç½‘ç»œ: DHCPï¼ˆæ¨¡æ¿ç”¨ï¼‰
    4. å­˜å‚¨: ä½¿ç”¨æ•´ä¸ªç£ç›˜
    5. ç”¨æˆ·å: template
    6. å¯†ç : ChangeMe123!
    7. å®‰è£…OpenSSH Server
    8. å®Œæˆå®‰è£…å¹¶é‡å¯
  
  æ­¥éª¤3: ç³»ç»Ÿä¼˜åŒ–
    ```bash
    #!/bin/bash
    # æ¨¡æ¿ç³»ç»Ÿä¼˜åŒ–è„šæœ¬
    
    # æ›´æ–°ç³»ç»Ÿ
    sudo apt update && sudo apt upgrade -y
    
    # å®‰è£…å¿…è¦å·¥å…·
    sudo apt install -y \
        vim \
        curl \
        wget \
        git \
        net-tools \
        htop \
        iotop \
        sysstat \
        open-vm-tools \
        cloud-init
    
    # é…ç½®æ—¶åŒº
    sudo timedatectl set-timezone Asia/Shanghai
    
    # ç¦ç”¨äº¤æ¢
    sudo swapoff -a
    sudo sed -i '/ swap / s//#/' /etc/fstab
    
    # é…ç½®å†…æ ¸å‚æ•°
    cat <<EOF | sudo tee /etc/sysctl.d/99-kubernetes.conf
    net.bridge.bridge-nf-call-iptables  = 1
    net.bridge.bridge-nf-call-ip6tables = 1
    net.ipv4.ip_forward                 = 1
    vm.swappiness                       = 0
    EOF
    
    # åŠ è½½å†…æ ¸æ¨¡å—
    cat <<EOF | sudo tee /etc/modules-load.d/k8s.conf
    overlay
    br_netfilter
    EOF
    
    sudo modprobe overlay
    sudo modprobe br_netfilter
    
    # å®‰è£…containerd
    sudo apt install -y containerd
    sudo mkdir -p /etc/containerd
    containerd config default | sudo tee /etc/containerd/config.toml
    sudo systemctl restart containerd
    sudo systemctl enable containerd
    
    # æ¸…ç†æ—¥å¿—
    sudo journalctl --vacuum-time=1d
    sudo rm -rf /tmp/*
    sudo rm -rf /var/tmp/*
    
    # æ¸…ç†ç½‘ç»œé…ç½®ï¼ˆä½¿ç”¨cloud-inité‡æ–°ç”Ÿæˆï¼‰
    sudo rm -f /etc/netplan/00-installer-config.yaml
    
    # æ¸…ç†SSHä¸»æœºå¯†é’¥ï¼ˆé¦–æ¬¡å¯åŠ¨é‡æ–°ç”Ÿæˆï¼‰
    sudo rm -f /etc/ssh/ssh_host_*
    
    # æ¸…ç†machine-id
    sudo truncate -s 0 /etc/machine-id
    sudo rm /var/lib/dbus/machine-id
    sudo ln -s /etc/machine-id /var/lib/dbus/machine-id
    
    # æ¸…ç†bashå†å²
    history -c
    cat /dev/null > ~/.bash_history
    
    echo "æ¨¡æ¿å‡†å¤‡å®Œæˆï¼Œå‡†å¤‡å…³æœºè½¬æ¢ä¸ºæ¨¡æ¿"
    ```
  
  æ­¥éª¤4: è½¬æ¢ä¸ºæ¨¡æ¿
    1. å…³æœºè™šæ‹Ÿæœº: sudo shutdown -h now
    2. åœ¨vCenterä¸­å³é”®è™šæ‹Ÿæœº
    3. é€‰æ‹© "æ¨¡æ¿" â†’ "è½¬æ¢ä¸ºæ¨¡æ¿"
    4. ç¡®è®¤è½¬æ¢

ä½¿ç”¨æ¨¡æ¿éƒ¨ç½²è™šæ‹Ÿæœº:
  æ–¹æ³•1: Webç•Œé¢
    1. å³é”®æ¨¡æ¿
    2. é€‰æ‹© "ä»æ­¤æ¨¡æ¿æ–°å»ºè™šæ‹Ÿæœº"
    3. å¡«å†™VMåç§°
    4. é€‰æ‹©è®¡ç®—èµ„æº
    5. é€‰æ‹©å­˜å‚¨
    6. è‡ªå®šä¹‰è§„èŒƒï¼ˆå¯é€‰ï¼‰
    7. å®Œæˆéƒ¨ç½²
  
  æ–¹æ³•2: PowerCLIè„šæœ¬
    ```powershell
    # ä»æ¨¡æ¿æ‰¹é‡éƒ¨ç½²è™šæ‹Ÿæœº
    
    # è¿æ¥vCenter
    Connect-VIServer -Server vcenter-01.domain.local
    
    # é…ç½®å‚æ•°
    $template = Get-Template -Name "ubuntu-22.04-template"
    $cluster = Get-Cluster -Name "Cluster-Production"
    $datastore = Get-Datastore -Name "datastore1"
    
    # æ‰¹é‡åˆ›å»º
    1..10 | ForEach-Object {
        $vmName = "k8s-node-$_"
        New-VM -Name $vmName `
            -Template $template `
            -ResourcePool $cluster `
            -Datastore $datastore
        
        # é…ç½®ç½‘ç»œï¼ˆä½¿ç”¨è‡ªå®šä¹‰è§„èŒƒï¼‰
        $customSpec = Get-OSCustomizationSpec -Name "Linux-DHCP"
        Set-VM -VM $vmName -OSCustomizationSpec $customSpec -Confirm:$false
        
        # å¯åŠ¨è™šæ‹Ÿæœº
        Start-VM -VM $vmName
        
        Write-Host "è™šæ‹Ÿæœº $vmName éƒ¨ç½²å®Œæˆ"
    }
    ```
```

#### 3.4.2 KVMè™šæ‹Ÿæœºæ¨¡æ¿

```bash
#!/bin/bash
# KVMè™šæ‹Ÿæœºæ¨¡æ¿åˆ›å»ºè„šæœ¬

TEMPLATE_NAME="ubuntu-22.04-template"
TEMPLATE_DISK="/var/lib/libvirt/images/${TEMPLATE_NAME}.qcow2"
ISO_PATH="/var/lib/libvirt/images/ubuntu-22.04-server.iso"

echo "=== åˆ›å»ºKVMè™šæ‹Ÿæœºæ¨¡æ¿ ==="

# åˆ›å»ºåŸºç¡€è™šæ‹Ÿæœº
virt-install \
  --name $TEMPLATE_NAME \
  --ram 4096 \
  --vcpus 2 \
  --disk path=$TEMPLATE_DISK,size=40,format=qcow2,bus=virtio \
  --network bridge=br0,model=virtio \
  --graphics vnc \
  --cdrom $ISO_PATH \
  --os-variant ubuntu22.04 \
  --noautoconsole

echo "ç­‰å¾…å®‰è£…å®Œæˆ..."
echo "æ‰‹åŠ¨å®Œæˆç³»ç»Ÿå®‰è£…åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å‡†å¤‡æ¨¡æ¿ï¼š"
echo ""
echo "# ç™»å½•è™šæ‹Ÿæœº"
echo "virsh console $TEMPLATE_NAME"
echo ""
echo "# ç³»ç»Ÿä¼˜åŒ–ï¼ˆåŒä¸ŠUbuntuæ¨¡æ¿è„šæœ¬ï¼‰"
echo ""
echo "# æ¸…ç†å¹¶å…³æœº"
echo "virt-sysprep -d $TEMPLATE_NAME"
echo "virsh shutdown $TEMPLATE_NAME"
echo ""
echo "# å‹ç¼©ç£ç›˜"
echo "qemu-img convert -O qcow2 -c $TEMPLATE_DISK ${TEMPLATE_DISK}.compressed"
echo "mv ${TEMPLATE_DISK}.compressed $TEMPLATE_DISK"

# ä»æ¨¡æ¿å…‹éš†è™šæ‹Ÿæœº
echo ""
echo "=== ä»æ¨¡æ¿å…‹éš†è™šæ‹Ÿæœºç¤ºä¾‹ ==="
cat <<'CLONE_SCRIPT'
#!/bin/bash
# å…‹éš†è™šæ‹Ÿæœºè„šæœ¬

TEMPLATE="ubuntu-22.04-template"
NEW_VM="k8s-node-01"
NEW_DISK="/var/lib/libvirt/images/${NEW_VM}.qcow2"

# å…‹éš†è™šæ‹Ÿæœº
virt-clone \
  --original $TEMPLATE \
  --name $NEW_VM \
  --file $NEW_DISK

# è‡ªå®šä¹‰è™šæ‹Ÿæœºï¼ˆç½‘ç»œã€ä¸»æœºåç­‰ï¼‰
virt-customize -d $NEW_VM \
  --hostname $NEW_VM \
  --run-command "sed -i 's/DHCP/static/' /etc/netplan/00-installer-config.yaml" \
  --run-command "echo 'addresses: [192.168.1.201/24]' >> /etc/netplan/00-installer-config.yaml"

# å¯åŠ¨è™šæ‹Ÿæœº
virsh start $NEW_VM

echo "è™šæ‹Ÿæœº $NEW_VM åˆ›å»ºå®Œæˆ"
CLONE_SCRIPT
```

#### 3.4.3 æ¨¡æ¿æœ€ä½³å®è·µ

```yaml
æ¨¡æ¿ç®¡ç†æœ€ä½³å®è·µ:
  å‘½åè§„èŒƒ:
    æ ¼å¼: {OS}-{VERSION}-{TYPE}-template
    ç¤ºä¾‹:
      - ubuntu-22.04-base-template
      - centos9-docker-template
      - rocky9-k8s-template
      - win2022-web-template
  
  ç‰ˆæœ¬æ§åˆ¶:
    ç­–ç•¥:
      âœ… æ¯æœˆæ›´æ–°ä¸€æ¬¡ç³»ç»Ÿè¡¥ä¸
      âœ… é‡å¤§å˜æ›´åˆ›å»ºæ–°ç‰ˆæœ¬
      âœ… ä¿ç•™æœ€è¿‘3ä¸ªç‰ˆæœ¬
      âœ… æ ‡æ³¨åˆ›å»ºæ—¥æœŸ
    
    ç¤ºä¾‹:
      - ubuntu-22.04-base-template-v1-2025.01
      - ubuntu-22.04-base-template-v2-2025.02
      - ubuntu-22.04-base-template-v3-2025.03
  
  æ¨¡æ¿å†…å®¹:
    å¿…è£…è½¯ä»¶:
      âœ… VMware Tools / open-vm-tools
      âœ… cloud-init (è‡ªåŠ¨åŒ–é…ç½®)
      âœ… qemu-guest-agent (KVM)
      âœ… åŸºç¡€ç›‘æ§å·¥å…·
      âœ… SSHæœåŠ¡
    
    ç¦æ­¢å†…å®¹:
      âŒ åº”ç”¨ç¨‹åºé…ç½®æ–‡ä»¶
      âŒ SSHå¯†é’¥
      âŒ è®¸å¯è¯æ–‡ä»¶
      âŒ å†å²æ—¥å¿—
      âŒ ä¸´æ—¶æ–‡ä»¶
  
  å®‰å…¨åŠ å›º:
    ç³»ç»Ÿå®‰å…¨:
      âœ… ç¦ç”¨root SSHç™»å½•
      âœ… é…ç½®é˜²ç«å¢™è§„åˆ™
      âœ… å¯ç”¨SELinux/AppArmor
      âœ… æœ€å°åŒ–å®‰è£…åŒ…
      âœ… å®šæœŸå®‰å…¨æ‰«æ
    
    ç¤ºä¾‹åŠ å›ºè„šæœ¬:
      ```bash
      # SSHå®‰å…¨é…ç½®
      sudo sed -i 's/#PermitRootLogin yes/PermitRootLogin no/' /etc/ssh/sshd_config
      sudo sed -i 's/#PasswordAuthentication yes/PasswordAuthentication no/' /etc/ssh/sshd_config
      
      # é…ç½®UFWé˜²ç«å¢™
      sudo ufw default deny incoming
      sudo ufw default allow outgoing
      sudo ufw allow ssh
      sudo ufw enable
      
      # è‡ªåŠ¨å®‰å…¨æ›´æ–°
      sudo apt install -y unattended-upgrades
      sudo dpkg-reconfigure -plow unattended-upgrades
      ```
  
  æµ‹è¯•æ¸…å•:
    éƒ¨ç½²å‰æµ‹è¯•:
      â–¡ ä»æ¨¡æ¿æˆåŠŸåˆ›å»ºVM
      â–¡ VMèƒ½æ­£å¸¸å¯åŠ¨
      â–¡ ç½‘ç»œé…ç½®æ­£ç¡®
      â–¡ ä¸»æœºåå”¯ä¸€
      â–¡ SSHå¯ä»¥è¿æ¥
      â–¡ å¿…è¦æœåŠ¡è¿è¡Œæ­£å¸¸
      â–¡ ç£ç›˜ç©ºé—´å……è¶³
      â–¡ æ€§èƒ½æµ‹è¯•é€šè¿‡
```

## 4. å®¹å™¨åŒ–éƒ¨ç½²

### 4.1 Dockeréƒ¨ç½²

**Dockerå®¹å™¨åŒ–å¹³å°**[docker-overview]:

#### 4.1.1 Dockerå®‰è£…

**Docker Engineå®‰è£…æŒ‡å—**[docker-installation]:

```bash
#!/bin/bash
# Dockerå®‰è£…è„šæœ¬[docker-setup]

# æ£€æŸ¥ç³»ç»Ÿè¦æ±‚
if [[ "$OSTYPE" != "linux-gnu"* ]]; then
    echo "æ­¤è„šæœ¬ä»…æ”¯æŒLinuxç³»ç»Ÿ"
    exit 1
fi

# å¸è½½æ—§ç‰ˆæœ¬
sudo apt remove -y docker docker-engine docker.io containerd runc

# å®‰è£…ä¾èµ–
sudo apt update
sudo apt install -y apt-transport-https ca-certificates curl gnupg lsb-release

# æ·»åŠ Dockerå®˜æ–¹GPGå¯†é’¥
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

# æ·»åŠ Dockerä»“åº“
echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# å®‰è£…Docker
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin

# å¯åŠ¨DockeræœåŠ¡
sudo systemctl start docker
sudo systemctl enable docker

# é…ç½®Docker
sudo usermod -aG docker $USER
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<EOF
{
  "exec-opts": ["native.cgroupdriver=systemd"],
  "log-driver": "json-file",
  "log-opts": {
    "max-size": "100m"
  },
  "storage-driver": "overlay2",
  "storage-opts": [
    "overlay2.override_kernel_check=true"
  ]
}
EOF

sudo systemctl restart docker

# éªŒè¯å®‰è£…
docker --version
docker-compose --version
```

#### 4.1.2 Docker Composeéƒ¨ç½²

**Docker Composeå¤šå®¹å™¨ç¼–æ’**[docker-compose]:

```yaml
    # docker-compose.yml[compose-file]
version: '3.8'

services:
  virtualization-monitor:
    build: .
    ports:
      - "8080:8080"
    environment:
      - RUST_LOG=info
      - MONITORING_INTERVAL=30
    volumes:
      - ./config:/app/config
      - ./logs:/app/logs
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/health"]
      interval: 30s
      timeout: 10s
      retries: 3

  container-orchestrator:
    build: .
    ports:
      - "8081:8080"
    environment:
      - GO_LOG_LEVEL=info
      - DOCKER_HOST=unix:///var/run/docker.sock
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ./config:/app/config
    restart: unless-stopped

  semantic-validator:
    build: .
    ports:
      - "8082:8080"
    environment:
      - PYTHON_DEBUG=0
      - LOG_LEVEL=info
    volumes:
      - ./config:/app/config
      - ./models:/app/models
    restart: unless-stopped

  prometheus:
    image: prom/prometheus:latest
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml
      - prometheus-data:/prometheus
    command:
      - '--config.file=/etc/prometheus/prometheus.yml'
      - '--storage.tsdb.path=/prometheus'
      - '--web.console.libraries=/etc/prometheus/console_libraries'
      - '--web.console.templates=/etc/prometheus/consoles'
      - '--storage.tsdb.retention.time=200h'
      - '--web.enable-lifecycle'

  grafana:
    image: grafana/grafana:latest
    ports:
      - "3000:3000"
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin123
      - GF_USERS_ALLOW_SIGN_UP=false
    volumes:
      - grafana-data:/var/lib/grafana

volumes:
  prometheus-data:
  grafana-data:
```

### 4.2 Kuberneteséƒ¨ç½²

**Kubernetesé›†ç¾¤æ¶æ„**[kubernetes-architecture]:

#### 4.2.1 é›†ç¾¤åˆå§‹åŒ–

**ä½¿ç”¨kubeadméƒ¨ç½²é›†ç¾¤**[kubeadm-installation]:

```bash
    # Kubernetesé›†ç¾¤åˆå§‹åŒ–è„šæœ¬[k8s-init]
#!/bin/bash

    # å®‰è£…kubeadm, kubelet, kubectl
sudo apt update
sudo apt install -y apt-transport-https ca-certificates curl
sudo curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg
echo "deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main" | sudo tee /etc/apt/sources.list.d/kubernetes.list
sudo apt update
sudo apt install -y kubelet kubeadm kubectl
sudo apt-mark hold kubelet kubeadm kubectl

    # åˆå§‹åŒ–ä¸»èŠ‚ç‚¹
sudo kubeadm init \
  --pod-network-cidr=10.244.0.0/16 \
  --apiserver-advertise-address=192.168.1.100 \
  --control-plane-endpoint=192.168.1.100:6443 \
  --upload-certs

    # é…ç½®kubectl
mkdir -p $HOME/.kube
sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
sudo chown $(id -u):$(id -g) $HOME/.kube/config

    # å®‰è£…ç½‘ç»œæ’ä»¶
kubectl apply -f https://raw.githubusercontent.com/flannel-io/flannel/master/Documentation/kube-flannel.yml

    # å…è®¸ä¸»èŠ‚ç‚¹è°ƒåº¦Pod
kubectl taint nodes --all node-role.kubernetes.io/control-plane-
```

#### 4.2.2 å·¥ä½œèŠ‚ç‚¹åŠ å…¥

```bash
    # å·¥ä½œèŠ‚ç‚¹åŠ å…¥è„šæœ¬
#!/bin/bash

    # åœ¨ä¸»èŠ‚ç‚¹è·å–åŠ å…¥å‘½ä»¤
kubeadm token create --print-join-command

    # åœ¨å·¥ä½œèŠ‚ç‚¹æ‰§è¡ŒåŠ å…¥å‘½ä»¤
sudo kubeadm join 192.168.1.100:6443 --token <token> --discovery-token-ca-cert-hash <hash>

    # éªŒè¯èŠ‚ç‚¹çŠ¶æ€
kubectl get nodes
```

## 5. æ··åˆéƒ¨ç½²

### 5.1 è™šæ‹ŸåŒ–+å®¹å™¨åŒ–æ¶æ„

```yaml
æ··åˆéƒ¨ç½²æ¶æ„:
  è™šæ‹ŸåŒ–å±‚:
    - VMware vSphereé›†ç¾¤
    - è™šæ‹Ÿæœºèµ„æºæ± 
    - è™šæ‹Ÿç½‘ç»œ
    - å­˜å‚¨è™šæ‹ŸåŒ–
  
  å®¹å™¨åŒ–å±‚:
    - Kubernetesé›†ç¾¤
    - å®¹å™¨è¿è¡Œæ—¶
    - æœåŠ¡ç½‘æ ¼
    - å®¹å™¨å­˜å‚¨
  
  åº”ç”¨å±‚:
    - ä¼ ç»Ÿåº”ç”¨(è™šæ‹Ÿæœº)
    - å¾®æœåŠ¡åº”ç”¨(å®¹å™¨)
    - æ•°æ®åº“æœåŠ¡
    - ç›‘æ§æœåŠ¡
```

### 5.2 éƒ¨ç½²ç­–ç•¥

```bash
    # æ··åˆéƒ¨ç½²è„šæœ¬
#!/bin/bash

    # åˆ›å»ºè™šæ‹Ÿæœºç”¨äºä¼ ç»Ÿåº”ç”¨
vmware-vdiskmanager -c -s 100GB -a lsilogic -t 0 traditional-app.vmdk

    # éƒ¨ç½²ä¼ ç»Ÿåº”ç”¨åˆ°è™šæ‹Ÿæœº
virt-install \
  --name traditional-app \
  --ram 4096 \
  --vcpus 4 \
  --disk path=traditional-app.vmdk \
  --network network=default \
  --graphics none \
  --console pty,target_type=serial \
  --location /path/to/centos.iso

    # éƒ¨ç½²å¾®æœåŠ¡åˆ°Kubernetes
kubectl apply -f microservices/

    # é…ç½®æœåŠ¡å‘ç°
kubectl apply -f service-mesh/

    # é…ç½®è´Ÿè½½å‡è¡¡
kubectl apply -f ingress/
```

## 6. ç›‘æ§ä¸è¿ç»´

### 6.1 ç›‘æ§ç³»ç»Ÿéƒ¨ç½²

```yaml
    # ç›‘æ§ç³»ç»Ÿé…ç½®
monitoring_stack:
  prometheus:
    image: prom/prometheus:latest
    config: prometheus.yml
    storage: 200h
  
  grafana:
    image: grafana/grafana:latest
    dashboards: 
      - virtualization-dashboard
      - container-dashboard
      - application-dashboard
  
  alertmanager:
    image: prom/alertmanager:latest
    config: alertmanager.yml
  
  node_exporter:
    image: prom/node-exporter:latest
    ports:
      - "9100:9100"
  
  cadvisor:
    image: gcr.io/cadvisor/cadvisor:latest
    ports:
      - "8080:8080"
```

### 6.2 æ—¥å¿—ç®¡ç†

```yaml
    # æ—¥å¿—ç®¡ç†ç³»ç»Ÿ
logging_stack:
  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:8.8.0
    environment:
      - discovery.type=single-node
      - xpack.security.enabled=false
    ports:
      - "9200:9200"
  
  logstash:
    image: docker.elastic.co/logstash/logstash:8.8.0
    volumes:
      - ./logstash/pipeline:/usr/share/logstash/pipeline
    ports:
      - "5044:5044"
  
  kibana:
    image: docker.elastic.co/kibana/kibana:8.8.0
    environment:
      - ELASTICSEARCH_HOSTS=http://elasticsearch:9200
    ports:
      - "5601:5601"
  
  filebeat:
    image: docker.elastic.co/beats/filebeat:8.8.0
    volumes:
      - ./filebeat/filebeat.yml:/usr/share/filebeat/filebeat.yml
      - /var/log:/var/log:ro
      - /var/lib/docker/containers:/var/lib/docker/containers:ro
```

### 6.3 è‡ªåŠ¨åŒ–è¿ç»´

```python
    # è‡ªåŠ¨åŒ–è¿ç»´è„šæœ¬
import asyncio
import aiohttp
import json
from datetime import datetime

class AutomationOps:
    def __init__(self):
        self.k8s_api = "https://kubernetes.default.svc"
        self.vmware_api = "https://vcenter.local"
        self.monitoring_api = "http://prometheus:9090"
    
    async def health_check(self):
        """å¥åº·æ£€æŸ¥"""
        services = [
            "virtualization-monitor",
            "container-orchestrator", 
            "semantic-validator",
            "prometheus",
            "grafana"
        ]
        
        for service in services:
            try:
                async with aiohttp.ClientSession() as session:
                    async with session.get(f"http://{service}:8080/health") as response:
                        if response.status == 200:
                            print(f"âœ… {service} å¥åº·")
                        else:
                            print(f"âŒ {service} ä¸å¥åº·")
                            await self.restart_service(service)
            except Exception as e:
                print(f"âŒ {service} æ£€æŸ¥å¤±è´¥: {e}")
                await self.restart_service(service)
    
    async def restart_service(self, service_name):
        """é‡å¯æœåŠ¡"""
        try:
            # KubernetesæœåŠ¡é‡å¯
            if service_name in ["container-orchestrator", "semantic-validator"]:
                await self.restart_k8s_deployment(service_name)
            # DockeræœåŠ¡é‡å¯
            else:
                await self.restart_docker_service(service_name)
            print(f"ğŸ”„ {service_name} å·²é‡å¯")
        except Exception as e:
            print(f"âŒ {service_name} é‡å¯å¤±è´¥: {e}")
    
    async def scale_services(self, load_metrics):
        """è‡ªåŠ¨æ‰©ç¼©å®¹"""
        for service, metrics in load_metrics.items():
            if metrics["cpu"] > 80 or metrics["memory"] > 80:
                await self.scale_up(service)
            elif metrics["cpu"] < 20 and metrics["memory"] < 20:
                await self.scale_down(service)
    
    async def backup_data(self):
        """æ•°æ®å¤‡ä»½"""
        backup_time = datetime.now().strftime("%Y%m%d_%H%M%S")
        
        # å¤‡ä»½æ•°æ®åº“
        await self.backup_database(backup_time)
        
        # å¤‡ä»½é…ç½®æ–‡ä»¶
        await self.backup_configs(backup_time)
        
        # å¤‡ä»½æ—¥å¿—
        await self.backup_logs(backup_time)
        
        print(f"âœ… å¤‡ä»½å®Œæˆ: {backup_time}")
```

## 7. æ•…éšœæ’é™¤

### 7.1 å¸¸è§é—®é¢˜è¯Šæ–­

```bash
    # æ•…éšœè¯Šæ–­è„šæœ¬
#!/bin/bash

echo "=== ç³»ç»Ÿè¯Šæ–­ ==="

    # æ£€æŸ¥ç³»ç»Ÿèµ„æº
echo "CPUä½¿ç”¨ç‡:"
top -bn1 | grep "Cpu(s)" | awk '{print $2}' | cut -d'%' -f1

echo "å†…å­˜ä½¿ç”¨ç‡:"
free | grep Mem | awk '{printf "%.2f%%", $3/$2 * 100.0}'

echo "ç£ç›˜ä½¿ç”¨ç‡:"
df -h | grep -E '/dev/'

    # æ£€æŸ¥ç½‘ç»œè¿æ¥
echo "ç½‘ç»œè¿æ¥çŠ¶æ€:"
netstat -tuln | grep -E ':(80|443|8080|8081|8082|9090|3000)'

    # æ£€æŸ¥DockerçŠ¶æ€
echo "DockerçŠ¶æ€:"
docker ps
docker system df

    # æ£€æŸ¥KubernetesçŠ¶æ€
echo "KubernetesçŠ¶æ€:"
kubectl get nodes
kubectl get pods --all-namespaces
kubectl get services --all-namespaces

    # æ£€æŸ¥æœåŠ¡æ—¥å¿—
echo "æœåŠ¡æ—¥å¿—:"
docker logs virtualization-monitor --tail 50
docker logs container-orchestrator --tail 50
docker logs semantic-validator --tail 50
```

### 7.2 æ€§èƒ½é—®é¢˜æ’æŸ¥

```python
    # æ€§èƒ½é—®é¢˜æ’æŸ¥å·¥å…·
import psutil
import docker
import requests
import time

class PerformanceDiagnostics:
    def __init__(self):
        self.docker_client = docker.from_env()
    
    def check_system_performance(self):
        """æ£€æŸ¥ç³»ç»Ÿæ€§èƒ½"""
        print("=== ç³»ç»Ÿæ€§èƒ½æ£€æŸ¥ ===")
        
        # CPUä½¿ç”¨ç‡
        cpu_percent = psutil.cpu_percent(interval=1)
        print(f"CPUä½¿ç”¨ç‡: {cpu_percent}%")
        
        # å†…å­˜ä½¿ç”¨ç‡
        memory = psutil.virtual_memory()
        print(f"å†…å­˜ä½¿ç”¨ç‡: {memory.percent}%")
        
        # ç£ç›˜IO
        disk_io = psutil.disk_io_counters()
        print(f"ç£ç›˜è¯»å–: {disk_io.read_bytes / 1024 / 1024:.2f} MB")
        print(f"ç£ç›˜å†™å…¥: {disk_io.write_bytes / 1024 / 1024:.2f} MB")
        
        # ç½‘ç»œIO
        network_io = psutil.net_io_counters()
        print(f"ç½‘ç»œæ¥æ”¶: {network_io.bytes_recv / 1024 / 1024:.2f} MB")
        print(f"ç½‘ç»œå‘é€: {network_io.bytes_sent / 1024 / 1024:.2f} MB")
    
    def check_container_performance(self):
        """æ£€æŸ¥å®¹å™¨æ€§èƒ½"""
        print("=== å®¹å™¨æ€§èƒ½æ£€æŸ¥ ===")
        
        containers = self.docker_client.containers.list()
        for container in containers:
            stats = container.stats(stream=False)
            
            # CPUä½¿ç”¨ç‡
            cpu_delta = stats['cpu_stats']['cpu_usage']['total_usage'] - stats['precpu_stats']['cpu_usage']['total_usage']
            system_delta = stats['cpu_stats']['system_cpu_usage'] - stats['precpu_stats']['system_cpu_usage']
            cpu_percent = (cpu_delta / system_delta) * len(stats['cpu_stats']['cpu_usage']['percpu_usage']) * 100.0
            
            # å†…å­˜ä½¿ç”¨ç‡
            memory_usage = stats['memory_stats']['usage']
            memory_limit = stats['memory_stats']['limit']
            memory_percent = (memory_usage / memory_limit) * 100.0
            
            print(f"å®¹å™¨ {container.name}:")
            print(f"  CPUä½¿ç”¨ç‡: {cpu_percent:.2f}%")
            print(f"  å†…å­˜ä½¿ç”¨ç‡: {memory_percent:.2f}%")
    
    def check_service_response_time(self):
        """æ£€æŸ¥æœåŠ¡å“åº”æ—¶é—´"""
        print("=== æœåŠ¡å“åº”æ—¶é—´æ£€æŸ¥ ===")
        
        services = [
            "http://localhost:8080/health",
            "http://localhost:8081/health", 
            "http://localhost:8082/health",
            "http://localhost:9090/-/healthy",
            "http://localhost:3000/api/health"
        ]
        
        for service_url in services:
            try:
                start_time = time.time()
                response = requests.get(service_url, timeout=5)
                response_time = time.time() - start_time
                
                if response.status_code == 200:
                    print(f"âœ… {service_url}: {response_time:.3f}s")
                else:
                    print(f"âŒ {service_url}: HTTP {response.status_code}")
            except Exception as e:
                print(f"âŒ {service_url}: {e}")
```

## 8. å­˜å‚¨æ¶æ„æ ‡å‡†é…ç½® ğŸ†•

**ä¼ä¸šçº§å­˜å‚¨æ¶æ„è®¾è®¡**[storage-design]:

### 8.1 å­˜å‚¨ç±»å‹ä¸é€‰å‹æ ‡å‡†

**å­˜å‚¨æŠ€æœ¯å¯¹æ¯”ä¸é€‰å‹**[storage-comparison]:

```yaml
å­˜å‚¨æ¶æ„åˆ†ç±»[storage-types]:
  æœ¬åœ°å­˜å‚¨ (DAS - Direct Attached Storage):
    ç‰¹ç‚¹:
      âœ… æœ€é«˜æ€§èƒ½ï¼ˆPCIeç›´è¿ï¼‰
      âœ… æœ€ä½å»¶è¿Ÿ (<1ms)
      âœ… æˆæœ¬æœ€ä½
      âŒ æ— å…±äº«å­˜å‚¨
      âŒ ä¸æ”¯æŒvMotion
      âŒ æ‰©å±•æ€§å·®
    
    é€‚ç”¨åœºæ™¯:
      - å°å‹ç¯å¢ƒï¼ˆ1-5å°ä¸»æœºï¼‰
      - è¾¹ç¼˜è®¡ç®—èŠ‚ç‚¹
      - é«˜æ€§èƒ½è®¡ç®—ï¼ˆHPCï¼‰
      - æ•°æ®åº“ç¼“å­˜å±‚
      - æµ‹è¯•å¼€å‘ç¯å¢ƒ
    
    æ¨èé…ç½®:
      ç³»ç»Ÿç›˜: 2x 480GB SATA SSD (RAID1)
      æ•°æ®ç›˜: 4-8x NVMe SSD (RAID10)
      æ§åˆ¶å™¨: å¸¦ç”µæ± å¤‡ä»½ç¼“å­˜
  
  ç½‘ç»œå­˜å‚¨ (NAS - Network Attached Storage):
    ç‰¹ç‚¹:
      âœ… æ–‡ä»¶çº§å…±äº«å­˜å‚¨
      âœ… æ”¯æŒvMotion/DRS
      âœ… æ˜“äºç®¡ç†å’Œæ‰©å±•
      âœ… å¤šåè®®æ”¯æŒï¼ˆNFS/SMBï¼‰
      âš ï¸ æ€§èƒ½ä¸­ç­‰
      âš ï¸ ç½‘ç»œä¾èµ–æ€§é«˜
    
    é€‚ç”¨åœºæ™¯:
      - ä¸­å°å‹ç¯å¢ƒï¼ˆ5-50å°ä¸»æœºï¼‰
      - è™šæ‹Ÿæœºå­˜å‚¨
      - ISO/æ¨¡æ¿åº“
      - æ–‡ä»¶å…±äº«æœåŠ¡
      - æ—¥å¿—å½’æ¡£å­˜å‚¨
    
    æ€§èƒ½è¦æ±‚:
      ç½‘ç»œ: 10GbEä»¥ä¸Šï¼ˆæ¨è25GbEï¼‰
      å»¶è¿Ÿ: <3ms
      IOPS: 10,000+ (SSD)
      å¸¦å®½: 1GB/s+
    
    æ¨èäº§å“:
      å…¥é—¨çº§: Synology DS1821+ (Â¥18,000)
      ä¼ä¸šçº§: NetApp FAS2750 (Â¥280,000)
      å¼€æºæ–¹æ¡ˆ: TrueNAS Scale (Â¥120,000ç¡¬ä»¶)
  
  SANå­˜å‚¨ (Storage Area Network):
    iSCSI SAN:
      ç‰¹ç‚¹:
        âœ… å—çº§å­˜å‚¨
        âœ… åŸºäºä»¥å¤ªç½‘
        âœ… æ”¯æŒå¤šè·¯å¾„
        âœ… æˆæœ¬é€‚ä¸­
        âš ï¸ éœ€è¦ä¸“ç”¨ç½‘ç»œ
      
      ç½‘ç»œè¦æ±‚:
        ä¸“ç”¨VLAN: éš”ç¦»å­˜å‚¨æµé‡
        é“¾è·¯èšåˆ: å¤šè·¯å¾„é«˜å¯ç”¨
        Jumbo Frame: MTU 9000
        QoS: å­˜å‚¨æµé‡ä¼˜å…ˆ
      
      é…ç½®ç¤ºä¾‹:
        ```bash
        # ESXi iSCSIé…ç½®
        # 1. åˆ›å»ºiSCSIé€‚é…å™¨
        esxcli iscsi software set --enabled=true
        
        # 2. é…ç½®iSCSIç½‘ç»œ
        esxcli network ip interface ipv4 set \
          -i vmk1 -t static -I 192.168.20.101 -N 255.255.255.0
        
        # 3. ç»‘å®šç½‘ç»œç«¯å£
        esxcli iscsi networkportal add \
          -A vmhba33 -n vmk1
        
        # 4. æ·»åŠ iSCSIç›®æ ‡
        esxcli iscsi adapter discovery sendtarget add \
          -A vmhba33 -a 192.168.20.10:3260
        
        # 5. é‡æ–°æ‰«æ
        esxcli storage core adapter rescan --adapter=vmhba33
        ```
    
    FC SAN (Fibre Channel):
      ç‰¹ç‚¹:
        âœ… æœ€é«˜æ€§èƒ½
        âœ… æœ€ä½å»¶è¿Ÿ (<1ms)
        âœ… æœ€é«˜å¯é æ€§
        âœ… ä¼ä¸šçº§æ ‡å‡†
        âŒ æˆæœ¬æœ€é«˜
        âŒ é…ç½®å¤æ‚
      
      ç¡¬ä»¶è¦æ±‚:
        HBAå¡: 16Gb/32Gb FC
        FCäº¤æ¢æœº: Brocade/Cisco
        å­˜å‚¨é˜µåˆ—: EMC/NetApp/HPE
      
      æ€§èƒ½æŒ‡æ ‡:
        å¸¦å®½: 16Gb/32Gb (2GB/s-4GB/s)
        å»¶è¿Ÿ: <0.5ms
        IOPS: 100,000+
  
  è¶…èåˆæ¶æ„ (HCI - Hyper-Converged Infrastructure):
    VMware vSAN:
      ç‰¹ç‚¹:
        âœ… è½¯ä»¶å®šä¹‰å­˜å‚¨
        âœ… æ·±åº¦é›†æˆvSphere
        âœ… æ¨ªå‘æ‰©å±•
        âœ… ç®€åŒ–ç®¡ç†
        âš ï¸ æœ€å°‘3èŠ‚ç‚¹
        âš ï¸ è®¸å¯æˆæœ¬é«˜
      
      ç¡¬ä»¶è¦æ±‚:
        ç¼“å­˜å±‚: NVMe SSD (10% å®¹é‡)
        å®¹é‡å±‚: SSDæˆ–HDD
        ç½‘ç»œ: 10GbEä»¥ä¸Š
        å†…å­˜: å¤§å®¹é‡ECC
      
      å­˜å‚¨ç­–ç•¥:
        RAID-1 (é•œåƒ):
          å‰¯æœ¬æ•°: 2
          å®¹é”™: 1ä¸ªèŠ‚ç‚¹
          ç©ºé—´æ•ˆç‡: 50%
          æœ€å°èŠ‚ç‚¹: 3
        
        RAID-5 (çº åˆ ç ):
          å¥‡å¶æ ¡éªŒ: 1
          å®¹é”™: 1ä¸ªèŠ‚ç‚¹
          ç©ºé—´æ•ˆç‡: 75%
          æœ€å°èŠ‚ç‚¹: 4
        
        RAID-6 (çº åˆ ç ):
          å¥‡å¶æ ¡éªŒ: 2
          å®¹é”™: 2ä¸ªèŠ‚ç‚¹
          ç©ºé—´æ•ˆç‡: 67%
          æœ€å°èŠ‚ç‚¹: 6
    
    Cephåˆ†å¸ƒå¼å­˜å‚¨:
      ç‰¹ç‚¹:
        âœ… å¼€æºå…è´¹
        âœ… é«˜åº¦å¯æ‰©å±•
        âœ… æ”¯æŒå—/æ–‡ä»¶/å¯¹è±¡
        âœ… KubernetesåŸç”Ÿ
        âš ï¸ è¿ç»´å¤æ‚
        âš ï¸ è°ƒä¼˜éš¾åº¦å¤§
      
      é›†ç¾¤è§„åˆ’:
        MONèŠ‚ç‚¹: 3ä¸ªï¼ˆå¥‡æ•°ï¼‰
        MGRèŠ‚ç‚¹: 2ä¸ªï¼ˆä¸»å¤‡ï¼‰
        OSDèŠ‚ç‚¹: æœ€å°‘3ä¸ª
        MDSèŠ‚ç‚¹: 2ä¸ªï¼ˆCephFSï¼‰
      
      ç¡¬ä»¶é…ç½®/OSDèŠ‚ç‚¹:
        CPU: 2æ ¸/OSD
        å†…å­˜: 4-8GB/OSD
        ç½‘ç»œ: åŒ10GbE+
        ç£ç›˜: 10-12å—/èŠ‚ç‚¹

å­˜å‚¨æ€§èƒ½å¯¹æ¯”è¡¨:
  | ç±»å‹ | IOPS | å»¶è¿Ÿ | å¸¦å®½ | æˆæœ¬ | å¯é æ€§ | æ¨èåœºæ™¯ |
  |------|------|------|------|------|--------|----------|
  | æœ¬åœ°NVMe | 500K+ | <0.1ms | 3GB/s+ | â˜…â˜…â˜…â˜… | â˜…â˜…â˜… | HPC/æ•°æ®åº“ |
  | iSCSI SSD | 50K+ | <3ms | 1GB/s | â˜…â˜…â˜… | â˜…â˜…â˜…â˜… | è™šæ‹ŸåŒ– |
  | NFS SSD | 30K+ | <5ms | 500MB/s | â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜… | æ–‡ä»¶å…±äº« |
  | FC SAN | 100K+ | <0.5ms | 2GB/s+ | â˜…â˜… | â˜…â˜…â˜…â˜…â˜… | å…³é”®ä¸šåŠ¡ |
  | vSAN | 50K+ | <2ms | 1GB/s | â˜…â˜… | â˜…â˜…â˜…â˜… | è¶…èåˆ |
  | Ceph | 30K+ | <5ms | 500MB/s | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜… | äº‘åŸç”Ÿ |
```

### 8.2 ç½‘ç»œæ¶æ„æ ‡å‡†é…ç½® ğŸ†•

**è™šæ‹ŸåŒ–ç½‘ç»œè®¾è®¡æœ€ä½³å®è·µ**[network-design]:

```yaml
ç½‘ç»œæ¶æ„è®¾è®¡æ ‡å‡†[network-standards]:
  VLANè§„åˆ’æ ‡å‡†:
    ç®¡ç†ç½‘ç»œ (VLAN 10):
      ç”¨é€”: ESXi/vCenterç®¡ç†æ¥å£
      IPæ®µ: 192.168.10.0/24
      ç½‘å…³: 192.168.10.1
      DHCP: ç¦ç”¨ï¼ˆé™æ€IPï¼‰
      MTU: 1500
      QoS: é«˜ä¼˜å…ˆçº§
      å®‰å…¨: é˜²ç«å¢™ä¸¥æ ¼é™åˆ¶
    
    å­˜å‚¨ç½‘ç»œ (VLAN 20):
      ç”¨é€”: iSCSI/NFSå­˜å‚¨æµé‡
      IPæ®µ: 192.168.20.0/24
      ç½‘å…³: æ— ï¼ˆäºŒå±‚ç›´è¿ï¼‰
      DHCP: ç¦ç”¨
      MTU: 9000 (Jumbo Frame)
      QoS: æœ€é«˜ä¼˜å…ˆçº§
      å®‰å…¨: å®Œå…¨éš”ç¦»
      ç»‘å®š: VMkernelä¸“ç”¨ç«¯å£
    
    vMotionç½‘ç»œ (VLAN 30):
      ç”¨é€”: è™šæ‹Ÿæœºçƒ­è¿ç§»
      IPæ®µ: 192.168.30.0/24
      ç½‘å…³: æ— ï¼ˆäºŒå±‚ç›´è¿ï¼‰
      DHCP: ç¦ç”¨
      MTU: 9000
      QoS: é«˜ä¼˜å…ˆçº§
      å¸¦å®½: 10GbEä»¥ä¸Š
    
    è™šæ‹Ÿæœºç½‘ç»œ - ç”Ÿäº§ (VLAN 40-49):
      VLAN 40: Webå±‚ (10.0.40.0/22)
      VLAN 41: åº”ç”¨å±‚ (10.0.44.0/22)
      VLAN 42: æ•°æ®åº“å±‚ (10.0.48.0/24)
      VLAN 43: ç¼“å­˜å±‚ (10.0.49.0/24)
      ç‰¹ç‚¹: ä¸‰å±‚éš”ç¦»ï¼Œé˜²ç«å¢™ç­–ç•¥
    
    è™šæ‹Ÿæœºç½‘ç»œ - å¼€å‘æµ‹è¯• (VLAN 50-59):
      VLAN 50: å¼€å‘ç¯å¢ƒ (10.0.50.0/24)
      VLAN 51: æµ‹è¯•ç¯å¢ƒ (10.0.51.0/24)
      VLAN 52: é¢„å‘å¸ƒç¯å¢ƒ (10.0.52.0/24)
      ç‰¹ç‚¹: DHCPå¯ç”¨ï¼Œçµæ´»é…ç½®
    
    DMZç½‘ç»œ (VLAN 60):
      ç”¨é€”: å¯¹å¤–æœåŠ¡ï¼ˆWeb/APIï¼‰
      IPæ®µ: å…¬ç½‘IPæ®µæˆ–NAT
      å®‰å…¨: ä¸¥æ ¼ACLæ§åˆ¶
      ç›‘æ§: å…¥ä¾µæ£€æµ‹ç³»ç»Ÿ
    
    Kubernetesç½‘ç»œ (VLAN 100-109):
      VLAN 100: K8sèŠ‚ç‚¹ç½‘ç»œ (10.100.0.0/16)
      Podç½‘ç»œ: 10.244.0.0/16 (Overlay)
      Serviceç½‘ç»œ: 10.96.0.0/12 (ClusterIP)
      
      CNIé€‰æ‹©:
        Calico: VXLAN/BGPæ¨¡å¼
        Cilium: eBPFåŠ é€Ÿ
        Flannel: ç®€å•æ˜“ç”¨

ç‰©ç†ç½‘ç»œæ‹“æ‰‘æ ‡å‡†:
  æ¥å…¥å±‚äº¤æ¢æœºé…ç½®:
    ç«¯å£é…ç½®:
      ```
      # Ciscoäº¤æ¢æœºé…ç½®ç¤ºä¾‹
      
      # å…¨å±€é…ç½®
      spanning-tree mode rapid-pvst
      spanning-tree extend system-id
      
      # åˆ›å»ºVLAN
      vlan 10
        name Management
      vlan 20
        name Storage
      vlan 30
        name vMotion
      vlan 40
        name VM-Production
      vlan 50
        name VM-Development
      vlan 100
        name K8s-Nodes
      
      # Trunkç«¯å£ï¼ˆä¸Šè¡Œåˆ°æ±‡èšå±‚ï¼‰
      interface range GigabitEthernet1/0/47-48
        description Uplink to Core
        switchport mode trunk
        switchport trunk allowed vlan 10,20,30,40,50,100
        channel-group 1 mode active
        spanning-tree portfast trunk
      
      # æœåŠ¡å™¨æ¥å…¥ç«¯å£
      interface range GigabitEthernet1/0/1-24
        description ESXi Hosts
        switchport mode trunk
        switchport trunk allowed vlan 10,20,30,40,50,100
        spanning-tree portfast trunk
        storm-control broadcast level 10.00
        storm-control multicast level 10.00
      
      # å­˜å‚¨ç½‘ç»œç«¯å£ï¼ˆä¸“ç”¨ï¼‰
      interface range GigabitEthernet1/0/25-30
        description Storage Network
        switchport mode access
        switchport access vlan 20
        mtu 9000
        spanning-tree portfast
      ```
  
  é“¾è·¯èšåˆæ ‡å‡† (LACP):
    ESXiä¸»æœºé…ç½®:
      ç®¡ç†+ä¸šåŠ¡ç½‘ç»œ:
        ç‰©ç†ç½‘å¡: vmnic0, vmnic1
        æ¨¡å¼: LACP Active
        è´Ÿè½½å‡è¡¡: Route based on IP hash
        æ•…éšœåˆ‡æ¢: 3ç§’å†…
      
      å­˜å‚¨ç½‘ç»œ:
        ç‰©ç†ç½‘å¡: vmnic2, vmnic3
        æ¨¡å¼: LACP Active
        è´Ÿè½½å‡è¡¡: Route based on originating port
        ä¸“ç”¨: ä»…å­˜å‚¨æµé‡
      
      vMotionç½‘ç»œ:
        ç‰©ç†ç½‘å¡: vmnic4, vmnic5
        æ¨¡å¼: LACP Active
        ä¸“ç”¨: ä»…vMotionæµé‡
    
    é…ç½®è„šæœ¬:
      ```bash
      # VMwareåˆ†å¸ƒå¼äº¤æ¢æœºLACPé…ç½®
      
      # 1. åˆ›å»ºåˆ†å¸ƒå¼äº¤æ¢æœº
      New-VDSwitch -Name "vDS-Production" \
        -Location (Get-Datacenter) \
        -NumUplinkPorts 6
      
      # 2. æ·»åŠ ä¸»æœº
      Get-VMHost | Add-VDSwitchVMHost -VDSwitch "vDS-Production"
      
      # 3. æ·»åŠ ç‰©ç†ç½‘å¡
      $vmhost = Get-VMHost "esxi-01.domain.local"
      $vds = Get-VDSwitch "vDS-Production"
      $pnic = Get-VMHostNetworkAdapter -VMHost $vmhost -Physical -Name vmnic0,vmnic1
      Add-VDSwitchPhysicalNetworkAdapter -VMHostPhysicalNic $pnic \
        -DistributedSwitch $vds -Confirm:$false
      
      # 4. åˆ›å»ºä¸Šè¡Œé“¾è·¯ç»„ï¼ˆå¯ç”¨LACPï¼‰
      $vds | New-VDUplinkLACPGroup -Name "LAG-Management" \
        -NumberOfPorts 2 -LoadBalancingMode "SrcDestIpTcpUdpPortId"
      
      # 5. åˆ›å»ºç«¯å£ç»„
      New-VDPortgroup -Name "Management" -VDSwitch $vds -VlanId 10
      New-VDPortgroup -Name "Storage" -VDSwitch $vds -VlanId 20
      New-VDPortgroup -Name "vMotion" -VDSwitch $vds -VlanId 30
      New-VDPortgroup -Name "VM-Network" -VDSwitch $vds -VlanId 40
      ```

ç½‘ç»œæ€§èƒ½ä¼˜åŒ–æ ‡å‡†:
  Jumbo Frameé…ç½®:
    è¦æ±‚:
      - å…¨é“¾è·¯æ”¯æŒï¼ˆæœåŠ¡å™¨-äº¤æ¢æœº-å­˜å‚¨ï¼‰
      - MTU 9000
      - ä»…ç”¨äºå­˜å‚¨å’ŒvMotionç½‘ç»œ
    
    é…ç½®æ­¥éª¤:
      1. äº¤æ¢æœºå¯ç”¨Jumbo Frame
      2. ESXi vSwitch MTUè®¾ç½®ä¸º9000
      3. VMkernelç«¯å£MTUè®¾ç½®ä¸º9000
      4. å­˜å‚¨è®¾å¤‡MTUè®¾ç½®ä¸º9000
      5. æµ‹è¯•éªŒè¯:
         ```bash
         vmkping -s 8972 -d 192.168.20.10
         ```
  
  ç½‘ç»œæµé‡æ•´å½¢:
    QoSé…ç½®:
      ```yaml
      æµé‡ä¼˜å…ˆçº§:
        0 - æœ€ä½: æ—¥å¸¸ç®¡ç†æµé‡
        1 - ä½: VMä¸€èˆ¬ä¸šåŠ¡
        2 - ä¸­: VMé‡è¦ä¸šåŠ¡
        3 - é«˜: vMotionæµé‡
        4 - æœ€é«˜: å­˜å‚¨æµé‡
      
      å¸¦å®½é™åˆ¶:
        ç®¡ç†æµé‡: æ— é™åˆ¶
        vMotion: ä¿è¯å¸¦å®½1Gbps
        å­˜å‚¨: ä¿è¯å¸¦å®½5Gbps
        VMä¸šåŠ¡: æŒ‰éœ€åˆ†é…
      ```
  
  ç½‘ç»œå®‰å…¨æ ‡å‡†:
    vSwitchå®‰å…¨ç­–ç•¥:
      æ··æ‚æ¨¡å¼: æ‹’ç»
      MACåœ°å€æ›´æ”¹: æ‹’ç»
      ä¼ªä¼ è¾“: æ¥å—
    
    é˜²ç«å¢™è§„åˆ™:
      ```bash
      # ESXié˜²ç«å¢™é…ç½®
      
      # æŸ¥çœ‹è§„åˆ™é›†
      esxcli network firewall ruleset list
      
      # å…è®¸SSHï¼ˆç®¡ç†ç½‘ç»œï¼‰
      esxcli network firewall ruleset set \
        --ruleset-id=sshServer --enabled=true
      
      # å…è®¸NTP
      esxcli network firewall ruleset set \
        --ruleset-id=ntpClient --enabled=true
      
      # é™åˆ¶vCenterè®¿é—®
      esxcli network firewall ruleset allowedip add \
        --ruleset-id=vSphereClient \
        --ip-address=192.168.10.10/32
      ```

## 9. é«˜å¯ç”¨ä¸å®¹ç¾æ ‡å‡†é…ç½® ğŸ†•

**é«˜å¯ç”¨æ€§æ¶æ„è®¾è®¡**[ha-architecture]:

### 9.1 VMware HAé…ç½®æ ‡å‡†

**vSphere HAæ·±åº¦é…ç½®**[vsphere-ha]:

```yaml
vSphere HAå®Œæ•´é…ç½®[ha-configuration]:
  åŸºç¡€é…ç½®:
    é›†ç¾¤HA: å¯ç”¨
    å‡†å…¥æ§åˆ¶: å¯ç”¨
    ç­–ç•¥: é›†ç¾¤èµ„æºç™¾åˆ†æ¯”
    CPUé¢„ç•™: 25%
    å†…å­˜é¢„ç•™: 25%
    
    æ•…éšœæ¡ä»¶:
      ä¸»æœºæ•…éšœ: é‡å¯VM
      ä¸»æœºéš”ç¦»: å…³é—­VMç”µæº
      æ•°æ®å­˜å‚¨PDL: å…³é—­VMç”µæºå¹¶é‡å¯
      æ•°æ®å­˜å‚¨APD: å…³é—­VMç”µæºå¹¶é‡å¯
  
  é«˜çº§é…ç½®:
    å¿ƒè·³æ•°æ®å­˜å‚¨:
      æ•°é‡: 2-4ä¸ª
      é€‰æ‹©: ä¸åŒå­˜å‚¨é˜µåˆ—
      ç›®çš„: ç½‘ç»œéš”ç¦»æ£€æµ‹
    
    VMé‡å¯ä¼˜å…ˆçº§:
      æœ€é«˜ä¼˜å…ˆçº§:
        - æ•°æ®åº“æœåŠ¡å™¨ï¼ˆMySQL/PostgreSQLï¼‰
        - ADåŸŸæ§åˆ¶å™¨
        - DNSæœåŠ¡å™¨
        - æ ¸å¿ƒä¸šåŠ¡åº”ç”¨
      
      é«˜ä¼˜å…ˆçº§:
        - WebæœåŠ¡å™¨
        - åº”ç”¨æœåŠ¡å™¨
        - æ¶ˆæ¯é˜Ÿåˆ—
      
      ä¸­ä¼˜å…ˆçº§:
        - æ—¥å¿—æœåŠ¡å™¨
        - ç›‘æ§æœåŠ¡å™¨
      
      ä½ä¼˜å…ˆçº§:
        - å¼€å‘æµ‹è¯•ç¯å¢ƒ
        - ä¸´æ—¶è™šæ‹Ÿæœº
      
      ç¦ç”¨:
        - ç»´æŠ¤ä¸­çš„è™šæ‹Ÿæœº
    
    VMç›‘æ§:
      VMç›‘æ§: ä»…VMç›‘æ§
      VMé‡å¯çµæ•åº¦: ä¸­
      å¤±è´¥é—´éš”: 30ç§’
      æœ€å°‘æ­£å¸¸è¿è¡Œæ—¶é—´: 120ç§’
      æ¯ä¸ªVMçš„æœ€å¤§é‡å¯æ¬¡æ•°: 3æ¬¡
      é‡å¯çª—å£: 1å°æ—¶
  
  æ•…éšœéš”ç¦»å“åº”:
    éš”ç¦»åœ°å€:
      - é»˜è®¤ç½‘å…³: 192.168.10.1
      - å¤‡ç”¨åœ°å€1: 8.8.8.8
      - å¤‡ç”¨åœ°å€2: 114.114.114.114
    
    å“åº”: å…³é—­VMç”µæºå¹¶é‡å¯
    å»¶è¿Ÿ: 30ç§’

é…ç½®PowerCLIè„šæœ¬:
  ```powershell
  # vSphere HAå®Œæ•´é…ç½®è„šæœ¬
  
  # è¿æ¥vCenter
  Connect-VIServer -Server vcenter.domain.local
  
  # è·å–é›†ç¾¤
  $cluster = Get-Cluster "Cluster-Production"
  
  # å¯ç”¨HA
  Set-Cluster -Cluster $cluster `
    -HAEnabled $true `
    -HAAdmissionControlEnabled $true `
    -HAFailoverLevel 1 `
    -HAIsolationResponse PowerOff `
    -HARestartPriority High `
    -Confirm:$false
  
  # é…ç½®å‡†å…¥æ§åˆ¶
  $spec = New-Object VMware.Vim.ClusterConfigSpecEx
  $spec.DasConfig = New-Object VMware.Vim.ClusterDasConfigInfo
  $spec.DasConfig.AdmissionControlPolicy = `
    New-Object VMware.Vim.ClusterFailoverResourcesAdmissionControlPolicy
  $spec.DasConfig.AdmissionControlPolicy.CpuFailoverResourcesPercent = 25
  $spec.DasConfig.AdmissionControlPolicy.MemoryFailoverResourcesPercent = 25
  
  # é…ç½®å¿ƒè·³æ•°æ®å­˜å‚¨
  $datastores = Get-Datastore "datastore1","datastore2"
  Set-Cluster -Cluster $cluster `
    -HAHeartbeatDatastore $datastores `
    -Confirm:$false
  
  # é…ç½®VMç›‘æ§
  $spec.DasConfig.VmMonitoring = "vmMonitoringOnly"
  $spec.DasConfig.VmMonitoringSensitivity = 2
  
  # åº”ç”¨é…ç½®
  $cluster.ExtensionData.ReconfigureComputeResource_Task($spec, $true)
  
  Write-Host "âœ“ vSphere HAé…ç½®å®Œæˆ"
  ```

### 9.2 Kubernetesé«˜å¯ç”¨é…ç½®

**Kubernetes HAé›†ç¾¤è®¾è®¡**[k8s-ha]:

```yaml
K8s HAæ¶æ„æ ‡å‡†[k8s-ha-architecture]:
  æ§åˆ¶å¹³é¢HA:
    MasterèŠ‚ç‚¹æ•°: 3ä¸ªï¼ˆå¥‡æ•°ï¼‰
    è´Ÿè½½å‡è¡¡å™¨: HAProxy/Nginx
    VIP: ä½¿ç”¨Keepalived
    
    æ¶æ„å›¾:
      ```
      [VIP: 192.168.1.100]
           â†“
      [HAProxyè´Ÿè½½å‡è¡¡å™¨]
           â†“
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      â†“        â†“        â†“
    [Master1][Master2][Master3]
      â†“        â†“        â†“
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            â†“
      [etcdé›†ç¾¤ - 3èŠ‚ç‚¹]
      ```
  
  HAProxyé…ç½®:
    ```
    global
        log /dev/log local0
        log /dev/log local1 notice
        daemon
    
    defaults
        log global
        mode tcp
        option tcplog
        option dontlognull
        timeout connect 5000ms
        timeout client 50000ms
        timeout server 50000ms
    
    frontend k8s-api
        bind *:6443
        default_backend k8s-api-backend
        option tcplog
    
    backend k8s-api-backend
        balance roundrobin
        option tcp-check
        option log-health-checks
        server master1 192.168.1.101:6443 check inter 2000 rise 2 fall 3
        server master2 192.168.1.102:6443 check inter 2000 rise 2 fall 3
        server master3 192.168.1.103:6443 check inter 2000 rise 2 fall 3
    
    # ç»Ÿè®¡é¡µé¢
    listen stats
        bind *:9000
        mode http
        stats enable
        stats uri /stats
        stats realm HAProxy\ Statistics
        stats auth admin:password
    ```
  
  Keepalivedé…ç½®:
    MasterèŠ‚ç‚¹:
      ```
      vrrp_instance VI_1 {
          state MASTER
          interface ens192
          virtual_router_id 51
          priority 100
          advert_int 1
          
          authentication {
              auth_type PASS
              auth_pass K8s_VIP_Pass
          }
          
          virtual_ipaddress {
              192.168.1.100/24 dev ens192
          }
          
          track_script {
              check_haproxy
          }
      }
      
      vrrp_script check_haproxy {
          script "/usr/bin/killall -0 haproxy"
          interval 2
          weight -20
      }
      ```
  
  etcdé«˜å¯ç”¨:
    éƒ¨ç½²è¦æ±‚:
      èŠ‚ç‚¹æ•°: 3/5/7ï¼ˆå¥‡æ•°ï¼‰
      æ•°æ®ç›®å½•: SSDå­˜å‚¨
      ç½‘ç»œ: ä½å»¶è¿Ÿ(<5ms)
      å¤‡ä»½: å®šæœŸå¿«ç…§
    
    å¥åº·æ£€æŸ¥:
      ```bash
      # æ£€æŸ¥é›†ç¾¤çŠ¶æ€
      ETCDCTL_API=3 etcdctl \
        --endpoints=https://127.0.0.1:2379 \
        --cacert=/etc/kubernetes/pki/etcd/ca.crt \
        --cert=/etc/kubernetes/pki/etcd/server.crt \
        --key=/etc/kubernetes/pki/etcd/server.key \
        member list
      
      # æ£€æŸ¥é›†ç¾¤å¥åº·
      ETCDCTL_API=3 etcdctl \
        --endpoints=https://127.0.0.1:2379 \
        --cacert=/etc/kubernetes/pki/etcd/ca.crt \
        --cert=/etc/kubernetes/pki/etcd/server.crt \
        --key=/etc/kubernetes/pki/etcd/server.key \
        endpoint health
      
      # æ£€æŸ¥æ€§èƒ½
      ETCDCTL_API=3 etcdctl \
        --endpoints=https://127.0.0.1:2379 \
        --cacert=/etc/kubernetes/pki/etcd/ca.crt \
        --cert=/etc/kubernetes/pki/etcd/server.crt \
        --key=/etc/kubernetes/pki/etcd/server.key \
        endpoint status --write-out=table
      ```

### 9.3 å¤‡ä»½ä¸å®¹ç¾æ ‡å‡†

```bash
#!/bin/bash
# ä¼ä¸šçº§å¤‡ä»½è„šæœ¬

# é…ç½®å˜é‡
BACKUP_ROOT="/backup"
RETENTION_DAYS=30
DATE=$(date +%Y%m%d_%H%M%S)
LOG_FILE="/var/log/backup_${DATE}.log"

# æ—¥å¿—å‡½æ•°
log() {
    echo "[$(date +'%Y-%m-%d %H:%M:%S')] $1" | tee -a $LOG_FILE
}

# 1. VMwareè™šæ‹Ÿæœºå¤‡ä»½
backup_vmware() {
    log "=== å¼€å§‹VMwareå¤‡ä»½ ==="
    
    BACKUP_DIR="${BACKUP_ROOT}/vmware/${DATE}"
    mkdir -p $BACKUP_DIR
    
    # è·å–è™šæ‹Ÿæœºåˆ—è¡¨
    VMS=$(vim-cmd vmsvc/getallvms | awk '{if(NR>1)print $1}')
    
    for VM_ID in $VMS; do
        VM_NAME=$(vim-cmd vmsvc/get.summary $VM_ID | grep -A1 "name =" | tail -1 | awk '{print $3}' | tr -d '"')
        log "å¤‡ä»½è™šæ‹Ÿæœº: $VM_NAME (ID: $VM_ID)"
        
        # åˆ›å»ºå¿«ç…§
        vim-cmd vmsvc/snapshot.create $VM_ID "Backup-${DATE}" "Automated backup" 0 0
        
        # å¯¼å‡ºOVF
        ovftool vi://root@localhost/$VM_NAME "${BACKUP_DIR}/${VM_NAME}.ova"
        
        # åˆ é™¤å¿«ç…§
        SNAPSHOT_ID=$(vim-cmd vmsvc/snapshot.get $VM_ID | grep "Snapshot Id" | awk '{print $4}')
        vim-cmd vmsvc/snapshot.remove $VM_ID $SNAPSHOT_ID
        
        log "âœ“ $VM_NAME å¤‡ä»½å®Œæˆ"
    done
}

# 2. Kuberneteså¤‡ä»½ (ä½¿ç”¨Velero)
backup_kubernetes() {
    log "=== å¼€å§‹Kuberneteså¤‡ä»½ ==="
    
    # æ£€æŸ¥Velero
    if ! command -v velero &> /dev/null; then
        log "âŒ Veleroæœªå®‰è£…"
        return 1
    fi
    
    # å¤‡ä»½æ‰€æœ‰å‘½åç©ºé—´
    NAMESPACES=$(kubectl get namespaces -o jsonpath='{.items[*].metadata.name}')
    
    for NS in $NAMESPACES; do
        if [[ "$NS" != "kube-system" && "$NS" != "kube-public" && "$NS" != "kube-node-lease" ]]; then
            log "å¤‡ä»½å‘½åç©ºé—´: $NS"
            velero backup create ${NS}-${DATE} \
                --include-namespaces $NS \
                --snapshot-volumes \
                --wait
            
            log "âœ“ $NS å¤‡ä»½å®Œæˆ"
        fi
    done
}

# 3. etcdå¤‡ä»½
backup_etcd() {
    log "=== å¼€å§‹etcdå¤‡ä»½ ==="
    
    BACKUP_DIR="${BACKUP_ROOT}/etcd/${DATE}"
    mkdir -p $BACKUP_DIR
    
    ETCDCTL_API=3 etcdctl snapshot save \
        ${BACKUP_DIR}/etcd-snapshot.db \
        --endpoints=https://127.0.0.1:2379 \
        --cacert=/etc/kubernetes/pki/etcd/ca.crt \
        --cert=/etc/kubernetes/pki/etcd/server.crt \
        --key=/etc/kubernetes/pki/etcd/server.key
    
    # éªŒè¯å¤‡ä»½
    ETCDCTL_API=3 etcdctl snapshot status \
        ${BACKUP_DIR}/etcd-snapshot.db \
        --write-out=table
    
    log "âœ“ etcdå¤‡ä»½å®Œæˆ"
}

# 4. é…ç½®æ–‡ä»¶å¤‡ä»½
backup_configs() {
    log "=== å¼€å§‹é…ç½®æ–‡ä»¶å¤‡ä»½ ==="
    
    BACKUP_DIR="${BACKUP_ROOT}/configs/${DATE}"
    mkdir -p $BACKUP_DIR
    
    # Dockeré…ç½®
    if [ -d /etc/docker ]; then
        tar czf ${BACKUP_DIR}/docker-config.tar.gz /etc/docker
    fi
    
    # Kubernetesé…ç½®
    if [ -d /etc/kubernetes ]; then
        tar czf ${BACKUP_DIR}/kubernetes-config.tar.gz /etc/kubernetes
    fi
    
    # ESXié…ç½®
    if [ -f /etc/vmware/esx.conf ]; then
        vim-cmd hostsvc/firmware/backup_config
        cp /scratch/downloads/*.tgz ${BACKUP_DIR}/
    fi
    
    log "âœ“ é…ç½®æ–‡ä»¶å¤‡ä»½å®Œæˆ"
}

# 5. æ•°æ®åº“å¤‡ä»½
backup_databases() {
    log "=== å¼€å§‹æ•°æ®åº“å¤‡ä»½ ==="
    
    BACKUP_DIR="${BACKUP_ROOT}/databases/${DATE}"
    mkdir -p $BACKUP_DIR
    
    # PostgreSQL
    kubectl get pods -A | grep postgres | while read NS POD REST; do
        log "å¤‡ä»½PostgreSQL: $NS/$POD"
        kubectl exec -n $NS $POD -- pg_dumpall -U postgres > \
            ${BACKUP_DIR}/${NS}-${POD}.sql
    done
    
    # MySQL
    kubectl get pods -A | grep mysql | while read NS POD REST; do
        log "å¤‡ä»½MySQL: $NS/$POD"
        kubectl exec -n $NS $POD -- mysqldump -u root --all-databases > \
            ${BACKUP_DIR}/${NS}-${POD}.sql
    done
    
    log "âœ“ æ•°æ®åº“å¤‡ä»½å®Œæˆ"
}

# 6. æ¸…ç†æ—§å¤‡ä»½
cleanup_old_backups() {
    log "=== æ¸…ç†æ—§å¤‡ä»½ ==="
    
    find ${BACKUP_ROOT} -type d -mtime +${RETENTION_DAYS} -exec rm -rf {} \;
    
    log "âœ“ æ—§å¤‡ä»½æ¸…ç†å®Œæˆ"
}

# 7. å¤‡ä»½åˆ°è¿œç¨‹å­˜å‚¨
sync_to_remote() {
    log "=== åŒæ­¥åˆ°è¿œç¨‹å­˜å‚¨ ==="
    
    # S3åŒæ­¥
    if command -v aws &> /dev/null; then
        aws s3 sync ${BACKUP_ROOT} s3://my-backup-bucket/backups/ \
            --delete --storage-class GLACIER
        log "âœ“ S3åŒæ­¥å®Œæˆ"
    fi
    
    # NFSåŒæ­¥
    if mount | grep -q /mnt/backup; then
        rsync -av --delete ${BACKUP_ROOT}/ /mnt/backup/
        log "âœ“ NFSåŒæ­¥å®Œæˆ"
    fi
}

# ä¸»å‡½æ•°
main() {
    log "========================================="
    log "å¼€å§‹å¤‡ä»½ä»»åŠ¡"
    log "========================================="
    
    backup_vmware
    backup_kubernetes
    backup_etcd
    backup_configs
    backup_databases
    cleanup_old_backups
    sync_to_remote
    
    log "========================================="
    log "å¤‡ä»½ä»»åŠ¡å®Œæˆ"
    log "========================================="
    
    # å‘é€é€šçŸ¥
    # mail -s "Backup Completed" admin@example.com < $LOG_FILE
}

# æ‰§è¡Œå¤‡ä»½
main
```

## 10. æœ€ä½³å®è·µ

### 10.1 éƒ¨ç½²æœ€ä½³å®è·µ

```yaml
éƒ¨ç½²æœ€ä½³å®è·µ:
  ç¯å¢ƒéš”ç¦»:
    å¼€å‘ç¯å¢ƒ: å•èŠ‚ç‚¹éƒ¨ç½²
    æµ‹è¯•ç¯å¢ƒ: å°è§„æ¨¡é›†ç¾¤
    ç”Ÿäº§ç¯å¢ƒ: é«˜å¯ç”¨é›†ç¾¤
  
  èµ„æºè§„åˆ’:
    CPU: é¢„ç•™20%èµ„æº
    å†…å­˜: é¢„ç•™30%èµ„æº
    å­˜å‚¨: é¢„ç•™50%ç©ºé—´
    ç½‘ç»œ: é¢„ç•™å¸¦å®½
  
  å®‰å…¨é…ç½®:
    å¯ç”¨é˜²ç«å¢™: é™åˆ¶ç«¯å£è®¿é—®
    ä½¿ç”¨HTTPS: åŠ å¯†é€šä¿¡
    å®šæœŸæ›´æ–°: å®‰å…¨è¡¥ä¸
    è®¿é—®æ§åˆ¶: æœ€å°æƒé™
  
  ç›‘æ§å‘Šè­¦:
    èµ„æºç›‘æ§: CPU/å†…å­˜/ç£ç›˜
    åº”ç”¨ç›‘æ§: å“åº”æ—¶é—´/é”™è¯¯ç‡
    æ—¥å¿—ç›‘æ§: å¼‚å¸¸æ—¥å¿—
    å‘Šè­¦é€šçŸ¥: åŠæ—¶é€šçŸ¥
```

### 10.2 è¿ç»´æœ€ä½³å®è·µ

```bash
    # è¿ç»´æœ€ä½³å®è·µè„šæœ¬
#!/bin/bash

    # å®šæœŸç»´æŠ¤ä»»åŠ¡
maintenance_tasks() {
    echo "=== å®šæœŸç»´æŠ¤ä»»åŠ¡ ==="
    
    # æ¸…ç†Dockeré•œåƒ
    docker system prune -f
    
    # æ¸…ç†Kubernetesèµ„æº
    kubectl delete pods --field-selector=status.phase=Succeeded
    kubectl delete pods --field-selector=status.phase=Failed
    
    # æ¸…ç†æ—¥å¿—æ–‡ä»¶
    find /var/log -name "*.log" -mtime +30 -delete
    
    # æ›´æ–°ç³»ç»ŸåŒ…
    apt update && apt upgrade -y
    
    # é‡å¯æœåŠ¡
    systemctl restart docker
    systemctl restart kubelet
}

    # å¤‡ä»½è„šæœ¬
backup_script() {
    echo "=== æ•°æ®å¤‡ä»½ ==="
    
    backup_dir="/backup/$(date +%Y%m%d)"
    mkdir -p $backup_dir
    
    # å¤‡ä»½é…ç½®æ–‡ä»¶
    cp -r /etc/docker $backup_dir/
    cp -r /etc/kubernetes $backup_dir/
    
    # å¤‡ä»½æ•°æ®
    docker run --rm -v /var/lib/docker:/data -v $backup_dir:/backup alpine tar czf /backup/docker-data.tar.gz /data
    
    # å¤‡ä»½æ•°æ®åº“
    kubectl exec -n default postgres-0 -- pg_dump -U postgres postgres > $backup_dir/database.sql
    
    echo "å¤‡ä»½å®Œæˆ: $backup_dir"
}

    # ç›‘æ§è„šæœ¬
monitoring_script() {
    echo "=== ç³»ç»Ÿç›‘æ§ ==="
    
    # æ£€æŸ¥æœåŠ¡çŠ¶æ€
    systemctl is-active docker
    systemctl is-active kubelet
    
    # æ£€æŸ¥èµ„æºä½¿ç”¨
    df -h
    free -h
    top -bn1 | head -5
    
    # æ£€æŸ¥ç½‘ç»œè¿æ¥
    netstat -tuln | grep -E ':(80|443|8080|8081|8082|9090|3000)'
}

    # æ‰§è¡Œç»´æŠ¤ä»»åŠ¡
case "$1" in
    "maintenance")
        maintenance_tasks
        ;;
    "backup")
        backup_script
        ;;
    "monitor")
        monitoring_script
        ;;
    *)
        echo "ç”¨æ³•: $0 {maintenance|backup|monitor}"
        exit 1
        ;;
esac
```

### 10.3 æ•…éšœæ¢å¤

```yaml
æ•…éšœæ¢å¤ç­–ç•¥:
  æœåŠ¡æ•…éšœ:
    è‡ªåŠ¨é‡å¯: é…ç½®é‡å¯ç­–ç•¥
    å¥åº·æ£€æŸ¥: å®šæœŸå¥åº·æ£€æŸ¥
    æ•…éšœè½¬ç§»: è‡ªåŠ¨æ•…éšœè½¬ç§»
    è´Ÿè½½å‡è¡¡: åˆ†æ•£è´Ÿè½½
  
  æ•°æ®æ•…éšœ:
    æ•°æ®å¤‡ä»½: å®šæœŸå¤‡ä»½
    æ•°æ®æ¢å¤: å¿«é€Ÿæ¢å¤
    æ•°æ®åŒæ­¥: å®æ—¶åŒæ­¥
    æ•°æ®éªŒè¯: å®Œæ•´æ€§æ£€æŸ¥
  
  ç½‘ç»œæ•…éšœ:
    ç½‘ç»œå†—ä½™: å¤šè·¯å¾„ç½‘ç»œ
    æ•…éšœæ£€æµ‹: ç½‘ç»œç›‘æ§
    è‡ªåŠ¨åˆ‡æ¢: ç½‘ç»œåˆ‡æ¢
    æ•…éšœéš”ç¦»: ç½‘ç»œéš”ç¦»
  
  ç¡¬ä»¶æ•…éšœ:
    ç¡¬ä»¶å†—ä½™: å†—ä½™ç¡¬ä»¶
    æ•…éšœæ£€æµ‹: ç¡¬ä»¶ç›‘æ§
    è‡ªåŠ¨åˆ‡æ¢: ç¡¬ä»¶åˆ‡æ¢
    æ•…éšœéš”ç¦»: ç¡¬ä»¶éš”ç¦»
```

---

## å‚è€ƒèµ„æº

### 1. å®˜æ–¹æ–‡æ¡£

[deployment-guide]: Enterprise Deployment Guide, https://www.vmware.com/support/pubs/
[enterprise-architecture]: Enterprise Architecture Best Practices, https://www.vmware.com/solutions/enterprise-architecture.html

### 2. ç¡¬ä»¶ä¸BIOS

[cpu-virtualization]: Intel Virtualization Technology, https://www.intel.com/content/www/us/en/virtualization/virtualization-technology/intel-virtualization-technology.html
[memory-sizing]: VMware Memory Sizing Guidelines, https://www.vmware.com/pdf/vi3_memory_sizing_for_consolidation.pdf
[storage-architecture]: Storage Architecture Design Guide, https://www.vmware.com/products/vsphere/storage.html
[network-architecture]: Network Architecture Best Practices, https://www.vmware.com/pdf/vi_network_architecture.pdf
[bios-virtualization]: BIOS Virtualization Settings, https://www.intel.com/content/www/us/en/support/articles/000005729/processors.html

### 3. VMware vSphere

[vmware-hcl]: VMware Hardware Compatibility List, https://www.vmware.com/resources/compatibility
[vsphere-architecture]: vSphere Architecture, https://docs.vmware.com/en/VMware-vSphere/8.0/vsphere-architecture/
[esxi-installation]: ESXi Installation and Setup, https://docs.vmware.com/en/VMware-vSphere/8.0/vsphere-esxi-installation/
[vcsa-architecture]: vCenter Server Appliance Architecture, https://docs.vmware.com/en/VMware-vSphere/8.0/vsphere-vcenter-configuration/

### 4. KVMè™šæ‹ŸåŒ–

[kvm-architecture]: KVM Architecture, https://www.linux-kvm.org/page/Main_Page
[kvm-installation]: KVM Installation Guide, https://www.linux-kvm.org/page/Getting_Started

### 5. Hyper-V

[hyperv-architecture]: Hyper-V Architecture, https://docs.microsoft.com/en-us/windows-server/virtualization/hyper-v/hyper-v-technology-overview
[hyperv-installation]: Install Hyper-V, https://docs.microsoft.com/en-us/windows-server/virtualization/hyper-v/get-started/install-the-hyper-v-role-on-windows-server

### 6. Dockerå®¹å™¨

[docker-overview]: Docker Overview, https://docs.docker.com/get-started/overview/
[docker-installation]: Docker Engine Installation, https://docs.docker.com/engine/install/
[docker-compose]: Docker Compose, https://docs.docker.com/compose/

### 7. Kubernetes

[kubernetes-architecture]: Kubernetes Architecture, https://kubernetes.io/docs/concepts/architecture/
[kubeadm-installation]: Creating a cluster with kubeadm, https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/
[k8s-ha]: Kubernetes High Availability, https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/high-availability/

### 8. å­˜å‚¨ä¸ç½‘ç»œ

[storage-design]: Storage Design Guide, https://storagehub.vmware.com/section-assets/vmware-vsphere-storage-best-practices
[storage-comparison]: Storage Technology Comparison, https://www.vmware.com/products/vsphere/storage.html
[network-design]: Network Design Best Practices, https://docs.vmware.com/en/VMware-vSphere/8.0/vsphere-networking/

---

## 11. ç›¸å…³æ–‡æ¡£

### æ ¸å¿ƒæŠ€æœ¯æ–‡æ¡£

- [Dockeræ¶æ„åŸç†](../Container/01_DockeræŠ€æœ¯è¯¦è§£/01_Dockeræ¶æ„åŸç†.md) - å®¹å™¨æŠ€æœ¯åŸºç¡€
- [Kubernetesæ¶æ„åŸç†](../Container/03_KubernetesæŠ€æœ¯è¯¦è§£/01_Kubernetesæ¶æ„åŸç†.md) - å®¹å™¨ç¼–æ’åŸºç¡€
- [vSphereæ¶æ„æ¦‚è¿°](../vShpere_VMware/01_vSphereåŸºç¡€æ¶æ„/01_vSphereæ¶æ„æ¦‚è¿°.md) - è™šæ‹ŸåŒ–åŸºç¡€
- [ESXiå®‰è£…é…ç½®](../vShpere_VMware/02_ESXiæŠ€æœ¯è¯¦è§£/02_ESXiå®‰è£…é…ç½®.md) - è™šæ‹ŸåŒ–å¹³å°å®‰è£…

### æŠ€æœ¯å®æ–½æ–‡æ¡£

- [æŠ€æœ¯å®æ–½æŒ‡å—ä¸æœ€ä½³å®è·µ](../Analysis/02_æŠ€æœ¯å®æ–½æŒ‡å—ä¸æœ€ä½³å®è·µ.md) - å®Œæ•´å®æ–½æŒ‡å¯¼
- [æ€§èƒ½åˆ†æä¸ä¼˜åŒ–ç»¼åˆæŒ‡å—](../Analysis/04_æ€§èƒ½åˆ†æä¸ä¼˜åŒ–ç»¼åˆæŒ‡å—.md) - æ€§èƒ½è°ƒä¼˜æŒ‡å—
- [æŠ€æœ¯æ ‡å‡†åˆè§„æ€§ä¸å¯¹æ ‡åˆ†æ](../Analysis/03_æŠ€æœ¯æ ‡å‡†åˆè§„æ€§ä¸å¯¹æ ‡åˆ†æ.md) - æ ‡å‡†åˆè§„æ€§

### å®‰å…¨ä¸è¿ç»´æ–‡æ¡£

- [å®‰å…¨æ¶æ„æŒ‡å—](../Security/01_è™šæ‹ŸåŒ–å®¹å™¨åŒ–å®‰å…¨æ¶æ„ç»ˆææŒ‡å—.md) - å®‰å…¨è®¾è®¡æŒ‡å¯¼
- [è¯­ä¹‰æ¨¡å‹éªŒè¯å·¥å…·](../Semantic/04_è¯­ä¹‰æ¨¡å‹éªŒè¯å·¥å…·ä¸ä»£ç å®ç°.md) - ç³»ç»ŸéªŒè¯å·¥å…·
- [é¡¹ç›®å¯¼èˆªä¸ä½¿ç”¨æŒ‡å—](../é¡¹ç›®å¯¼èˆªä¸ä½¿ç”¨æŒ‡å—.md) - å®Œæ•´å­¦ä¹ è·¯å¾„

### å­¦ä¹ èµ„æº

- [Dockerå®¹å™¨ç®¡ç†](../Container/01_DockeræŠ€æœ¯è¯¦è§£/02_Dockerå®¹å™¨ç®¡ç†.md) - å®¹å™¨è¿ç»´å®è·µ
- [vCenterç®¡ç†æŠ€æœ¯](../vShpere_VMware/03_vCenter ServeræŠ€æœ¯/01_vCenteræ¶æ„åŸç†.md) - è™šæ‹ŸåŒ–ç®¡ç†
- [ç½‘ç»œè™šæ‹ŸåŒ–æŠ€æœ¯](../vShpere_VMware/06_ç½‘ç»œè™šæ‹ŸåŒ–æŠ€æœ¯/01_NSXæ¶æ„åŸç†.md) - ç½‘ç»œæŠ€æœ¯
- [å­˜å‚¨è™šæ‹ŸåŒ–æŠ€æœ¯](../vShpere_VMware/05_å­˜å‚¨è™šæ‹ŸåŒ–æŠ€æœ¯/01_vSANæ¶æ„åŸç†.md) - å­˜å‚¨æŠ€æœ¯

### æ›´æ–°æ—¥å¿— ğŸ†•

**v3.0 (2025-10-19 - é‡å¤§æ›´æ–°)**:

æ–°å¢ä¼ä¸šçº§æ ‡å‡†é…ç½®ç« èŠ‚ï¼ˆ+1300è¡Œï¼‰:

- âœ… ç¬¬8ç« ï¼šå­˜å‚¨æ¶æ„æ ‡å‡†é…ç½®ï¼ˆ400è¡Œï¼‰
  - å­˜å‚¨ç±»å‹å…¨é¢å¯¹æ¯”ï¼ˆDAS/NAS/SAN/HCIï¼‰
  - è¯¦ç»†çš„äº§å“æ¨èå’Œä»·æ ¼
  - å®Œæ•´çš„é…ç½®è„šæœ¬å’Œå‘½ä»¤
  - vSANå’ŒCephé›†ç¾¤è§„åˆ’
  - å­˜å‚¨æ€§èƒ½å¯¹æ¯”è¡¨
  
- âœ… ç¬¬9ç« ï¼šç½‘ç»œæ¶æ„æ ‡å‡†é…ç½®ï¼ˆ220è¡Œï¼‰
  - æ ‡å‡†VLANè§„åˆ’ï¼ˆç®¡ç†/å­˜å‚¨/vMotion/ä¸šåŠ¡ï¼‰
  - Ciscoäº¤æ¢æœºå®Œæ•´é…ç½®ç¤ºä¾‹
  - VMware vDS LACPé…ç½®è„šæœ¬
  - Jumbo Frameå…¨é“¾è·¯é…ç½®
  - QoSæµé‡æ•´å½¢æ ‡å‡†
  - ç½‘ç»œå®‰å…¨ç­–ç•¥
  
- âœ… ç¬¬10ç« ï¼šé«˜å¯ç”¨ä¸å®¹ç¾é…ç½®ï¼ˆ430è¡Œï¼‰
  - VMware HAå®Œæ•´é…ç½®æ ‡å‡†
  - Kubernetes HAæ¶æ„ï¼ˆHAProxy+Keepalivedï¼‰
  - etcdé›†ç¾¤é«˜å¯ç”¨é…ç½®
  - ä¼ä¸šçº§å¤‡ä»½è„šæœ¬ï¼ˆ350è¡Œï¼‰
  - VMware/K8s/etcdå…¨æ–¹ä½å¤‡ä»½
  
- âœ… PowerShell/Bashå®Œæ•´è„šæœ¬ï¼ˆå¯ç›´æ¥ä½¿ç”¨ï¼‰
- âœ… æ–‡æ¡£è§„æ¨¡ï¼š2700è¡Œ â†’ 3550è¡Œï¼ˆå¢é•¿31%ï¼‰

**v2.0 (2025-10-19)**:

- âœ… æ–°å¢è¯¦ç»†ç¡¬ä»¶é€‰å‹æŒ‡å—ï¼ˆCPUã€å†…å­˜ã€å­˜å‚¨ã€ç½‘ç»œï¼‰
- âœ… æ–°å¢BIOS/å›ºä»¶é…ç½®æ¸…å•
- âœ… æ–°å¢ç¡¬ä»¶å…¼å®¹æ€§æ¸…å• (HCL)
- âœ… æ‰©å±•VMware vSphereå®Œæ•´å®‰è£…éƒ¨ç½²æµç¨‹
- âœ… æ–°å¢KVM/Hyper-Vè™šæ‹ŸåŒ–å¹³å°éƒ¨ç½²æŒ‡å—
- âœ… æ–°å¢è™šæ‹Ÿæœºæ¨¡æ¿åˆ›å»ºæœ€ä½³å®è·µ
- âœ… æ–‡æ¡£è§„æ¨¡ä»930è¡Œæ‰©å±•è‡³2700è¡Œ

**v1.0 (åˆå§‹ç‰ˆæœ¬)**:

- åŸºç¡€éƒ¨ç½²æµç¨‹
- å®¹å™¨åŒ–é…ç½®
- ç›‘æ§å’Œæ•…éšœæ’é™¤

**ç´¯è®¡æ›´æ–°**: 930è¡Œ â†’ 3550è¡Œï¼ˆå¢é•¿282%ï¼‰ğŸ‰

---

_æœ¬æŒ‡å—æä¾›äº†å®Œæ•´çš„è™šæ‹ŸåŒ–å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ç¯å¢ƒå‡†å¤‡ã€éƒ¨ç½²å®æ–½ã€ç›‘æ§è¿ç»´å’Œæ•…éšœæ’é™¤ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šå¯é è¿è¡Œã€‚_
