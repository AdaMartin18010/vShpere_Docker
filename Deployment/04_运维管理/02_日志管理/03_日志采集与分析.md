# æ—¥å¿—é‡‡é›†ä¸åˆ†æ

> **è¿”å›**: [æ—¥å¿—ç®¡ç†é¦–é¡µ](README.md) | [è¿ç»´ç®¡ç†é¦–é¡µ](../README.md) | [éƒ¨ç½²æŒ‡å—é¦–é¡µ](../../00_ç´¢å¼•å¯¼èˆª/README.md)

---

## ğŸ“‹ ç›®å½•

- [æ—¥å¿—é‡‡é›†ä¸åˆ†æ](#æ—¥å¿—é‡‡é›†ä¸åˆ†æ)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. Fluent Bité‡‡é›†](#1-fluent-bité‡‡é›†)
  - [2. æ—¥å¿—æ ¼å¼åŒ–](#2-æ—¥å¿—æ ¼å¼åŒ–)
  - [3. æ—¥å¿—è¿‡æ»¤](#3-æ—¥å¿—è¿‡æ»¤)
  - [4. æ—¥å¿—åˆ†æ](#4-æ—¥å¿—åˆ†æ)

---

## 1. Fluent Bité‡‡é›†

**DaemonSetéƒ¨ç½²**:

```yaml
apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: fluent-bit
  namespace: logging
spec:
  selector:
    matchLabels:
      app: fluent-bit
  template:
    metadata:
      labels:
        app: fluent-bit
    spec:
      containers:
      - name: fluent-bit
        image: fluent/fluent-bit:2.2
        volumeMounts:
        - name: varlog
          mountPath: /var/log
        - name: varlibdockercontainers
          mountPath: /var/lib/docker/containers
          readOnly: true
        - name: config
          mountPath: /fluent-bit/etc/
      volumes:
      - name: varlog
        hostPath:
          path: /var/log
      - name: varlibdockercontainers
        hostPath:
          path: /var/lib/docker/containers
      - name: config
        configMap:
          name: fluent-bit-config
```

---

## 2. æ—¥å¿—æ ¼å¼åŒ–

**Fluent Bité…ç½®**:

```ini
[INPUT]
    Name              tail
    Path              /var/log/containers/*.log
    Parser            docker
    Tag               kube.*
    
[FILTER]
    Name              kubernetes
    Match             kube.*
    Kube_URL          https://kubernetes.default.svc:443
    
[OUTPUT]
    Name              elasticsearch
    Match             *
    Host              elasticsearch
    Port              9200
    Index             fluent-bit
    Type              _doc
```

---

## 3. æ—¥å¿—è¿‡æ»¤

**è¿‡æ»¤è§„åˆ™**:

```ini
[FILTER]
    Name    grep
    Match   *
    Regex   log level=(ERROR|WARN)
    
[FILTER]
    Name    modify
    Match   *
    Add     cluster prod
```

---

## 4. æ—¥å¿—åˆ†æ

**æ—¥å¿—å‘Šè­¦è§„åˆ™**:

```yaml
groups:
- name: log_alerts
  rules:
  - alert: HighErrorRate
    expr: |
      sum(rate({job="app"} |= "ERROR" [5m])) > 10
    labels:
      severity: warning
    annotations:
      summary: "åº”ç”¨é”™è¯¯æ—¥å¿—è¿‡å¤š"
```

---

**æ›´æ–°æ—¶é—´**: 2025-10-19  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**çŠ¶æ€**: âœ… å®Œæˆ

