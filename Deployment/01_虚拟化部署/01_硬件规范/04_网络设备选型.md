# 网络设备选型指南

> **返回**: [硬件规范目录](README.md) | [部署指南首页](../../00_索引导航/README.md)

---

## 📋 目录

- [网络设备选型指南](#网络设备选型指南)
  - [📋 目录](#-目录)
  - [网卡选型](#网卡选型)
    - [网卡速率对比](#网卡速率对比)
  - [交换机选型](#交换机选型)
    - [接入层交换机](#接入层交换机)
    - [汇聚/核心层交换机](#汇聚核心层交换机)
    - [光模块选型](#光模块选型)
  - [网络拓扑设计](#网络拓扑设计)
    - [标准三层架构](#标准三层架构)
    - [Spine-Leaf架构](#spine-leaf架构)
  - [按环境规模配置](#按环境规模配置)
    - [小型环境 (\<10台服务器)](#小型环境-10台服务器)
    - [中型环境 (10-50台服务器)](#中型环境-10-50台服务器)
    - [大型环境 (\>50台服务器)](#大型环境-50台服务器)
  - [注意事项](#注意事项)
    - [⚠️ 重要提示](#️-重要提示)
    - [📌 选型建议](#-选型建议)
  - [相关文档](#相关文档)

---

## 网卡选型

### 网卡速率对比

```yaml
1GbE (千兆网卡):
  带宽: 1 Gbps (125 MB/s)
  延迟: <1ms
  
  推荐型号:
    Intel I350-T4:
      端口: 4口RJ45
      接口: PCIe 2.1 x4
      特性: SR-IOV, VMDq
      价格: ¥800
      适用: 管理网络
    
    Broadcom BCM5719:
      端口: 4口RJ45
      接口: PCIe 2.0 x4
      特性: Dell/HP常用
      价格: ¥1,000
      适用: 服务器集成
  
  适用场景:
    ✅ 管理网络
    ✅ 远程管理(iDRAC/iLO)
    ❌ 不推荐业务网络

10GbE (万兆网卡):
  带宽: 10 Gbps (1.25 GB/s)
  延迟: <0.5ms
  
  推荐型号:
    Intel X710-DA2 (SFP+):
      端口: 2口SFP+
      接口: PCIe 3.0 x8
      特性: SR-IOV, RDMA
      价格: ¥3,000
      适用: 业务+存储网络
    
    Mellanox ConnectX-4 Lx:
      端口: 2口SFP+
      接口: PCIe 3.0 x8
      特性: RDMA over Converged Ethernet (RoCE)
      价格: ¥3,500
      适用: 高性能存储
    
    Intel X710-T4 (RJ45):
      端口: 4口RJ45
      接口: PCIe 3.0 x8
      特性: 无需光模块
      价格: ¥4,000
      适用: 铜缆环境
  
  适用场景:
    ✅ 虚拟化起步标准
    ✅ 中小型环境
    ✅ 存储网络(iSCSI/NFS)

25GbE:
  带宽: 25 Gbps (3.125 GB/s)
  延迟: <0.3ms
  
  推荐型号:
    Mellanox ConnectX-5:
      端口: 2口SFP28
      接口: PCIe 3.0 x16
      特性: RoCE v2, 100Gbps (双口聚合)
      价格: ¥6,000
      适用: 高性能虚拟化
    
    Intel XXV710-DA2:
      端口: 2口SFP28
      接口: PCIe 3.0 x8
      特性: SR-IOV
      价格: ¥5,500
      适用: 数据中心
  
  适用场景:
    ✅ 中大型虚拟化环境
    ✅ 高性能存储网络
    ✅ 大规模容器平台

40GbE:
  带宽: 40 Gbps (5 GB/s)
  延迟: <0.2ms
  
  推荐型号:
    Mellanox ConnectX-3 Pro:
      端口: 2口QSFP+
      接口: PCIe 3.0 x8
      价格: ¥5,000
      适用: 上一代高端
  
  说明: 已被25G/100G取代，不推荐新购

100GbE:
  带宽: 100 Gbps (12.5 GB/s)
  延迟: <0.1ms
  
  推荐型号:
    Mellanox ConnectX-6:
      端口: 2口QSFP28
      接口: PCIe 4.0 x16
      特性: RoCE v2, 200Gbps (双口聚合)
      价格: ¥15,000
      适用: 超大规模数据中心
    
    Intel E810-CQDA2:
      端口: 2口QSFP28
      接口: PCIe 4.0 x16
      价格: ¥18,000
      适用: 云服务提供商
  
  适用场景:
    ✅ 超大规模虚拟化
    ✅ 云服务提供商
    ✅ Spine-Leaf架构

网卡选型建议:
  小型环境:
    管理: 1GbE 板载
    业务: 10GbE x2 (Intel X710)
    预算: ¥3,000
  
  中型环境:
    管理: 1GbE 板载
    业务: 25GbE x2 (Mellanox CX-5)
    存储: 10GbE x2 (Intel X710)
    预算: ¥9,000
  
  大型环境:
    管理: 1GbE 板载
    业务: 100GbE x2 (Mellanox CX-6)
    存储: 25GbE x2 (Intel XXV710)
    预算: ¥20,500
```

---

## 交换机选型

### 接入层交换机

```yaml
小型环境 (5-10台服务器):
  推荐型号:
    华为 S5735-L48T4XE-A:
      下行端口: 48x 1GbE
      上行端口: 4x 10GbE SFP+
      交换容量: 336 Gbps
      包转发率: 108 Mpps
      特性: L3, VLAN, LACP
      价格: ¥8,000
      适用: 小型企业
    
    Cisco Catalyst 1000-48T-4G-L:
      下行端口: 48x 1GbE
      上行端口: 4x 1GbE SFP
      交换容量: 104 Gbps
      价格: ¥12,000
      适用: Cisco生态

中型环境 (10-30台服务器):
  推荐型号:
    华为 S5732-H48S6Q:
      下行端口: 48x 10GbE SFP+
      上行端口: 6x 40GbE QSFP+
      交换容量: 1.28 Tbps
      包转发率: 960 Mpps
      特性: 堆叠, L3, QoS
      价格: ¥35,000
      适用: 中型数据中心
    
    Cisco Nexus 9300-48T:
      下行端口: 48x 10GbE
      上行端口: 4x 40GbE QSFP+
      交换容量: 1.44 Tbps
      特性: ACI支持, L3
      价格: ¥80,000
      适用: 企业级
    
    HPE Aruba 6300M:
      下行端口: 48x 10GbE
      上行端口: 4x 25GbE
      交换容量: 1.44 Tbps
      特性: VSF堆叠, L3
      价格: ¥45,000
      适用: HPE生态

大型环境 (>30台服务器):
  推荐型号:
    华为 CE6865-48S8CQ:
      下行端口: 48x 25GbE SFP28
      上行端口: 8x 100GbE QSFP28
      交换容量: 3.2 Tbps
      包转发率: 2,000 Mpps
      特性: CloudEngine, L3, VxLAN
      价格: ¥120,000
      适用: 大型数据中心
    
    Cisco Nexus 93180YC-FX:
      下行端口: 48x 25GbE + 6x 100GbE
      交换容量: 3.6 Tbps
      特性: ACI, L3, VxLAN
      价格: ¥180,000
      适用: 云服务提供商
    
    Arista 7050X3-32Q:
      端口: 32x 100GbE QSFP28
      交换容量: 6.4 Tbps
      特性: CloudVision, BGP
      价格: ¥250,000
      适用: 超大规模
```

### 汇聚/核心层交换机

```yaml
中型环境:
  推荐型号:
    华为 CE6880-48S8CQ-EI:
      端口: 48x 25GbE + 8x 100GbE
      交换容量: 3.2 Tbps
      包转发率: 2,000 Mpps
      特性: L3, MPLS, VxLAN
      价格: ¥180,000
    
    Cisco Nexus 9504:
      端口: 模块化 (最多384x 10GbE)
      交换容量: 12.8 Tbps
      特性: ACI, L3, 冗余引擎
      价格: ¥500,000+
      适用: 关键任务

大型环境:
  推荐型号:
    华为 CE16800:
      端口: 模块化 (最多576x 100GbE)
      交换容量: 115.2 Tbps
      包转发率: 14,400 Mpps
      特性: AI Fabric, L3
      价格: ¥2,000,000+
    
    Cisco Nexus 9500:
      端口: 模块化
      交换容量: 60 Tbps
      特性: ACI, 冗余引擎
      价格: ¥3,000,000+
    
    Arista 7500R3:
      端口: 模块化
      交换容量: 76.8 Tbps
      特性: CloudVision
      价格: ¥2,500,000+
```

### 光模块选型

```yaml
10GbE光模块:
  SFP+ SR (短距):
    波长: 850nm
    距离: 300m (OM3), 400m (OM4)
    接口: LC
    价格: ¥200-400
    适用: 机房内连接
  
  SFP+ LR (长距):
    波长: 1310nm
    距离: 10km
    接口: LC
    价格: ¥800-1,200
    适用: 楼宇间连接
  
  DAC直连线缆:
    距离: 1-7m
    价格: ¥100-300
    适用: 机柜内/相邻机柜

25GbE光模块:
  SFP28 SR:
    波长: 850nm
    距离: 100m
    价格: ¥400-600
  
  SFP28 LR:
    波长: 1310nm
    距离: 10km
    价格: ¥1,500-2,000

100GbE光模块:
  QSFP28 SR4:
    波长: 850nm
    距离: 100m
    接口: MPO/MTP
    价格: ¥2,000-3,000
  
  QSFP28 LR4:
    波长: 1310nm
    距离: 10km
    接口: LC
    价格: ¥8,000-12,000

光模块品牌推荐:
  原厂: Cisco/Huawei/Arista (最贵,保修好)
  兼容: Finisar/Source Photonics (性价比高)
  国产: 光迅/海信/华工正源 (国产化)
```

---

## 网络拓扑设计

### 标准三层架构

```yaml
  拓扑结构:
    核心层 (Core):
      设备数: 2台 (冗余)
      功能: 高速转发骨干
      带宽: 100GbE+
      冗余: 主备或MLAG
    
    汇聚层 (Distribution):
      设备数: 2-4台
      功能: VLAN路由、策略控制
      带宽: 25/40/100GbE
      冗余: 双上行
    
    接入层 (Access):
      设备数: 按需配置
      功能: 服务器接入
      带宽: 10/25GbE
      冗余: 双上行到汇聚层

  连接方式:
    服务器 → 接入层: LACP双上行
    接入层 → 汇聚层: LACP双上行
    汇聚层 → 核心层: LACP双上行
    核心层之间: MLAG/vPC堆叠

  拓扑图:
    ```

          [核心1]═══[核心2]  (100GbE MLAG)
            ║         ║
        ═════════════════════
        ║    ║    ║    ║
      [汇聚1][汇聚2][汇聚3][汇聚4]  (40GbE)
        ║    ║    ║    ║
        ═════════════════════
        ║  ║  ║  ║  ║  ║
      [接入1-6...]  (25GbE)
        ║  ║  ║  ║
      [服务器群组]  (10/25GbE LACP)

    ```
```

### Spine-Leaf架构

```yaml
  拓扑结构:
    Spine层 (脊):
      设备数: 2-8台
      功能: 无阻塞转发
      带宽: 100GbE
      特点: 不互联
    
    Leaf层 (叶):
      设备数: 按需配置
      功能: 服务器接入
      带宽: 下行25GbE, 上行100GbE
      特点: 全连接到所有Spine

  连接规则:
    ✅ 每个Leaf连接所有Spine
    ❌ Leaf之间不互联
    ❌ Spine之间不互联
    
  优势:
    ✅ 任意节点2跳可达
    ✅ 横向扩展简单
    ✅ 带宽利用率高
    ✅ 适合云数据中心

  拓扑图:

    ```text

        [Spine-1] [Spine-2] [Spine-3] [Spine-4]
          ║        ║        ║        ║
      ══════════════════════════════════════
      ║    ║    ║    ║    ║    ║    ║    ║
    [Leaf-1][Leaf-2][Leaf-3][Leaf-4]...[Leaf-N]
      ║      ║      ║      ║          ║
    [服务器][服务器][服务器][服务器]...[服务器]

    ```

  容量规划:
    小型 (100台服务器):
      Spine: 2台
      Leaf: 4台 (每台24-48端口)
      服务器端口: 25GbE
      上行: 100GbE
    
    中型 (500台服务器):
      Spine: 4台
      Leaf: 12台
      总上行带宽: 4.8Tbps
    
    大型 (2000台服务器):
      Spine: 8台
      Leaf: 48台
      总上行带宽: 19.2Tbps

```

---

## 按环境规模配置

### 小型环境 (<10台服务器)

```yaml
网络配置:
  服务器网卡:
    管理: 板载1GbE x2
    业务: Intel X710 10GbE x2
    成本/台: ¥3,000
  
  接入交换机:
    型号: 华为 S5735-L48T4XE-A
    数量: 2台 (堆叠)
    价格: ¥16,000
  
  光模块:
    10GbE SFP+ SR: 8个
    10GbE DAC线缆: 4根
    成本: ¥2,400
  
  总成本: ¥18,400 (网络设备)
  
网络拓扑:
  简化两层架构 (接入即汇聚)
  双交换机堆叠提供冗余
```

### 中型环境 (10-50台服务器)

```yaml
网络配置:
  服务器网卡:
    管理: 板载1GbE x2
    业务: Mellanox CX-5 25GbE x2
    存储: Intel X710 10GbE x2
    成本/台: ¥9,000
  
  接入交换机:
    型号: 华为 S5732-H48S6Q
    数量: 4台
    价格: ¥140,000
  
  汇聚交换机:
    型号: 华为 CE6880-48S8CQ-EI
    数量: 2台
    价格: ¥360,000
  
  核心交换机:
    型号: 华为 CE6880 (汇聚兼核心)
  
  光模块:
    25GbE SFP28: 200个
    100GbE QSFP28: 24个
    成本: ¥180,000
  
  总成本: ¥680,000 (网络设备)

网络拓扑:
  标准三层架构
  全冗余设计
```

### 大型环境 (>50台服务器)

```yaml
网络配置:
  服务器网卡:
    管理: 板载1GbE x2
    业务: Mellanox CX-6 100GbE x2
    存储: Mellanox CX-5 25GbE x2
    成本/台: ¥21,000
  
  Leaf交换机:
    型号: Cisco Nexus 93180YC-FX
    数量: 12台
    价格: ¥2,160,000
  
  Spine交换机:
    型号: Cisco Nexus 9504
    数量: 4台
    价格: ¥2,000,000
  
  光模块:
    100GbE QSFP28: 300个
    25GbE SFP28: 600个
    成本: ¥1,140,000
  
  总成本: ¥5,300,000 (网络设备)

网络拓扑:
  Spine-Leaf架构
  EVPN/VxLAN Overlay
  BGP路由
```

---

## 注意事项

### ⚠️ 重要提示

1. **10GbE起步**: 虚拟化环境最低10GbE
2. **双上行必备**: 所有设备必须双上行
3. **光模块兼容**: 提前确认兼容性
4. **带宽规划**: 预留50%余量
5. **管理网络独立**: 管理和业务必须分离
6. **Jumbo Frame**: 存储网络启用MTU 9000

### 📌 选型建议

✅ **25GbE成主流**: 价格接近10GbE，性能提升2.5倍  
✅ **LACP链路聚合**: 提升带宽和冗余  
✅ **品牌选择**: Cisco/华为/Arista根据预算  
✅ **光模块**: 兼容品牌性价比高  
✅ **Spine-Leaf**: 大型环境首选架构  

---

## 相关文档

- [CPU处理器选型](01_CPU处理器选型.md)
- [内存选型指南](02_内存选型.md)
- [存储选型指南](03_存储选型.md)
- [网络架构设计](../04_网络架构/)

---

**更新时间**: 2025-10-19  
**文档版本**: v3.0  
**状态**: ✅ 生产就绪
